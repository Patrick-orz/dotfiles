"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getToken = getToken;
// TKK value from https://github.com/FilipePS/Traduzir-paginas-web/blob/f3a4956a1aa96b7a9124864158a5200827694521/background/translationService.js
const googleTranslateTKK = '448487.932609646';

//
// Obfuscated logic: START
//
/* eslint-disable no-bitwise */

function shiftLeftOrRightThenSumOrXor(num, optString) {
  for (let i = 0; i < optString.length - 2; i += 3) {
    let acc = optString.charAt(i + 2);
    if ('a' <= acc) {
      acc = acc.charCodeAt(0) - 87;
    } else {
      acc = Number(acc);
    }
    if (optString.charAt(i + 1) == '+') {
      acc = num >>> acc;
    } else {
      acc = num << acc;
    }
    if (optString.charAt(i) == '+') {
      num += acc & 4294967295;
    } else {
      num ^= acc;
    }
  }
  return num;
}
function transformQuery(query) {
  const bytesArray = [];
  let idx = [];
  for (let i = 0; i < query.length; i++) {
    let charCode = query.charCodeAt(i);
    if (128 > charCode) {
      bytesArray[idx++] = charCode;
    } else {
      if (2048 > charCode) {
        bytesArray[idx++] = charCode >> 6 | 192;
      } else {
        if (55296 == (charCode & 64512) && i + 1 < query.length && 56320 == (query.charCodeAt(i + 1) & 64512)) {
          charCode = 65536 + ((charCode & 1023) << 10) + (query.charCodeAt(++i) & 1023);
          bytesArray[idx++] = charCode >> 18 | 240;
          bytesArray[idx++] = charCode >> 12 & 63 | 128;
        } else {
          bytesArray[idx++] = charCode >> 12 | 224;
        }
        bytesArray[idx++] = charCode >> 6 & 63 | 128;
      }
      bytesArray[idx++] = charCode & 63 | 128;
    }
  }
  return bytesArray;
}
function calcHash(query, windowTkk) {
  const tkkSplited = windowTkk.split('.');
  const tkkIndex = Number(tkkSplited[0]) || 0;
  const tkkKey = Number(tkkSplited[1]) || 0;
  const bytesArray = transformQuery(query);
  let encondingRound = tkkIndex;
  for (let i = 0; i < bytesArray.length; i++) {
    encondingRound += bytesArray[i];
    encondingRound = shiftLeftOrRightThenSumOrXor(encondingRound, '+-a^+6');
  }
  encondingRound = shiftLeftOrRightThenSumOrXor(encondingRound, '+-3^+b+-f');
  encondingRound ^= tkkKey;
  if (encondingRound <= 0) {
    encondingRound = (encondingRound & 2147483647) + 2147483648;
  }
  const normalizedResult = encondingRound % 1000000;
  return normalizedResult.toString() + '.' + (normalizedResult ^ tkkIndex);
}

/* eslint-enable no-bitwise */
//
// Obfuscated logic: END
//

function getToken(query) {
  return new Promise(res => res({
    value: calcHash(query, googleTranslateTKK)
  }));
}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidHJhbnNsYXRvcnMvR29vZ2xlVHJhbnNsYXRvci90b2tlbi5qcyIsIm5hbWVzIjpbImdvb2dsZVRyYW5zbGF0ZVRLSyIsInNoaWZ0TGVmdE9yUmlnaHRUaGVuU3VtT3JYb3IiLCJudW0iLCJvcHRTdHJpbmciLCJpIiwibGVuZ3RoIiwiYWNjIiwiY2hhckF0IiwiY2hhckNvZGVBdCIsIk51bWJlciIsInRyYW5zZm9ybVF1ZXJ5IiwicXVlcnkiLCJieXRlc0FycmF5IiwiaWR4IiwiY2hhckNvZGUiLCJjYWxjSGFzaCIsIndpbmRvd1RrayIsInRra1NwbGl0ZWQiLCJzcGxpdCIsInRra0luZGV4IiwidGtrS2V5IiwiZW5jb25kaW5nUm91bmQiLCJub3JtYWxpemVkUmVzdWx0IiwidG9TdHJpbmciLCJnZXRUb2tlbiIsIlByb21pc2UiLCJyZXMiLCJ2YWx1ZSJdLCJzb3VyY2VzIjpbInRyYW5zbGF0b3JzL0dvb2dsZVRyYW5zbGF0b3IvdG9rZW4uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVEtLIHZhbHVlIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL0ZpbGlwZVBTL1RyYWR1emlyLXBhZ2luYXMtd2ViL2Jsb2IvZjNhNDk1NmExYWE5NmI3YTkxMjQ4NjQxNThhNTIwMDgyNzY5NDUyMS9iYWNrZ3JvdW5kL3RyYW5zbGF0aW9uU2VydmljZS5qc1xuY29uc3QgZ29vZ2xlVHJhbnNsYXRlVEtLID0gJzQ0ODQ4Ny45MzI2MDk2NDYnO1xuXG4vL1xuLy8gT2JmdXNjYXRlZCBsb2dpYzogU1RBUlRcbi8vXG4vKiBlc2xpbnQtZGlzYWJsZSBuby1iaXR3aXNlICovXG5cbmZ1bmN0aW9uIHNoaWZ0TGVmdE9yUmlnaHRUaGVuU3VtT3JYb3IobnVtLCBvcHRTdHJpbmcpIHtcblx0Zm9yIChsZXQgaSA9IDA7IGkgPCBvcHRTdHJpbmcubGVuZ3RoIC0gMjsgaSArPSAzKSB7XG5cdFx0bGV0IGFjYyA9IG9wdFN0cmluZy5jaGFyQXQoaSArIDIpO1xuXHRcdGlmICgnYScgPD0gYWNjKSB7XG5cdFx0XHRhY2MgPSBhY2MuY2hhckNvZGVBdCgwKSAtIDg3O1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRhY2MgPSBOdW1iZXIoYWNjKTtcblx0XHR9XG5cdFx0aWYgKG9wdFN0cmluZy5jaGFyQXQoaSArIDEpID09ICcrJykge1xuXHRcdFx0YWNjID0gbnVtID4+PiBhY2M7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGFjYyA9IG51bSA8PCBhY2M7XG5cdFx0fVxuXHRcdGlmIChvcHRTdHJpbmcuY2hhckF0KGkpID09ICcrJykge1xuXHRcdFx0bnVtICs9IGFjYyAmIDQyOTQ5NjcyOTU7XG5cdFx0fSBlbHNlIHtcblx0XHRcdG51bSBePSBhY2M7XG5cdFx0fVxuXHR9XG5cdHJldHVybiBudW07XG59XG5cbmZ1bmN0aW9uIHRyYW5zZm9ybVF1ZXJ5KHF1ZXJ5KSB7XG5cdGNvbnN0IGJ5dGVzQXJyYXkgPSBbXTtcblx0bGV0IGlkeCA9IFtdO1xuXHRmb3IgKGxldCBpID0gMDsgaSA8IHF1ZXJ5Lmxlbmd0aDsgaSsrKSB7XG5cdFx0bGV0IGNoYXJDb2RlID0gcXVlcnkuY2hhckNvZGVBdChpKTtcblxuXHRcdGlmICgxMjggPiBjaGFyQ29kZSkge1xuXHRcdFx0Ynl0ZXNBcnJheVtpZHgrK10gPSBjaGFyQ29kZTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0aWYgKDIwNDggPiBjaGFyQ29kZSkge1xuXHRcdFx0XHRieXRlc0FycmF5W2lkeCsrXSA9IChjaGFyQ29kZSA+PiA2KSB8IDE5Mjtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGlmIChcblx0XHRcdFx0XHQ1NTI5NiA9PSAoY2hhckNvZGUgJiA2NDUxMikgJiZcblx0XHRcdFx0XHRpICsgMSA8IHF1ZXJ5Lmxlbmd0aCAmJlxuXHRcdFx0XHRcdDU2MzIwID09IChxdWVyeS5jaGFyQ29kZUF0KGkgKyAxKSAmIDY0NTEyKVxuXHRcdFx0XHQpIHtcblx0XHRcdFx0XHRjaGFyQ29kZSA9XG5cdFx0XHRcdFx0XHQ2NTUzNiArXG5cdFx0XHRcdFx0XHQoKGNoYXJDb2RlICYgMTAyMykgPDwgMTApICtcblx0XHRcdFx0XHRcdChxdWVyeS5jaGFyQ29kZUF0KCsraSkgJiAxMDIzKTtcblx0XHRcdFx0XHRieXRlc0FycmF5W2lkeCsrXSA9IChjaGFyQ29kZSA+PiAxOCkgfCAyNDA7XG5cdFx0XHRcdFx0Ynl0ZXNBcnJheVtpZHgrK10gPSAoKGNoYXJDb2RlID4+IDEyKSAmIDYzKSB8IDEyODtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRieXRlc0FycmF5W2lkeCsrXSA9IChjaGFyQ29kZSA+PiAxMikgfCAyMjQ7XG5cdFx0XHRcdH1cblx0XHRcdFx0Ynl0ZXNBcnJheVtpZHgrK10gPSAoKGNoYXJDb2RlID4+IDYpICYgNjMpIHwgMTI4O1xuXHRcdFx0fVxuXHRcdFx0Ynl0ZXNBcnJheVtpZHgrK10gPSAoY2hhckNvZGUgJiA2MykgfCAxMjg7XG5cdFx0fVxuXHR9XG5cdHJldHVybiBieXRlc0FycmF5O1xufVxuXG5mdW5jdGlvbiBjYWxjSGFzaChxdWVyeSwgd2luZG93VGtrKSB7XG5cdGNvbnN0IHRra1NwbGl0ZWQgPSB3aW5kb3dUa2suc3BsaXQoJy4nKTtcblx0Y29uc3QgdGtrSW5kZXggPSBOdW1iZXIodGtrU3BsaXRlZFswXSkgfHwgMDtcblx0Y29uc3QgdGtrS2V5ID0gTnVtYmVyKHRra1NwbGl0ZWRbMV0pIHx8IDA7XG5cblx0Y29uc3QgYnl0ZXNBcnJheSA9IHRyYW5zZm9ybVF1ZXJ5KHF1ZXJ5KTtcblxuXHRsZXQgZW5jb25kaW5nUm91bmQgPSB0a2tJbmRleDtcblx0Zm9yIChsZXQgaSA9IDA7IGkgPCBieXRlc0FycmF5Lmxlbmd0aDsgaSsrKSB7XG5cdFx0ZW5jb25kaW5nUm91bmQgKz0gYnl0ZXNBcnJheVtpXTtcblx0XHRlbmNvbmRpbmdSb3VuZCA9IHNoaWZ0TGVmdE9yUmlnaHRUaGVuU3VtT3JYb3IoZW5jb25kaW5nUm91bmQsICcrLWFeKzYnKTtcblx0fVxuXHRlbmNvbmRpbmdSb3VuZCA9IHNoaWZ0TGVmdE9yUmlnaHRUaGVuU3VtT3JYb3IoZW5jb25kaW5nUm91bmQsICcrLTNeK2IrLWYnKTtcblxuXHRlbmNvbmRpbmdSb3VuZCBePSB0a2tLZXk7XG5cdGlmIChlbmNvbmRpbmdSb3VuZCA8PSAwKSB7XG5cdFx0ZW5jb25kaW5nUm91bmQgPSAoZW5jb25kaW5nUm91bmQgJiAyMTQ3NDgzNjQ3KSArIDIxNDc0ODM2NDg7XG5cdH1cblxuXHRjb25zdCBub3JtYWxpemVkUmVzdWx0ID0gZW5jb25kaW5nUm91bmQgJSAxMDAwMDAwO1xuXHRyZXR1cm4gbm9ybWFsaXplZFJlc3VsdC50b1N0cmluZygpICsgJy4nICsgKG5vcm1hbGl6ZWRSZXN1bHQgXiB0a2tJbmRleCk7XG59XG5cbi8qIGVzbGludC1lbmFibGUgbm8tYml0d2lzZSAqL1xuLy9cbi8vIE9iZnVzY2F0ZWQgbG9naWM6IEVORFxuLy9cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFRva2VuKHF1ZXJ5KSB7XG5cdHJldHVybiBuZXcgUHJvbWlzZSgocmVzKSA9PiByZXMoeyB2YWx1ZTogY2FsY0hhc2gocXVlcnksIGdvb2dsZVRyYW5zbGF0ZVRLSykgfSkpO1xufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUNBLE1BQU1BLGtCQUFrQixHQUFHLGtCQUFrQjs7QUFFN0M7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsU0FBU0MsNEJBQTRCQSxDQUFDQyxHQUFHLEVBQUVDLFNBQVMsRUFBRTtFQUNyRCxLQUFLLElBQUlDLENBQUMsR0FBRyxDQUFDLEVBQUVBLENBQUMsR0FBR0QsU0FBUyxDQUFDRSxNQUFNLEdBQUcsQ0FBQyxFQUFFRCxDQUFDLElBQUksQ0FBQyxFQUFFO0lBQ2pELElBQUlFLEdBQUcsR0FBR0gsU0FBUyxDQUFDSSxNQUFNLENBQUNILENBQUMsR0FBRyxDQUFDLENBQUM7SUFDakMsSUFBSSxHQUFHLElBQUlFLEdBQUcsRUFBRTtNQUNmQSxHQUFHLEdBQUdBLEdBQUcsQ0FBQ0UsVUFBVSxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUU7SUFDN0IsQ0FBQyxNQUFNO01BQ05GLEdB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
