"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[9004],{34700:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Re});a(73952),a(97296);var r=a(96651),l=a(92232),i=a(12100),s=a(38064),n=a(92376),o=a(60328),A=a(78808),c=a(29724),u=a(96275),d=a(29764),E=a(75552);let _=function(e){return e.SHOW_ALPHABETICAL="SHOW_ALPHABETICAL",e.BOOK_ALPHABETICAL="BOOK_ALPHABETICAL",e.EPISODE_ALPHABETICAL="EPISODE_ALPHABETICAL",e.PLAYLIST_ALPHABETICAL="PLAYLIST_ALPHABETICAL",e.ALBUM_ALPHABETICAL="ALBUM_ALPHABETICAL",e.ADDED_AT="ADDED_AT",e.CREATOR_NAME="CREATOR_NAME",e.CREATOR_NAME_ALPHABETICAL="CREATOR_NAME_ALPHABETICAL",e.ALBUM_CREATOR_NAME="ALBUM_CREATOR_NAME",e.RECENTLY_PLAYED="RECENTLY_PLAYED",e.MOST_RELEVANT="MOST_RELEVANT",e.CUSTOM_ORDER="CUSTOM_ORDER",e}({});const g={"show-alphabetical":_.SHOW_ALPHABETICAL,"book-alphabetical":_.BOOK_ALPHABETICAL,"episode-alphabetical":_.EPISODE_ALPHABETICAL,"playlist-alphabetical":_.PLAYLIST_ALPHABETICAL,"album-alphabetical":_.ALBUM_ALPHABETICAL,"recently-added":_.ADDED_AT,"creator-name":_.CREATOR_NAME,"creator-name-alphabetical":_.CREATOR_NAME_ALPHABETICAL,"album-creator-name":_.ALBUM_CREATOR_NAME,"recently-played":_.RECENTLY_PLAYED,"playlist-most-relevant":_.MOST_RELEVANT,"playlist-custom-order":_.CUSTOM_ORDER},C={[_.RECENTLY_PLAYED]:{key:"recently-played",get value(){return i._s.get("collection.sort.recently-played")}},[_.ADDED_AT]:{key:"recently-added",get value(){return i._s.get("collection.sort.recently-added")}},[_.SHOW_ALPHABETICAL]:{key:"show-alphabetical",get value(){return i._s.get("collection.sort.alphabetical")}},[_.BOOK_ALPHABETICAL]:{key:"book-alphabetical",get value(){return i._s.get("collection.sort.alphabetical")}},[_.EPISODE_ALPHABETICAL]:{key:"episode-alphabetical",get value(){return i._s.get("collection.sort.alphabetical")}},[_.PLAYLIST_ALPHABETICAL]:{key:"playlist-alphabetical",get value(){return i._s.get("collection.sort.alphabetical")}},[_.ALBUM_CREATOR_NAME]:{key:"album-creator-name",get value(){return i._s.get("collection.sort.creator")}},[_.CREATOR_NAME]:{key:"creator-name",get value(){return i._s.get("collection.sort.creator")}},[_.CREATOR_NAME_ALPHABETICAL]:{key:"creator-name-alphabetical",get value(){return i._s.get("collection.sort.alphabetical")}},[_.ALBUM_ALPHABETICAL]:{key:"album-alphabetical",get value(){return i._s.get("collection.sort.alphabetical")}},[_.MOST_RELEVANT]:{key:"playlist-most-relevant",get value(){return i._s.get("collection.sort.most-relevant")}},[_.CUSTOM_ORDER]:{key:"playlist-custom-order",get value(){return i._s.get("collection.sort.custom-order")}}};_.ADDED_AT,_.ALBUM_ALPHABETICAL,_.CREATOR_NAME,_.ADDED_AT,u.Sw.ADDED_AT,u._8.DESC,_.ALBUM_ALPHABETICAL,u.Sw.NAME,u._8.ASC,_.CREATOR_NAME,u.Sw.ARTIST_NAME,u._8.ASC;_.ADDED_AT,_.CREATOR_NAME_ALPHABETICAL,_.ADDED_AT,u._S.ADDED_AT,u._8.DESC,_.CREATOR_NAME_ALPHABETICAL,u._S.NAME,u._8.ASC;_.ADDED_AT,_.SHOW_ALPHABETICAL,_.ADDED_AT,u.gX.ADDED_AT,u._8.DESC,_.SHOW_ALPHABETICAL,u.gX.NAME,u._8.ASC;_.ADDED_AT,_.BOOK_ALPHABETICAL,_.ADDED_AT,u.EH.ADDED_AT,_.BOOK_ALPHABETICAL,u.EH.NAME;_.MOST_RELEVANT,_.RECENTLY_PLAYED,_.ADDED_AT,_.PLAYLIST_ALPHABETICAL,_.CUSTOM_ORDER,_.ADDED_AT,E.kB.ADDED_AT,E._8.DESC,_.RECENTLY_PLAYED,E.kB.RECENTLY_PLAYED,E._8.ASC,_.PLAYLIST_ALPHABETICAL,E.kB.NAME,E._8.ASC,_.MOST_RELEVANT,E.kB.RELEVANCE,E._8.DESC,_.CUSTOM_ORDER;_.ADDED_AT,_.ADDED_AT,_.ADDED_AT,_.MOST_RELEVANT,_.ADDED_AT;var T=a(2488);const p=e=>e===_.ADDED_AT?u._8.DESC:u._8.ASC,L={option:_.ADDED_AT,order:u._8.DESC},D={[u._8.ASC]:u._8.DESC,[u._8.DESC]:u._8.ASC},h=(0,r.createContext)({setSortState:()=>{throw new Error("setSortState must be used within a LibrarySortProvider")},sortState:L}),m=r.memo((function({uri:e,children:t,defaultSortOption:a}){const r={option:a,order:p(a)};return(0,T.jsx)(c.M,{uri:e,defaultState:r,sortContext:h,children:t})}));var y=a(13932),P=a(10928),S=a(93948),x=a(52588),b=a(16928),O=a(62768),I=a(60484),R=a(37535),f=a(40636),N=(a(41260),a(556));const M=r.memo((function({sortOptions:e,onSort:t}){const{sortState:a,setSortState:l}=(0,r.useContext)(h),i=(0,r.useCallback)((e=>{const r=g[e];t?.(r),l(((e,t,a)=>t!==e?{option:e,order:p(e)}:{option:e,order:D[a]})(r,a.option,a.order))}),[t,l,a.option,a.order]),s=e.map((e=>C[e])),n=C[a.option];return(0,T.jsx)(N.W,{options:s,onSelect:i,selected:n,sortOrder:(o=a.order,o===u._8.ASC?d.g.ASC:d.g.DESC)});var o})),k="collection-searchBar-searchBar",B=r.memo((function({canSort:e,canFilter:t,filterPlaceholder:a,sortOptions:l}){const{spec:i,logger:s}=(0,f.gp)(I.createDesktopSearchBarEventFactory,{}),n=(0,r.useCallback)((()=>{s.logInteraction(i.filterFieldFactory().keyStrokeFilter())}),[s,i]),o=(0,r.useCallback)((()=>{s.logInteraction(i.filterFieldFactory().hitClearFilter())}),[s,i]);return(0,T.jsxs)("div",{className:k,children:[t?(0,T.jsx)(r.Suspense,{fallback:null,children:(0,T.jsx)(R.Q,{placeholder:a,onFilter:n,onClear:o})}):null,e?(0,T.jsx)(M,{sortOptions:l}):null]})}));var j=a(3844);const H={[u.YN.NAME]:o.Ut.TITLE,[u.YN.SHOW_NAME]:o.Ut.SHOW,[u.YN.ADDED_AT]:o.Ut.ADDED_AT},v=[_.ADDED_AT,_.CREATOR_NAME,_.EPISODE_ALPHABETICAL],w={[_.ADDED_AT]:u.YN.ADDED_AT,[_.CREATOR_NAME]:u.YN.SHOW_NAME,[_.EPISODE_ALPHABETICAL]:u.YN.NAME};const U=(e,t)=>{if(function(e){return v.includes(e)}(e))return{field:w[e],order:t}},Y=(e,t)=>{if(!v.includes(e))return;return(e=>{if(!e?.field)return;const t=H[e.field];if(!t)return;return o.K4[t].map((t=>e.order?`${t} ${e.order}`:t)).join(",")})(U(e,t))};var W=a(72144),F=a(26681),V=a(75480);const K="m9xwK71Ieq9cySIq4FAP",$="PkEMTu8sGqJeQWJ7HvEs",q="DbH2KkRA8yVWWpXGaNSW",z=({metadata:e,canSort:t,backgroundColor:a,isPlaying:r,isOnline:l,togglePlay:s})=>{const n=(0,j.u)(),{uri:o,name:A}=e,c=e.totalLength>0,u=(0,V.u)();return(0,T.jsx)(W.g,{backgroundColor:a,children:(0,T.jsxs)(F.i,{children:[c&&(0,T.jsx)(O.e,{onClick:()=>s(),isPlaying:r,size:u,uri:o,disabled:!l,ariaPlayLabel:i._s.get("playlist.a11y.play",A),ariaPauseLabel:i._s.get("playlist.a11y.pause",A)}),t&&(0,T.jsx)("div",{className:q,children:(0,T.jsx)(B,{canSort:n.getCapabilities().canSort,canFilter:n.getCapabilities().canFilter,filterPlaceholder:i._s.get("playlist.search_in_playlist"),sortOptions:v})})]})})};var G=a(31128),X=a(81604),J=a(53048),Q=a(49232),Z=a(7300),ee=a(71464),te=a(24910),ae=a(56316),re=a(97334),le=a(23652);const ie="p6DKqBcwmVtxmHt8ju43",se="_OxEpxzAgJiTENfolVUN";var ne=a(6812),oe=a(7296),Ae=a(17556),ce=a(41436),ue=a(5256),de=a(43619),Ee=a(57148),_e=a(94768),ge=a(52184),Ce=a(15040);const Te={small:64,standard:300,large:640,xlarge:1024},pe=r.memo((function({index:e,contextUri:t,episode:a,onRemove:l,usePlayContextItem:i}){const s=(0,r.useRef)(a.duration.milliseconds-a.timeLeft.milliseconds),n=a.uri,[o,c]=(0,r.useState)(0===a.timeLeft.milliseconds),{filter:u}=(0,r.useContext)(A.on),d=(0,ne.C)(),E=(0,J.oV)(),_=(0,oe.w)(),[g]=(0,j.X)(n,!0),C=(0,ge.E)(a.uri,a.isPlayable),p=(0,y.O)(),{isPlaying:L,isActive:D,togglePlay:h}=i({uri:n,index:e}),[m]=(0,ue.e)(1e4,(e=>e?.item?.uri===n));(0,r.useEffect)((()=>{L&&(s.current=m)}),[L,m]);const{isPlaying:P,isActive:S,togglePlay:b}=(0,x.I)({uri:n,pages:[{items:[{type:de.s.EPISODE,uri:n,uid:null,provider:null}]}]},{featureIdentifier:"your_library",referrerIdentifier:"your_library"});(0,r.useEffect)((()=>{g||l()}),[g,l]),(0,r.useEffect)((()=>{L||a.duration.milliseconds<=s.current&&c(!0)}),[L,a.duration.milliseconds]);const O=(0,r.useCallback)((e=>{e||(s.current=0),c(e)}),[]),I=e=>{if(e.target!==e.currentTarget)return;let r=`${a.name}`;a.show&&(r+=` â€¢ ${a.show.name}`),d(e,{itemUris:[n],dragLabelText:r,contextUri:t})},R=(0,r.useCallback)((()=>{_({type:"click",targetUri:n,intent:"navigate"})}),[n,_]),f=(0,r.useCallback)((()=>{p?(_({type:"click",intent:L?"pause":"play"}),h()):(_({type:"click",intent:P?"pause":"play"}),b())}),[p,L,P,_,h,b]),N=(0,r.useCallback)((e=>(0,T.jsx)(_e.S,{searchWords:[u],textToHighlight:e})),[u]),M=a.podcastSubscription?.isPaywalled??!1,k=a.podcastSubscription?.isUserSubscribed??!1,{badges:B}=(0,Ee.C)({isExplicit:a.isExplicit,isMOGEFRestricted:a.is19PlusOnly,isPaywalled:M});let H=!1;(D||!p&&S)&&(H=!0);const v=(0,Q.IP)(Ce.iK$,{loadingValue:!1});return g?(0,T.jsxs)(X.oL,{value:"row",index:e,children:[(0,T.jsx)("hr",{className:ie,"aria-hidden":!0}),(0,T.jsx)(Z.U,{menu:(0,T.jsx)(ee.y,{uri:n,contextUri:t,showUri:a.show?.uri,isPlayed:o,onMarkAsPlayed:O}),children:v?(0,T.jsx)(ae.E,{requestId:a.requestId,index:e,uri:n,uid:n,size:E,images:a.images.map((e=>({url:e.url,width:e.width||(e.label?Te[e.label]:null),height:e.height||(e.label?Te[e.label]:null)}))),isPaywalled:M,isUserSubscribed:k,name:a.name,highlightText:N,showName:a.show?.name,showUri:a.show?.uri,description:a.description,isPlayable:C,fullyPlayed:o,durationMs:a.duration.milliseconds,releaseDate:a.release.date||"",resumePositionMs:s.current,handleDragStart:I,handlePlaybackClick:f,handleClick:R,isCurrentlyPlaying:H,isPlaying:p?L:P,position:H?m:void 0,episodeSharingInfo:null,onMarkAsPlayed:O,badges:(0,T.jsxs)(T.Fragment,{children:[B.explicit&&(0,T.jsx)(Ae.C,{}),B.paid&&(0,T.jsx)(le.a,{}),B.nineteen&&(0,T.jsx)(ce.o,{size:16})]}),playButtonWrapper:e=>(0,T.jsx)(re.i,{enabled:M&&!k,showUri:a.show?.uri||void 0,children:e})}):(0,T.jsx)(te.k,{requestId:a.requestId,index:e,uri:n,uid:n,size:E,images:a.images.map((e=>({url:e.url,width:e.width||(e.label?Te[e.label]:null),height:e.height||(e.label?Te[e.label]:null)}))),isPaywalled:M,isUserSubscribed:k,name:a.name,highlightText:N,showName:a.show?.name,showUri:a.show?.uri,description:a.description,isPlayable:C,fullyPlayed:o,durationMs:a.duration.milliseconds,releaseDate:a.release.date||"",resumePositionMs:s.current,handleDragStart:I,handlePlaybackClick:f,handleClick:R,isCurrentlyPlaying:H,isPlaying:p?L:P,position:H?m:void 0,episodeSharingInfo:null,onMarkAsPlayed:O,badges:(0,T.jsxs)(T.Fragment,{children:[B.explicit&&(0,T.jsx)(Ae.C,{}),B.paid&&(0,T.jsx)(le.a,{}),B.nineteen&&(0,T.jsx)(ce.o,{size:16})]}),playButtonWrapper:e=>(0,T.jsx)(re.i,{enabled:M&&!k,showUri:a.show?.uri||void 0,children:e})})})]}):null})),Le=r.memo((function({contextUri:e,usePlayContextItem:t}){const a=(0,r.useContext)(S.g),{sortState:l}=(0,r.useContext)(h),[i,s]=(0,r.useState)({totalLength:0,unfilteredTotalLength:0,offset:0,items:[],limit:50}),n=(0,r.useRef)(!1),o=(0,r.useRef)(0),c=(0,r.useRef)(0),{filter:u}=(0,r.useContext)(A.on),d=(0,r.useCallback)((()=>{c.current++}),[]),{ref:E,breakpoint:_}=(0,J.CA)({[J.u_.MEDIUM]:0,[J.u_.LARGE]:600}),g=(0,r.useCallback)(((e=!1)=>{const t=o.current;null!==t&&(n.current||(n.current=!0,(async e=>{const t=await a.getEpisodes({offset:e-c.current,limit:50,sort:U(l.option,l.order),filter:u});return c.current=0,t})(Number(t)).then((a=>{s((r=>{const l=Number(a.offset)+a.items.length,i=e?[]:[...r.items];return i.splice(Number(t),a.items.length,...a.items),o.current=l<a.totalLength?l:null,{...a,items:i}})),n.current=!1}))))}),[u,a,l]);return(0,r.useEffect)((()=>{o.current=0,g(!0)}),[g]),(0,T.jsx)(J.yM.Provider,{value:_,children:(0,T.jsx)(X.oL,{value:"track-list",children:(0,T.jsx)("div",{ref:E,children:(0,T.jsx)(G.A,{onReachBottom:g,triggerOnInitialLoad:!0,children:i.items.map(((a,r)=>(0,T.jsx)("div",{className:se,children:(0,T.jsx)(pe,{index:r,episode:a,contextUri:e,onRemove:d,usePlayContextItem:t},`${a.uri}/${r}`)},`${r}${a.uri}`)))})})})})}));var De=a(8004),he=a(1044),me=a(62688),ye=a(73372),Pe=a(24392),Se=a(47668);const xe=({metadata:e,backgroundColor:t,isPlaying:a,isOnline:l,togglePlay:s})=>{const{uri:n,name:o,images:A,totalLength:c,owner:u}=e,d=(0,r.useMemo)((()=>({id:u.username,uri:u.uri,name:u.username,displayName:u.displayName||void 0,images:u.images||[]})),[u]);return(0,T.jsxs)(he.I1,{backgroundColor:t,children:[(0,T.jsxs)(me.E,{children:[(0,T.jsx)(O.e,{size:"medium",onClick:()=>s(),isPlaying:a,uri:n,disabled:!l,ariaPlayLabel:i._s.get("playlist.a11y.play",o),ariaPauseLabel:i._s.get("playlist.a11y.pause",o)}),(0,T.jsx)(ye.e,{text:o})]}),(0,T.jsx)(he.gR,{images:A,name:o,shape:Pe.O.ROUNDED_CORNERS,renderImage:()=>(0,T.jsx)(Se.G,{})}),(0,T.jsxs)(he.a8,{children:[(0,T.jsx)(De.a,{variant:"bodySmallBold",children:i._s.get("playlist")}),(0,T.jsx)(he.on,{canEdit:!1,onClick:()=>{},children:o}),(0,T.jsx)(he.E1,{creators:[d],totalItems:c,hasEpisodes:!0})]})]})};var be=a(12980),Oe=a(92136);const Ie=({metadata:e,canSort:t})=>{const a=(0,P.aR)("#006450"),n=(0,y.O)(),{sortState:c}=(0,r.useContext)(h),{filter:u}=(0,r.useContext)(A.on),{isPlaying:d,togglePlay:E,usePlayContextItem:_}=(0,x.I)({uri:e.uri,metadata:{[b.WE.SORTING_CRITERIA]:Y(c.option,c.order),[b.WE.FILTERING_PREDICATE]:(0,o.C8)(u)}},{featureIdentifier:"your_library",referrerIdentifier:"your_library"},{shuffle:!1,repeat:b.Su.REPEAT_NONE});return(0,T.jsxs)("section",{className:$,"data-testid":"your-episodes-page",children:[(0,T.jsx)(be.Q,{children:i._s.get("sidebar.your_episodes")}),(0,T.jsx)(xe,{metadata:e,backgroundColor:a,isPlaying:d,isOnline:n,togglePlay:E}),(0,T.jsxs)("div",{className:K,children:[(0,T.jsx)(z,{metadata:e,backgroundColor:a,isPlaying:d,isOnline:n,togglePlay:E,canSort:t}),(0,T.jsx)("div",{className:"contentSpacing",children:e.totalLength>0?(0,T.jsx)(Le,{contextUri:e.uri,usePlayContextItem:_}):(0,T.jsx)(s.o,{message:i._s.get("collection.empty-page.episodes-subtitle"),title:i._s.get("collection.empty-page.episodes-title"),linkTo:"/genre/podcasts-web",linkTitle:i._s.get("collection.empty-page.shows-cta"),renderInline:!0,children:(0,T.jsx)(l.u,{"aria-hidden":"true"})})})]})]})},Re=(0,r.memo)((function(){const e=(0,r.useContext)(S.g).getCapabilities(),t=(0,Oe.I)();return t?(0,T.jsx)(m,{uri:t.uri,defaultSortOption:_.ADDED_AT,children:(0,T.jsx)(A.WC,{uri:t.uri,children:(0,T.jsx)(Ie,{metadata:t,canSort:e.canSortTracksAndEpisodes&&t.totalLength>0})})}):(0,T.jsx)(n.K,{hasError:!1,errorMessage:i._s.get("error.not_found.title.page"),loadOffline:e.canModifyOffline})}))}}]);
//# sourceMappingURL=xpui-routes-collection-episodes.js.map