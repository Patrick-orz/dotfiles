"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[6556],{7552:(e,i,s)=>{s.d(i,{E:()=>L});var t=s(67544),r=s(96651),l=s(12100),a=(s(73952),s(97296),s(97768),s(39568),s(41260),s(99400),s(10124)),n=s.n(a),c=s(33220),d=s(8004),o=s(32040),u=s(71912),m=s(87832),x=s(18648),h=s(81040),j=s(62572);var p=s(44488),y=s(90484);const g="main-topBar-contentArea",f="queue-tabBar-headerIsCentered",b="queue-tabBar-headerItem",v="queue-tabBar-moreButton",k="queue-tabBar-moreButtonActive",E="yxf_6IsQEmHjijEBUMTP",I="queue-tabBar-active",w="queue-tabBar-headerItemLink",C="queue-tabBar-header",N="queue-tabBar-chevron";var R=s(2488);const _=({items:e,activeItemId:i})=>(0,R.jsx)(p.i,{children:e.map((e=>e.disabled?(0,R.jsx)(y.I,{disabled:!0,role:"menuitemradio",className:E,onClick:e.handleClick,children:e.title},e.uri):(0,R.jsx)(y.I,{role:"menuitemradio",to:e.to,end:!0,"aria-checked":e.itemId===i,className:({isActive:e})=>n()(E,{[I]:e}),onClick:e.handleClick,children:e.title},e.uri)))});var A=s(76872);const T=(0,r.memo)((function({isCentered:e,links:i,landmarkLabel:s,className:t}){const a=(0,r.useRef)(null),[p,y]=(0,r.useState)([]),[E,T]=(0,r.useState)(0),[S,U]=(0,r.useState)([]),M=function(){const[e,i]=(0,r.useState)(window.innerWidth),{scrollNodeChildRef:s}=(0,r.useContext)(h.Ib),t=(0,x.yK)((e=>{e?.width&&i(e.width)}),250);return(0,j.m)({refOrElement:s,observeOnly:"width",onResize:t}),e}()??1/0,{pathname:O}=(0,c.IT)(),P=i.find((e=>e.to===O));return(0,r.useEffect)((()=>{a.current&&T(a.current.clientWidth)}),[M]),(0,r.useEffect)((()=>{if(!a.current)return;const e=Array.from(a.current.children).map((e=>e.clientWidth));y(e)}),[i]),(0,r.useEffect)((()=>{if(!a.current)return;if(p.slice(0,-1).reduce(((e,i)=>e+i),0)<=E)return void U([]);const e=p.reduce(((e,i)=>e>i?e:i),0),i=[];let s=e;p.forEach(((e,t)=>{E>=s+e?s+=e:i.push(t)})),U(i)}),[E,p]),(0,R.jsx)("nav",{className:n()(t,g),"aria-label":s,children:(0,R.jsxs)("ul",{className:e?f:C,ref:a,children:[i.filter(((e,i)=>!S.includes(i))).map((e=>{const i=e?.render??(e=>e);return(0,R.jsx)(r.Fragment,{children:i((0,R.jsx)("li",{className:b,children:e.disabled?(0,R.jsx)("div",{className:w,children:(0,R.jsx)(d.a,{variant:"bodySmallBold",children:e.title})}):(0,R.jsx)(A.A,{end:!0,className:({isActive:e})=>n()(w,{[I]:e}),to:e.to,onClick:e.handleClick,children:(0,R.jsx)(d.a,{variant:"bodySmallBold",children:e.title})})}))},e.to)})),S.length||0===p.length?(0,R.jsx)("li",{className:b,children:(0,R.jsx)(m.SM,{renderInline:!0,menu:(0,R.jsx)(_,{items:i.filter(((e,i)=>S.includes(i))),activeItemId:P?.itemId}),children:(e,i,s)=>(0,R.jsxs)("button",{className:n()(v,{[k]:P}),type:"button",onClick:i,ref:s,children:[(0,R.jsx)(d.a,{variant:"bodySmallBold",children:P?P.title:l._s.get("more")}),e?(0,R.jsx)(o.s,{size:"small",className:N,"aria-hidden":"true"}):(0,R.jsx)(u.a,{size:"small",className:N,"aria-hidden":"true"})]})})}):null]})})}));var S=s(43052),U=s(7948),M=s(59604);const O="queue-tabBar-nav",P=()=>{const e=(0,M.k)(),i=(0,r.useCallback)((e=>(0,R.jsx)(U.i,{placement:"bottomEnd",arrow:"topStart",title:l._s.get("pick-and-shuffle.upsell.title.queue"),children:e})),[]),s=(0,r.useMemo)((()=>[{title:l._s.get("playback-control.queue"),itemId:"queue",to:"/queue",uri:"spotify:app:queue",render:i,disabled:e},{title:l._s.get("view.recently-played"),itemId:"history",to:"/history",uri:"spotify:app:history"}]),[e,i]);return(0,R.jsx)(S.J,{children:(0,R.jsx)(T,{className:O,links:s})})},L=({children:e})=>{const i=(0,t.E5)();return(0,R.jsxs)("section",{className:"contentSpacing",children:[e,i&&(0,R.jsx)(P,{})]})}},61808:(e,i,s)=>{s.r(i),s.d(i,{default:()=>F});var t=s(67544),r=s(8004),l=s(12100),a=s(96788),n=s(96651),c=s(33912),d=s(39188),o=s(81604),u=s(16928),m=s(43619),x=s(52276),h=s(40068),j=s(14788),p=s(7300),y=s(71464),g=s(40700),f=s(56684),b=s(24300),v=s(94496),k=s(45060),E=s(70480),I=s(17556),w=s(41436),C=s(50060),N=s(52588),R=s(57148),_=s(1984),A=s(52184),T=s(42300),S=s(2488);const U=n.memo((function({uri:e,name:i,duration_ms:s,index:t,imgUrl:r,artists:a,album:n,isExplicit:c,isMOGEFRestricted:d,contextItem:u,type:x}){const{isActive:h,isPlaying:U,triggerPlay:M,togglePlay:O}=(0,N.I)({uri:e,pages:[{items:[{...u}]}]},{featureIdentifier:"history"}),P=x===m.s.TRACK,L=x===m.s.EPISODE,B=x===m.s.CHAPTER,D=(0,C._)(e),F=(0,A.E)(e),{badges:G,hasBadges:K}=(0,R.C)({downloadAvailability:D,isExplicit:c,isMOGEFRestricted:d}),q=a?.map((e=>e.name)).join(l._s.getSeparator())||"";let Q;return L?Q=(0,S.jsx)(y.y,{uri:e,contextUri:e,showUri:n.uri}):B?Q=(0,S.jsx)(_.h,{uri:e}):P&&(0,j.UF)(e)?Q=(0,S.jsx)(g.Y,{uri:e,contextUri:e}):P&&(Q=(0,S.jsx)(f.k,{uri:e,contextUri:e,albumUri:n.uri,artists:a})),(0,S.jsx)(o.oL,{value:"row",index:t,children:(0,S.jsx)(p.U,{menu:Q,children:(0,S.jsxs)(k.i,{uri:e,contextUri:e,index:t,ariaRowIndex:t,onTriggerPlay:()=>{M()},isActive:h,isPlayable:F,ageRestricted:d,dragMetadata:{name:i,createdBy:q},children:[(0,S.jsxs)(b.I9,{ariaColIndex:0,children:[(0,S.jsx)(b.gh,{uri:e,src:r,isPlaying:U,isActive:h,isLocked:!1,onClick:()=>{O()},isEpisode:(0,j.QB)(e),playAriaLabel:l._s.get("tracklist.a11y.play",i,q)}),(0,S.jsxs)(b.yY,{children:[(0,S.jsx)(b.Ml,{titleText:i,children:i}),K&&(0,S.jsxs)(b.MV,{children:[G.download&&(0,S.jsx)(E.g,{}),G.explicit&&(0,S.jsx)(I.C,{}),G.nineteen&&(0,S.jsx)(w.o,{className:v.c.nineteen,size:16})]}),(0,S.jsx)(b.aU,{children:(0,j._Z)(e)?(0,S.jsx)(b.ui,{artists:a}):a[0]?.name??""})]})]}),(0,S.jsx)(b.sv,{ariaColIndex:2,children:(0,S.jsx)(b.MZ,{nonInteractive:(0,j.UF)(e),uri:n.uri,name:n.name,creatorUri:a?.[0]?.uri,children:n.name})}),(0,S.jsxs)(b.sP,{ariaColIndex:1,children:[!B&&(0,S.jsx)(T.K,{uri:e,type:x}),(0,S.jsx)(b.U$,{duration:s}),(0,S.jsx)(b.op,{menu:Q,label:l._s.get("more.label.track",i,q)})]})]})})})}),((e,i)=>e.uri===i.uri)),M=n.memo((function({items:e}){const i=(0,n.useCallback)(((e,i)=>{const s=(0,h.C)(e.images??[],{desiredSize:40});return(0,u.gB)(e)?(0,S.jsx)(U,{index:i,uri:e.isLocal?e.uri:(0,d.a)(e),name:e.name,duration_ms:e.duration.milliseconds,imgUrl:s?.url||"",album:e.album,artists:e.artists,isExplicit:e.isExplicit??!1,isMOGEFRestricted:e.is19PlusOnly??!1,contextItem:e,type:m.s.TRACK},i+e.uri):(0,u.sN)(e)?(0,S.jsx)(U,{index:i,uri:e.uri,name:e.name,duration_ms:e.duration.milliseconds,imgUrl:s?.url||"",album:e.show,artists:[],isExplicit:!1,isMOGEFRestricted:!1,contextItem:e,type:m.s.EPISODE},i+e.uri):(0,u.Q9)(e)?(0,S.jsx)(U,{index:i,uri:e.uri,name:e.name,duration_ms:e.duration.milliseconds,imgUrl:s?.url||"",album:e.book,artists:[],isExplicit:!1,isMOGEFRestricted:!1,contextItem:e,type:m.s.CHAPTER},i+e.uri):((0,u.UZ)(e)||(0,u.u_)(e)||(0,x.I)(e),(0,S.jsx)(c.gl,{height:`${c.k$}px`}))}),[]),s=(0,n.useMemo)((()=>[c.yw.TITLE_AND_ARTIST,c.yw.ALBUM_OR_PODCAST,c.yw.DURATION]),[]),t=(0,n.useCallback)((e=>({uri:e.uri})),[]);return(0,S.jsx)(S.Fragment,{children:(0,S.jsx)(o.oL,{value:"play-history-tracklist",children:(0,S.jsx)(c.aE,{ariaLabel:"play-history",hasHeaderRow:!0,columns:s,renderRow:i,resolveItem:t,tracks:e,nrTracks:e.length,rowPlaceholder:c.gl,limit:50,columnPersistenceKey:"play-history-tracklist"})})})})),O="dt3fysZYdQ6hhWfpmjAu",P="n6LsTkKvpO88xeRyRTdw",L=()=>{const{isLoading:e,data:i}=(0,t.ET)();return e?null:i?.items.length?(0,S.jsxs)("div",{className:O,children:[(0,S.jsx)(r.a,{as:"h1",variant:"titleSmall",semanticColor:"textBase",className:P,children:l._s.get("view.recently-played")}),(0,S.jsx)(M,{items:i.items})]}):(0,S.jsx)(a.M,{})};var B=s(7552),D=s(46736);const F=()=>(0,t.E5)()?(0,S.jsx)(B.E,{children:(0,S.jsx)(L,{})}):(0,S.jsx)(D.InstrumentedRedirect,{to:"/"})},39188:(e,i,s)=>{s.d(i,{a:()=>t});const t=e=>e?.linked_from?.uri||e.uri}}]);
//# sourceMappingURL=xpui-routes-play-history-page.js.map