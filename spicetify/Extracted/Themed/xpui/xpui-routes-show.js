"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[7692],{30176:(e,t,a)=>{a.d(t,{m:()=>l});var i=a(96651),s=a(3844),n=a(50176),o=a(7296),r=a(2488);const l=i.memo((function({uri:e,size:t=n.o.md,className:a,onClick:l,canDownload:c,condensedAll:d}){const[u,m]=(0,s.X)(e),p=(0,o.w)(),g=(0,i.useCallback)((()=>{p({targetUri:e,intent:u?"unsave":"save",type:"click"}),m(!u)}),[p,e,u,m]);return(0,r.jsx)(n.W,{className:a,isFollowing:u,onFollow:g,onClick:l,uri:e,size:t,canDownload:c,condensedAll:d})}))},40132:(e,t,a)=>{a.d(t,{_:()=>_,e:()=>B});var i=a(96651),s=a(4564),n=a(49232),o=a(1804),r=a(14788),l=a(33508),c=a(71916),d=a(7300),u=a(71464),m=a(24910),p=a(56316),g=a(97334),h=a(94231),x=a(23652),y=a(6812),b=a(7296),j=a(92280),k=a(39244),f=a(17556),v=a(41436),P=a(81604),C=a(53048),S=a(5256),w=a(40636),I=a(84340),A=a(57148),N=a(15700),R=a(15040),E=a(2488);function _(e){return{uri:e.uri,name:e.name,trailer:e.trailer,showTypes:e.showTypes}}const U=e=>`activation-trigger-mme-${e}`,B=i.memo((function({index:e=-1,showMetadata:t,episode:a,usePlayContextItem:B,status:F,variant:L}){const D=(0,N.m)(),T=a.playedState.playPositionMilliseconds,M=a.uri,O=(0,i.useRef)(null),[z,W]=(0,i.useState)(a.playedState.state===I.QF.Completed),G=(0,y.C)(),V=(0,j.A)(),Y=(0,C.oV)(),K=(0,b.w)(),q=(0,s.OY)(),{UBIFragment:H,spec:Q,logger:X}=(0,w.gp)(o.createDesktopEpisodeBlockEventFactory,{data:{uri:M,reason:a.requestId||"",position:e}}),J=(0,w.K2)(Q),{isActive:Z,isPlaying:$,togglePlay:ee}=B({uri:M}),[te]=(0,S.e)(1e4,(e=>e?.item?.uri===M));(0,i.useEffect)((()=>{$&&(O.current=te)}),[$,te]),(0,i.useEffect)((()=>{!$&&O.current&&a.duration.milliseconds<=O.current&&W(!0)}),[$,a.duration.milliseconds]);const ae=(0,i.useCallback)((e=>{e||(O.current=0),W(e)}),[]),ie=e=>{if(e.target!==e.currentTarget)return;const i=`${a.name} • ${t.name}`;G(e,{itemUris:[M],dragLabelText:i,contextUri:t.uri})},se=_(t),ne=(0,k.e)({...a,coverArt:{sources:a.coverArt}},se),oe=(0,i.useCallback)((()=>{if(a.episodeType===I.sF.Episode&&D)h.F.set((()=>({triggerId:U(a.uri),triggerAction:null})));else if(V)ne();else{let e;e=$?Q.playButtonFactory().hitPause({itemToBePaused:M}):Z?Q.playButtonFactory().hitResume({itemToBeResumed:M}):Q.playButtonFactory().hitPlay({itemToBePlayed:M});const t=X.logInteraction(e);K({targetUri:M,intent:$?"pause":"play",type:"click"}),ee({loggingParams:t})}}),[Z,ne,K,ee,M,$,V,a,D,X,Q]),re=(0,i.useCallback)((()=>{X.logInteraction(Q.hitUiNavigate({destination:M})),K({type:"click",targetUri:M,intent:"navigate"})}),[M,K,X,Q]),le=a.podcastSubscription?.isPaywalled??!1,ce=a.podcastSubscription?.isUserSubscribed??!1,de=le&&!ce,ue=le&&V,{badges:me}=(0,A.C)({contentRating:a.contentRating?.label,isPaywalled:le}),pe=(0,i.useCallback)((()=>q((0,l.AP)(t.uri))),[t.uri,q]),ge=(0,i.useCallback)((e=>{let i=e;return(de||ue)&&(i=(0,E.jsx)(g.i,{enabled:!0,showUri:t.uri,children:i})),!a.playability.playable&&me.nineteen&&(i=(0,E.jsx)("div",{onClick:e=>{e.stopPropagation(),pe()},children:e})),i=(0,E.jsx)(c.s,{id:U(M),targetURI:(0,r.nX)(M),children:i}),i}),[M,de,ue,t.uri,me.nineteen,a.playability.playable,pe]),he=(0,n.IP)(R.iK$,{loadingValue:!1});return(0,E.jsx)(H,{spec:Q,children:(0,E.jsx)(P.oL,{value:"row",index:e,children:(0,E.jsx)(d.U,{onShow:()=>{X.logInteraction(Q.secondaryHitUiReveal())},menu:(0,E.jsx)(u.y,{uri:M,showUri:t.uri,sharingInfo:a.sharingInfo,isPlayed:z,onMarkAsPlayed:ae}),children:he?(0,E.jsx)(p.E,{ref:J,requestId:a.requestId,index:e,uri:M,size:Y,images:a.coverArt||[],name:a.name,showName:t.name,description:a.description,isPlayable:a.playability.playable||de,fullyPlayed:z,durationMs:a.duration.milliseconds,releaseDate:a.releaseDate?.isoString||"",resumePositionMs:O.current??T,handleDragStart:ie,handlePlaybackClick:oe,handleClick:re,isCurrentlyPlaying:Z,isPaywalled:le,isUserSubscribed:ce,isPlaying:$,position:$?te:void 0,episodeSharingInfo:a.sharingInfo,onMarkAsPlayed:ae,contentInformation:a.contentInformation,showUri:t.uri,mediaTypes:a.mediaTypes??void 0,badges:(0,E.jsxs)(E.Fragment,{children:[me.explicit&&(0,E.jsx)(f.C,{}),me.paid&&(0,E.jsx)(x.a,{}),me.nineteen&&(0,E.jsx)(v.o,{size:16})]}),playButtonWrapper:ge,onMoreButtonClick:()=>{X.logInteraction(Q.moreButtonFactory().hitUiReveal())},status:F,variant:L}):(0,E.jsx)(m.k,{ref:J,requestId:a.requestId,index:e,uri:M,size:Y,images:a.coverArt||[],name:a.name,showName:t.name,description:a.description,isPlayable:a.playability.playable||de,fullyPlayed:z,durationMs:a.duration.milliseconds,releaseDate:a.releaseDate?.isoString||"",resumePositionMs:O.current??T,handleDragStart:ie,handlePlaybackClick:oe,handleClick:re,isCurrentlyPlaying:Z,isPaywalled:le,isUserSubscribed:ce,isPlaying:$,position:$?te:void 0,episodeSharingInfo:a.sharingInfo,onMarkAsPlayed:ae,contentInformation:a.contentInformation,badges:(0,E.jsxs)(E.Fragment,{children:[me.explicit&&(0,E.jsx)(f.C,{}),me.paid&&(0,E.jsx)(x.a,{}),me.nineteen&&(0,E.jsx)(v.o,{size:16})]}),playButtonWrapper:ge,onMoreButtonClick:()=>{X.logInteraction(Q.moreButtonFactory().hitUiReveal())},showUri:t.uri,mediaTypes:a.mediaTypes??void 0,status:F,variant:L})})})})}))},23052:(e,t,a)=>{a.d(t,{k:()=>o});a(41260);var i=a(90464);const s="rTMkDBDp47Eo12ZEQv4U";var n=a(2488);const o=({copyrights:e,courtesyLine:t})=>{const a=(e||[]).map(((e,t)=>{const a=e.text.replace(/^(\(C\)\s+)/,"").replace(/^(\(P\)\s+)/,"").replace(/^(©\s+)/,"").replace(/^(℗\s+)/,"");let s;return s="C"===e.type?"©":"P"===e.type?"℗":`(${e.type})`,(0,n.jsx)(i.F,{as:"p",variant:"finale",dir:"auto",children:`${s} ${a}`},t)}));return t&&a.unshift((0,n.jsx)(i.F,{as:"p",variant:"finale",dir:"auto",children:t},a.length)),(0,n.jsx)("div",{className:s,children:a})}},32300:(e,t,a)=>{a.r(t),a.d(t,{default:()=>yi});var i=a(96651),s=a(33220),n=a(48364),o=a(31024),r=a(14788),l=a(12100),c=a(12980),d=a(92376),u=a(10124),m=a.n(u),p=a(4564),g=a(8004),h=a(49232),x=a(37628),y=a(27360),b=a(48856),j=a(31720),k=a(1984),f=a(48256),v=a(90464),P=a(35332),C=a(24392),S=a(44616),w=a(17556),I=a(41436),A=a(35300),N=a(83324),R=a(43619),E=a(57148),_=a(34328);const U="Bns6t3CfzQaCA4DLRzPQ",B="zGFcpmwFVhJxRDXUXoXA",F="_FLyhB96W9W0msGYNWUl",L="Si5iVyGLDY7mGWH_U2wA",D="HLBtD6mJyIB9EeOzDtXE",T="DRO0ur1WXqpK9BelywtE",M="vtlBEOtYFwv1cxC32ccc",O="Pq_DZj9ECxwTsK8pBxe0",z="bu7LVUNyDPF_FcrKMv74",W="bYP2npsc_CeChpMGcr6g",G="Ux7aVnDYlwojS4AmkSLg";var V=a(2488);let Y=function(e){return e.SMALL="small",e.LARGE="large",e}({});const K=({images:e,title:t,contentRating:a,duration:i,moreButton:s,onClick:n,onContextMenu:o,onTouchStart:r,onTouchEnd:l,isPlaying:c,isActive:d,size:u,className:p,label:g,isPlayable:h=!0})=>{const x=u===Y.LARGE?"medium":"small",{badges:y}=(0,E.C)({contentRating:a});return(0,V.jsxs)("div",{"data-testid":"trailer-component",className:m()(U,p,{[B]:d}),onContextMenu:o,onTouchStart:r,onTouchEnd:l,children:[(0,V.jsxs)("div",{className:L,children:[(0,V.jsxs)("div",{className:O,children:[(0,V.jsx)(C.i,{type:R.s.EPISODE,title:t,className:m()(M,{[G]:u===Y.SMALL,[W]:u===Y.LARGE}),size:S.fm.SIZE_56,images:e,shape:C.O.ROUNDED_CORNERS}),(0,V.jsx)("div",{className:z,children:(0,V.jsx)(_.O,{"data-testid":"trailer-play-button",version:P.eb.transparent,size:x,isPlaying:c,onClick:n,disabled:!h})})]}),(0,V.jsxs)("div",{children:[(0,V.jsx)("div",{className:D,children:(0,V.jsx)(v.F,{dir:"auto",className:F,variant:"balladBold",children:t})}),(0,V.jsxs)("div",{className:T,children:[(0,V.jsx)(A.E,{text:g}),y.explicit&&(0,V.jsx)(w.C,{}),y.nineteen&&(0,V.jsx)(I.o,{}),(0,V.jsx)(v.F,{dir:"auto",variant:"mesto",children:(0,V.jsx)(N._s,{durationMs:i})})]})]})]}),s]})};var q=a(7296),H=a(72232),Q=a(23052),X=a(73552),J=a(56744);const Z="_yl4tOZxcpoUt28k6B8I",$="lcJflizNrSwDM9yPNk6h",ee="ret7iHkCxcJvsZU14oPY",te=({rating:e,className:t,onClick:a})=>{if(!e)return null;const i=Boolean(e.rating?.rating);return(0,V.jsxs)("button",{className:m()(Z,t),onClick:a,children:[(0,V.jsx)(v.F,{dir:"auto",variant:"mestoBold",children:e.averageRating?.showAverage?l._s.formatNumber(e.averageRating.average,{maximumFractionDigits:1}):l._s.get("web-player.audiobooks.noRating")}),i?(0,V.jsx)(X.G,{iconSize:16,className:m()($)}):(0,V.jsx)(J.T,{iconSize:16,className:m()($)}),e.averageRating?.showAverage&&(0,V.jsxs)(v.F,{variant:"mesto",className:m()(ee),children:["(",l._s.formatNumberCompact(Number(e.averageRating.totalRatings)),")"]})]})};var ae=a(53048),ie=a(80660),se=a(52588),ne=a(16928),oe=a(62692),re=a(40636),le=a(24032);const ce=({htmlDescription:e,narrators:t,spec:a})=>{const s=(0,q.w)(),n=(0,re.Mk)(),o=(0,i.useCallback)((e=>{s({intent:"expand-description",type:"click"});const t=a.seeMoreButtonFactory();n.logInteraction(e?t.hitUiReveal():t.hitUiHide())}),[n,s,a]);return(0,V.jsxs)(V.Fragment,{children:[t.length?(0,V.jsx)(g.a,{as:"p",variant:"bodyMedium",children:l._s.get("web-player.audiobooks.narratedByX",t.join(l._s.getSeparator()))}):null,e&&(0,V.jsx)(le.Y,{maxLines:4,content:e,htmlContent:e,onExpanded:o})]})};var de=a(10660),ue=a(30176),me=a(87832),pe=a(65076);const ge="8px",he="mmCZ5VczybT9VqKB5wFU",xe="At_ihDspJfh1yw3Cn2cq",ye="u3LLJx1KnMchfNCzi6k5",be="Yqz1Nv6wj1n3HmXL_qji",je="qRqn3JrWLPbGW9k2a63n",ke="HAah1_lK_dHgyyE71I8Z",fe="eiC4nh70nb5UHZBYMgNA",ve="hl2eRCaYcZ1Jm1bgNYlU",Pe="eYtmwXEvi1UdCevg8WoK",Ce="QOp2aYTYmZHZ6DFFHuYE",Se=({explicit:e,durationMs:t,publishDate:a})=>(0,V.jsxs)("div",{className:Pe,children:[e&&(0,V.jsx)(w.C,{fullText:!0}),(0,V.jsxs)("div",{children:[a&&(0,V.jsx)(g.a,{variant:"bodySmall",className:Ce,children:l._s.formatDate(a)}),(0,V.jsx)(g.a,{variant:"bodySmall",children:(0,V.jsx)(N._s,{durationMs:t})})]})]});var we=a(3844),Ie=a(8968),Ae=a(62768),Ne=a(18648),Re=a(8340),Ee=a(89183),_e=a(92280),Ue=a(92292);const Be="iZut9Dh2KEjNVhDUxzWw";function Fe({uri:e,price:t,size:a,spec:i,logger:s,onPlayback:n}){const{enqueueSnackbar:o}=(0,Ue.u)(),r=(0,_e.A)(),c=0===t?.finalPrice?.amount,d=c?i.getButtonFactory({uri:e}):i.buyButtonFactory({uri:e}),u=(0,Ne.yK)((async()=>{if(s.logInteraction(d.hitShowPaywall({paywalledItem:e})),r)n();else{try{t?.finalPrice?await(0,Ee.m)({show_uri:e,currency:t.finalPrice.currency,price:t.finalPrice.amount}):o(l._s.get("error.generic"))}catch(e){o(l._s.get("error.generic"))}n()}}),2e3,{leading:!0,trailing:!1});return(0,V.jsx)(Re.g,{size:a,className:Be,style:{flexShrink:0},onClick:u,children:c?l._s.get("web-player.audiobooks.buyFree"):l._s.get("web-player.audiobooks.buy")})}const Le=({uri:e,isLocked:t,price:a,isPlaying:i,isConsumptionCapped:s,onPlayback:n,logger:o,spec:r,size:l="large"})=>t&&!s?(0,V.jsx)(Fe,{size:l,uri:e,price:a,logger:o,spec:r,onPlayback:n}):(0,V.jsx)(Ae.e,{size:l,isPlaying:i,uri:e,onClick:n});var De=a(4732),Te=a(72144),Me=a(26681),Oe=a(76736),ze=a(75480),We=a(13932);const Ge=i.memo((function({backgroundColor:e,uri:t,name:a,isPlaying:s,togglePlay:n,isLocked:o,consumptionCapExplanation:r,price:c,spec:d,isExplicit:u,publishDate:m,duration:g}){const[h,x]=(0,we.X)(t),y=!(0,We.O)(),j=(0,p.OY)(),k=(0,q.w)(),f=(0,re.Mk)(),v=(0,i.useCallback)((()=>{k({targetUri:t,intent:h?"unsave":"save",type:"click"});const e=d.saveToLibraryButtonFactory();h?f.logInteraction(e.hitUnfollow({itemToBeUnfollowed:t})):f.logInteraction(e.hitFollow({itemToBeFollowed:t})),x(!h)}),[k,t,h,d,x,f]),P=(0,i.useCallback)(((e,a)=>{const i=d.downloadButtonFactory();r?j((0,De.uG)(r)):a===Ie._w.ADD?f.logInteraction(i.hitDownload({itemToDownload:t})):a===Ie._w.REMOVE?f.logInteraction(i.hitRemoveDownload({itemToRemoveFromDownloads:t})):a===Ie._w.NO_PERMISSION&&f.logInteraction(i.hitUiReveal())}),[r,j,f,d,t]),C=(0,i.useCallback)((()=>{const e=d.contextButtonFactory().hitUiReveal();f.logInteraction(e)}),[f,d]),S=(0,ze.u)(),w=!!r,I=!o&&!w;return(0,V.jsxs)(Te.g,{backgroundColor:e,style:{"--action-bar-padding-bottom":ge},children:[(0,V.jsx)(Me.i,{testId:"book-action-bar-metadata",children:(0,V.jsx)(Se,{explicit:u,publishDate:m,durationMs:g})}),(0,V.jsxs)(Me.i,{children:[(0,V.jsx)(Le,{uri:t,isLocked:o,isConsumptionCapped:w,price:c,isPlaying:s,onPlayback:n,logger:f,spec:d,size:S}),(0,V.jsx)(Oe.m,{children:(0,V.jsx)(de.O,{isAdded:h,onClick:v,disabled:y,size:S,isAudiobook:!0})},"follow-button"),(0,V.jsx)(ue.m,{uri:t,onClick:P,size:S,canDownload:I}),(0,V.jsx)(me.pD,{menu:(0,V.jsx)(pe.y,{uri:t}),children:(0,V.jsx)(b.g,{label:l._s.get("more.label.context",a),onClick:C,size:S})})]})]})}));var Ve=a(62528),Ye=a(1044),Ke=a(62688),qe=a(73372),He=a(78232),Qe=a(74796);const Xe=i.memo((function({coverArt:e,name:t,authorName:a,uri:i,backgroundColor:s,isPlaying:n,togglePlay:o,isLocked:r,price:c,isConsumptionCapped:d,logger:u,spec:m}){return(0,V.jsxs)(Ye.I1,{backgroundColor:s,children:[(0,V.jsxs)(Ke.E,{children:[(0,V.jsx)(Le,{uri:i,isLocked:r,price:c,isPlaying:n,isConsumptionCapped:d,onPlayback:o,logger:u,spec:m,size:"medium"}),(0,V.jsx)(qe.e,{text:t,dragUri:i,dragLabel:t})]}),(0,V.jsx)(me.UF,{menu:(0,V.jsx)(pe.y,{uri:i}),children:(0,V.jsx)(Ye.gR,{images:e,name:t,dragUri:i,dragMimeType:Ve.__.AUDIOBOOKS,shape:C.O.SQUARE})}),(0,V.jsxs)(Ye.a8,{children:[(0,V.jsx)(He.a,{children:l._s.get("web-player.audiobooks.audiobook")}),(0,V.jsx)(Ye.on,{canEdit:!1,onClick:()=>{},scaleAtMinWidth:Ye.Gc,dragUri:i,dragMimeType:Ve.__.AUDIOBOOKS,dragLabel:t,children:t}),(0,V.jsx)(Qe._,{children:a})]})]})})),Je="HvVxzh4ZoggYAhgSxSth",Ze=i.memo((({price:e})=>e.finalPrice&&e.finalListPrice?0===e.finalPrice.amount&&0===e.finalListPrice.amount?(0,V.jsxs)("div",{className:Je,children:[(0,V.jsx)(g.a,{variant:"bodyMediumBold",semanticColor:"textBase",children:l._s.get("audiobook.freePriceDescription")}),(0,V.jsx)(g.a,{variant:"bodySmall",children:l._s.get("audiobook.freePriceExplanation")})]}):(0,V.jsxs)("div",{className:Je,children:[(0,V.jsx)(g.a,{variant:"titleSmall",semanticColor:"textBase",children:e.finalPrice.formattedPrice}),e.finalPrice.amount<e.finalListPrice.amount&&(0,V.jsx)(g.a,{variant:"bodyMedium",semanticColor:"textSubdued",children:l._s.get("web-player.audiobooks.retailPrice",(0,V.jsx)("span",{style:{textDecoration:"line-through"},children:e.finalListPrice.formattedPrice}))})]}):null));a(73952),a(97296),a(41260);var $e=a(31128),et=a(40728);var tt=a(86852);var at=a(97276),it=a(83968),st=a(15040),nt=a(5256);const ot="b0Vng72SrQiFroJKXfk2",rt="FfeP3XKSZcAdfviyk8fv",lt="eWxDd0LanTnTlSl8SOHX",ct="eAOkseqV13_CAmzuDJpa",dt="fovofKIYdEIURgIYoKm2",ut="NXXFrQO7npgPCRuSKaAA",mt="ekkhhuxKVGAzkEmuh9kE",pt="zd6xqobF255bxHFtCmXy",gt=i.memo((function({name:e,duration:t,uri:a,bookName:s,usePlayContextItem:n,isChapterLocked:o,isPlayable:r,resumePositionMs:c,isFullyPlayed:d,isExplicit:u,is19PlusOnly:x,spec:y,index:j,consumptionCapExplanation:f}){const v=(0,i.useRef)(c),{isPlaying:P,togglePlay:C,isActive:S}=n({uri:a}),A=(0,re.Mk)(),N=(0,_e.A)(),R=(0,p.OY)(),E=(0,h.IP)(st.eAS,{loadingValue:!1}),{position:U,isFullyPlayed:B}=((e,t,a,s)=>{const n=(0,i.useRef)(null),[o,r]=(0,i.useState)(s),[l]=(0,nt.e)(1e4,(t=>t?.item?.uri===e));return(0,i.useEffect)((()=>{a&&(n.current=l)}),[a,l]),(0,i.useEffect)((()=>{!a&&n.current&&t.milliseconds<=n.current+1e4&&r(!0)}),[a,t.milliseconds]),{position:a?l:null,isFullyPlayed:o}})(a,t,P,d);null!==U&&(v.current=U);const F=(0,i.useCallback)((e=>{e.stopPropagation(),e.preventDefault()}),[]),L=(0,q.w)(),D=(0,i.useCallback)((e=>{if(F(e),f&&!N&&E)return void R((0,De.uG)(f));const t=y.chapterBlockFactory({position:j,uri:a}).playButtonFactory();if(o)L({type:"click",intent:"audiobook-gated-entry-point",itemIdSuffix:"target-chapter"}),A.logInteraction(t.hitShowPaywall({paywalledItem:a}));else{const e=(0,it.Il)({isPlaying:P,isActive:S,spec:t,logger:A,uri:a});C({loggingParams:e})}}),[f,R,j,E,S,N,o,P,A,L,y,F,C,a]),T=(0,i.useCallback)((()=>{const e=y.chapterBlockFactory({position:j,uri:a}).secondaryHitUiReveal();A.logInteraction(e)}),[j,A,y,a]),M=(0,i.useCallback)((e=>{F(e);const t=y.chapterBlockFactory({position:j,uri:a}).contextMenuFactory().hitUiReveal();A.logInteraction(t)}),[j,A,y,F,a]),O=(0,i.useMemo)((()=>!(o||f)),[f,o]),z=(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)("hr",{className:lt,"aria-hidden":!0}),(0,V.jsxs)("div",{className:ot,onDoubleClick:e=>{L({targetUri:a,intent:"play",type:"double-click"}),D(e)},children:[(0,V.jsx)(g.a,{as:"h2",variant:"bodyMediumBold",className:m()(ut,{[rt]:S}),semanticColor:"textBase",children:e}),(0,V.jsxs)("div",{className:mt,children:[(0,V.jsx)(_.O,{size:"small",version:_.e.secondary,onClick:D,isPlaying:P,ariaPlayLabel:l._s.get("tracklist.a11y.play",e,s),ariaPauseLabel:l._s.get("tracklist.a11y.pause",e,s),locked:o&&!f,disabled:!r&&!(o||f)}),u&&(0,V.jsx)(w.C,{fullText:!0}),x&&(0,V.jsx)(I.o,{size:16}),(0,V.jsx)("div",{className:pt,children:(0,V.jsx)(at.W,{isPlaying:P,fullyPlayed:B,durationMs:t.milliseconds,resumePositionMs:v.current,position:U??void 0})})]}),O?(0,V.jsx)(me.pD,{menu:(0,V.jsx)(k.h,{uri:a}),children:(0,V.jsx)(b.g,{className:dt,size:b.o.sm,label:l._s.get("more.label.context",e),onClick:M,condensedAll:!0})}):null]})]});return O?(0,V.jsx)(me.UF,{menu:(0,V.jsx)(k.h,{uri:a}),onShow:T,children:(0,V.jsx)("div",{className:ct,children:z})}):(0,V.jsx)("div",{className:ct,children:z})}));var ht=a(45008),xt=a(82960),yt=a(72001),bt=a(59448);const jt="XG_S4BkuyAMohXFLGKU1",kt="NrMNU3Sf4iy2c6JJx7R8",ft="n8V7RFwuVx9PaIT1n_mA",vt="kTtB_Y_yizhUj6SMYY8e",Pt="f2XS5sEjEtvk4TdlzHK3",Ct="d9YBRXX3qqxAD43sqNzE",St="Jvp5er4UpzTljUao_SrR",wt="EQCGoB4MqhFPtwUwp1rh",It="UTBQUpUwOPb37ou2ULmH",At="Dnwv7PC1vjXvcwYEfqqf",Nt=i.memo((function({name:e,duration:t,uri:a,bookName:s,usePlayContextItem:n,isChapterLocked:o,isPlayable:r,resumePositionMs:c,isFullyPlayed:d,isExplicit:u,is19PlusOnly:g,spec:x,index:y,consumptionCapExplanation:j}){const f=(0,i.useRef)(c),{isPlaying:v,togglePlay:P,isActive:C}=n({uri:a}),S=(0,re.Mk)(),A=(0,_e.A)(),N=(0,p.OY)(),R=(0,h.IP)(st.eAS,{loadingValue:!1}),E=(0,yt.o)((e=>{if(e?.item?.uri===a){const t=(0,bt.E)(e)??0;return f.current=t,t}return 0})),U=(0,i.useCallback)((e=>{e.stopPropagation(),e.preventDefault()}),[]),B=(0,q.w)(),F=(0,i.useCallback)((e=>{if(U(e),j&&!A&&R)return void N((0,De.uG)(j));const t=x.chapterBlockFactory({position:y,uri:a}).playButtonFactory();if(o)B({type:"click",intent:"audiobook-gated-entry-point",itemIdSuffix:"target-chapter"}),S.logInteraction(t.hitShowPaywall({paywalledItem:a}));else{const e=(0,it.Il)({isPlaying:v,isActive:C,spec:t,logger:S,uri:a});P({loggingParams:e})}}),[j,N,y,R,C,A,o,v,S,B,x,U,P,a]),L=(0,i.useCallback)((()=>{const e=x.chapterBlockFactory({position:y,uri:a}).secondaryHitUiReveal();S.logInteraction(e)}),[y,S,x,a]),D=(0,i.useCallback)((e=>{U(e);const t=x.chapterBlockFactory({position:y,uri:a}).contextMenuFactory().hitUiReveal();S.logInteraction(t)}),[y,S,x,U,a]),T=!(o||j),M=(0,V.jsx)(ht.Y,{className:m()({[kt]:C}),children:e}),O=(0,V.jsxs)("div",{className:Ct,children:[u&&(0,V.jsx)(w.C,{fullText:!0}),g&&(0,V.jsx)(I.o,{size:16}),(0,V.jsx)("div",{className:St,children:(0,V.jsx)(at.W,{isPlaying:v,fullyPlayed:d,durationMs:t.milliseconds,resumePositionMs:f.current,position:v?E:void 0})})]}),z=(0,V.jsxs)("div",{className:It,children:[(0,V.jsx)("div",{className:At,children:T?(0,V.jsx)(me.pD,{menu:(0,V.jsx)(k.h,{uri:a}),children:(0,V.jsx)(b.g,{className:Pt,size:b.o.xs,label:l._s.get("more.label.context",e),onClick:D})}):null}),(0,V.jsx)("div",{className:wt,children:(0,V.jsx)(_.O,{size:"small",version:_.e.secondary,onClick:F,isPlaying:v,ariaPlayLabel:l._s.get("tracklist.a11y.play",e,s),ariaPauseLabel:l._s.get("tracklist.a11y.pause",e,s),locked:o&&!j,disabled:!r&&!(o||j)})})]}),W=(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)("hr",{className:ft,"aria-hidden":!0}),(0,V.jsx)(xt.U,{id:`chapter-${y}`,title:M,body:O,footer:z,onDoubleClick:e=>{B({targetUri:a,intent:"play",type:"double-click"}),F(e)},className:jt})]});return T?(0,V.jsx)(me.UF,{menu:(0,V.jsx)(k.h,{uri:a}),onShow:L,children:(0,V.jsx)("div",{className:vt,children:W})}):(0,V.jsx)("div",{className:vt,children:W})})),Rt=({bookUri:e,bookName:t,sampleUri:a,isFinishedUnlockingJourney:s,usePlayContextItem:n,spec:o,consumptionCapExplanation:r})=>{const l=function(e,t){const a=(0,et.i)();return(0,i.useCallback)((async(i,s)=>a.getBookContents(e,{offset:i,limit:s,doRefreshSubscription:t})),[t,a,e])}(e,s),c=(0,i.useRef)(!1),d=(0,i.useRef)(0),u=(0,h.IP)(st.iK$,{loadingValue:!1}),[m,p]=(0,i.useState)([]),g=(0,i.useCallback)((e=>e?.uri===a),[a]),x=(0,i.useCallback)((e=>(e=>null!==e)(e)&&!g(e)),[g]),y=(0,i.useCallback)((()=>{l&&(c.current||null===d.current||(c.current=!0,l(d.current,50).then((e=>{c.current=!1,d.current=e.nextOffset,e.items.length>0&&p((t=>t.concat(e.items.filter(x))))}))))}),[l,x]);return(0,i.useEffect)((()=>{d.current=0,p([])}),[e]),(0,V.jsx)("ul",{children:(0,V.jsx)($e.A,{onReachBottom:y,triggerOnInitialLoad:!0,children:m.map(((e,a)=>{const{name:i,duration:s,uri:l,playability:{playable:c},playedState:{playPositionMilliseconds:d,state:m},isExplicit:p,is19PlusOnly:g}=e,h=function(e){return!e.playability?.playable&&(e.playability?.reason===tt.IN.PaymentRequired||e.playability?.reason===tt.IN.Anonymous)}(e);return u?(0,V.jsx)(Nt,{name:i,duration:s,uri:l,bookName:t,usePlayContextItem:n,isPlayable:c,isChapterLocked:h,consumptionCapExplanation:r,resumePositionMs:d,isFullyPlayed:m===tt.QF.Completed,isExplicit:p,is19PlusOnly:g,spec:o,index:a},l):(0,V.jsx)(gt,{name:i,duration:s,uri:l,bookName:t,usePlayContextItem:n,isPlayable:c,isChapterLocked:h,consumptionCapExplanation:r,resumePositionMs:d,isFullyPlayed:m===tt.QF.Completed,isExplicit:p,is19PlusOnly:g,spec:o,index:a},l)}))})})};var Et=a(96560),_t=a(76008),Ut=a(67048),Bt=a(1072),Ft=a(24759),Lt=a(67716);var Dt=a(40068),Tt=a(20356),Mt=a(23568);const Ot="QEd1L2SSRW1ol_sQQN6m",zt="ENuWK8u3C9kmadnqkErf",Wt="i0gSVhns0PjhiUKm4OG1",Gt="jKVb6K0dga3SfW1dp2Pg",Vt="MOpV0_YizQER2NksxLju",Yt="vrR8bh9DvivyDfUrh1vD",Kt="_toO3CqMPAPTbny7Rh8R",qt="Iudw61HRePwOAJpbDRvA",Ht="GWaz1n1SADn9enzKdi_Z",Qt="W7kwdfolShg_M5iHClQf",Xt="vwp92qijGWC85xlm2x_B",Jt=({rating:e,setNewRating:t,isBook:a,canSubmitRating:i,onSubmitRating:s})=>{const n=Array.from(Array(5).keys(),(e=>e+1));return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)("div",{className:Qt,children:n.map((i=>(0,V.jsx)(Et.u,{"aria-label":a?`Rate this audiobook ${i} stars`:`Rate this podcast ${i} stars`,className:Xt,onClick:()=>t(i),iconOnly:()=>e&&e>=i?(0,V.jsx)(X.G,{size:"large",semanticColor:"textBase"}):(0,V.jsx)(J.T,{size:"large"})},i)))}),(0,V.jsx)(Re.g,{"aria-label":"Submit",colorSet:"invertedLight",disabled:!i,onClick:s,children:"Submit"})]})},Zt=({isBook:e,onDismiss:t})=>(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(g.a,{as:"p",variant:"titleSmall",className:qt,children:e?"Listen to the book first!":"Listen to the show first!"}),(0,V.jsx)(g.a,{as:"p",className:Ht,variant:"bodyMedium",children:e?"Only listeners to this book can rate it. Check out a few chapters then come back and give your feedback.":"Only listeners to this show can rate it. Check out a few episodes then come back and give your feedback."}),(0,V.jsx)(Re.g,{colorSet:"invertedLight",onClick:t,children:l._s.get("web-player.audiobooks.rating.ok")})]}),$t=i.memo((function({coverArt:e,toggleModal:t,uri:a,isBook:s,rating:n}){const r=(0,Dt.C)(e,{desiredSize:320}),{spec:c,logger:d}=(0,re.gp)(Ut.createDesktopPodcastRatingEventFactory,{data:{identifier:s?o.eA.RATINGS_AND_REVIEWS_RATINGS_AUDIOBOOK:o.eA.RATINGS_AND_REVIEWS_RATINGS,uri:a}}),[u,m]=(0,i.useState)(n?.rating?.rating??null),{onSubmitRating:p}=function(e){const t=(0,et.i)(),{enqueueSnackbar:a}=(0,Lt.uU)(),{mutateAsync:i}=(0,Ft.c)({mutationFn:async a=>{a&&await t.updateUserRating(e,a)},onSuccess:()=>{a("Thanks for rating!")},onError:()=>{a("Something went wrong while rating")}});return{onSubmitRating:i}}(a);return(0,V.jsx)(Tt.c,{contentLabel:"podcast-rating-modal",isOpen:!0,onRequestClose:t,children:(0,V.jsxs)("div",{className:Ot,children:[(0,V.jsxs)("div",{className:Wt,children:[(0,V.jsx)(g.a,{as:"h1",variant:"titleSmall",className:Kt,children:s?l._s.get("web-player.audiobooks.rating.rateAudiobook"):l._s.get("web-player.show.rating.header")}),(0,V.jsxs)("button",{className:Gt,onClick:()=>{const e=c.closeButtonFactory().hitUiNavigateBack();d.logInteraction(e),t()},children:[(0,V.jsx)(_t.K,{role:"presentation"}),(0,V.jsx)("span",{className:"hidden-visually",children:l._s.get("web-player.audiobooks.rating.closeModal")})]})]}),(0,V.jsxs)("div",{className:Vt,children:[(0,V.jsx)(Bt.WC,{loading:"eager",src:r?.url,className:zt}),(0,V.jsx)("div",{className:Yt,children:(0,V.jsx)(Mt.Q,{property:st.MJI,renderNewExperience:()=>(0,V.jsx)(V.Fragment,{children:n?.canRate?(0,V.jsx)(Jt,{rating:u,setNewRating:m,isBook:s,onSubmitRating:()=>{p(u),t()},canSubmitRating:u!==n?.rating?.rating}):(0,V.jsx)(Zt,{isBook:s,onDismiss:()=>{const e=c.okButtonFactory().hitUiNavigateBack();d.logInteraction(e),t()}})}),renderOldExperience:()=>(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(g.a,{as:"p",variant:"bodyMediumBold",className:qt,children:s?l._s.get("web-player.audiobooks.rating.wantToRate"):l._s.get("web-player.show.rating.want-to-rate")}),(0,V.jsx)(g.a,{as:"p",className:Ht,children:l._s.get("web-player.audiobooks.rating.goToApp")}),(0,V.jsx)(Re.g,{colorSet:"invertedLight",onClick:()=>{const e=c.okButtonFactory().hitUiNavigateBack();d.logInteraction(e),t()},children:l._s.get("web-player.audiobooks.rating.ok")})]})})})]})]})})})),ea={shuffle:!1,repeat:ne.Su.REPEAT_NONE},ta=i.memo((function({metadata:e}){const{uri:t,coverArt:a,name:n,htmlDescriptionPlain:r,authorName:d,sample:u,narrators:v,rating:P,isExplicit:C,duration:S,copyrights:w,publishDate:I,price:A,isLocked:N,consumptionCapExplanation:R,signifierText:E,latestPlayedEpisodeLink:_,topics:U}=e,{search:B}=(0,s.IT)(),F=!!new URLSearchParams(B).get("isUnlockingAudiobook"),L=!(!(0,ie.i)(F)||F),D=(0,_e.A)(),T=(0,H.O)(a[0]?.url),M=(0,p.OY)(),[O,z]=(0,i.useState)(!1),W=(0,q.w)(),G=(0,h.IP)(st.eAS,{loadingValue:!1}),{spec:X,logger:J}=(0,re.gp)(x.createDesktopAudiobookEventFactory,{data:{uri:t,identifier:o.eA.PODCAST_SHOW_AUDIOBOOK}}),{spec:Z,logger:$}=(0,re.gp)(x.createDesktopAudiobookEventFactory,{data:{uri:t,identifier:o.eA.RATINGS_AND_REVIEWS_RATINGS_AUDIOBOOK}}),{spec:ee,logger:ne}=(0,re.gp)(y.createDesktopLockedAudiobookEventFactory,{data:{uri:t,identifier:o.eA.PODCAST_SHOW_AUDIOBOOK}}),le=(0,i.useMemo)((()=>X.actionBarFactory()),[X]),de=(0,i.useMemo)((()=>Z.aboutSectionFactory()),[Z]),ue=(0,i.useMemo)((()=>X.chapterListFactory()),[X]);(0,i.useEffect)((()=>{W({type:"view",intent:"audiobook"})}),[W]),(0,i.useEffect)((()=>{N&&ne.logImpression(ee.impression())}),[ee,ne,N]);const{isPlaying:me,togglePlay:pe,usePlayContextItem:ge,isActive:Pe,triggerPlay:Ce}=(0,se.I)({uri:t},{featureIdentifier:"audiobook"},ea),{togglePlay:Se,isPlaying:we,isActive:Ie}=(0,se.I)({uri:u?.uri??""},{featureIdentifier:"audiobook"},ea),Ae=me&&!we,Ne=Pe&&!Ie,Re=(0,i.useCallback)((async()=>{const e=X.actionBarFactory().playButtonFactory();if(R&&!D&&G)return J.logInteraction(e.hitShowPaywall({paywalledItem:t})),void M((0,De.uG)(R));if(!N||D)if(D)pe();else{const a=(0,it.Il)({isPlaying:Ae,isActive:Ne,spec:e,logger:J,uri:t});Ne?pe({loggingParams:a}):Ce({skipTo:_?{uri:_}:void 0,loggingParams:a})}}),[X,R,D,G,N,J,t,M,pe,Ae,Ne,Ce,_]),Ee=(0,i.useCallback)((()=>{u?.uri&&(W({targetUri:u.uri,intent:we?"play":"pause",type:"click"}),Se())}),[we,W,Se,u?.uri]),Ue=(0,i.useCallback)((()=>{const e=de.ratingButtonFactory().hitUiReveal();$.logInteraction(e),z((e=>!e))}),[de,$]),Be=(0,ae.oV)(),Fe=N&&!R&&A;return(0,V.jsxs)("section",{className:he,children:[(0,V.jsx)(c.Q,{children:(0,oe.S8)({showOrAudiobookName:n,type:"Audiobook"})}),(0,V.jsx)(Xe,{name:n,authorName:d,uri:t,coverArt:a,backgroundColor:T,togglePlay:Re,isPlaying:Ae,isLocked:N,isConsumptionCapped:!!R,price:A,logger:J,spec:X.actionBarFactory()}),(0,V.jsx)(Ge,{name:n,backgroundColor:T,uri:t,togglePlay:Re,isPlaying:Ae,isLocked:N,consumptionCapExplanation:R,isExplicit:C,duration:S,publishDate:I,price:A,spec:le}),(0,V.jsxs)("div",{className:m()(xe,"contentSpacing",{[ye]:Be===ae.u_.LARGE}),children:[(0,V.jsxs)("div",{className:be,children:[(0,V.jsxs)("div",{className:ve,children:[E&&(0,V.jsx)(g.a,{variant:"bodyMedium",as:"p",semanticColor:"textBrightAccent",children:E}),!E&&Fe&&(0,V.jsx)(Ze,{price:A})]}),(0,V.jsx)(ce,{htmlDescription:r,narrators:v,spec:de})]}),(0,V.jsxs)("div",{className:je,children:[u?.isPlayable&&(0,V.jsx)(K,{label:l._s.get("audiobook.page.sample"),images:u.coverArt,title:u.name,duration:u.duration.milliseconds,moreButton:N?null:(0,V.jsx)(j.p,{menu:(0,V.jsx)(k.h,{uri:u.uri}),children:(0,V.jsx)(b.g,{})}),onClick:Ee,isPlaying:we,isActive:Ie,size:Y.LARGE,contentRating:u.contentRating?.label,isPlayable:u.isPlayable}),(0,V.jsx)("div",{className:ke,children:(0,V.jsx)(te,{rating:P,onClick:Ue})}),U.length>0&&(0,V.jsx)(f.A,{topics:U})]}),(0,V.jsxs)("div",{className:fe,children:[(0,V.jsx)(Rt,{bookUri:t,bookName:n,sampleUri:u?.uri,isFinishedUnlockingJourney:L,usePlayContextItem:ge,spec:ue,consumptionCapExplanation:R},`${t}-${N}-${!!R}`),(0,V.jsx)(Q.k,{copyrights:w})]})]}),O&&(0,V.jsx)($t,{toggleModal:()=>z(!1),coverArt:a,uri:t,isBook:!0,rating:P??null})]})}));var aa=a(46736),ia=a(72660),sa=a(3176),na=a(81472),oa=a(82988);const ra=({uri:e,name:t,backgroundColor:a,spec:s})=>{const n=(0,re.Mk)(),o=(0,q.w)(),r=!(0,We.O)(),[c,d]=(0,we.X)(e),u=(0,i.useCallback)((()=>{o({targetUri:e,intent:c?"unsave":"save",type:"click"});const t=s.followButtonFactory();n.logInteraction(c?t.hitUnfollow({itemToBeUnfollowed:e}):t.hitFollow({itemToBeFollowed:e})),d(!c)}),[o,e,c,s,n,d]),m=(0,i.useCallback)((()=>{n.logInteraction(s.contextButtonFactory().hitUiReveal())}),[n,s]),p=(0,ze.u)();return(0,V.jsx)(Te.g,{backgroundColor:a,children:(0,V.jsxs)(Me.i,{children:[(0,V.jsx)(Oe.m,{children:(0,V.jsx)(oa.W,{isFollowing:c,onClick:u,disabled:r})},"follow-button"),(0,V.jsx)(j.p,{menu:(0,V.jsx)(na.Q,{uri:e}),onShow:m,children:(0,V.jsx)(b.g,{label:l._s.get("more.label.context",t),size:p})})]})})},la=(0,i.lazy)((()=>a.e(1516).then(a.bind(a,41516)))),ca=(0,i.lazy)((()=>a.e(8544).then(a.bind(a,18544))));function da(e){const t=(0,h.IP)(st.sjj),a=(0,h.IP)(st.KY5);return t&&a?(0,V.jsx)(ca,{uri:e.uri}):t?(0,V.jsx)(i.Suspense,{fallback:!0,children:(0,V.jsx)(la,{...e})}):null}var ua=a(7300),ma=a(71464),pa=a(39244),ga=a(52216),ha=a(40132),xa=a(92628),ya=a(87056),ba=a(81604),ja=a(29724);const ka=(0,i.createContext)({setSortState:()=>{throw new Error("setSortState must be used within a ShowFilterProvider")},sortState:[]}),fa=i.memo((function({uri:e,children:t}){return(0,V.jsx)(ja.M,{uri:e,defaultState:[],sortContext:ka,localStorageKey:"showFilterParams-v2",children:t})}));a(91372);var va=a(80392);const Pa={field:va.YP.PUBLISH_DATE,order:va.Sy.DESC},Ca={field:va.YP.PUBLISH_DATE,order:va.Sy.ASC},Sa=Ca,wa={episodic:Pa,sequential:Ca,recent:Pa};function Ia(){return new Map([[Pa,{key:"newest-to-oldest",value:l._s.get("shows.sort.newest-to-oldest")}],[Ca,{key:"oldest-to-newest",value:l._s.get("shows.sort.oldest-to-newest")}]])}function Aa(e){return wa[e]}const Na=(0,i.createContext)({setSortState:()=>{throw new Error("setSortState must be used within a ShowSortProvider")},sortState:Aa("recent")}),Ra=e=>{const t=Ia();return Array.from(t.keys()).some((({field:t})=>t===e?.field))},Ea=i.memo((function({uri:e,children:t,defaultSortParam:a}){return(0,V.jsx)(ja.M,{uri:e,defaultState:a,sortContext:Na,localStorageKey:"showSortParam",validator:Ra,children:t})}));var _a=a(38156),Ua=a(41956),Ba=a(15700);const Fa=()=>{const e=(0,Ba.m)(),t=(0,s.IT)(),a=(0,h.IP)(st.odN);if(!e)return{showILRVariantAEnabled:!1,showILRVariantBEnabled:!1};const i=(0,_a.qs)(Ua.S.ILRShowVariantA,t),n=(0,_a.qs)(Ua.S.ILRShowVariantB,t),o=a===st.SuL.VARIANT_A,r=a===st.SuL.VARIANT_B;return{showILRVariantAEnabled:!n&&(i||o),showILRVariantBEnabled:!i&&(n||r)}},La="cJJXVm4gQW6AdfCQRhpX",Da="show-episodeBlock-episodeBlock",Ta="T_oLvKwmkKlDC_aaLqw7",Ma="bJU4uwjQGgbcXWuIW66h",Oa={totalCount:0,nextOffset:0,items:[]},za=i.memo((function({showMetadata:e,usePlayContextItem:t}){const{sortState:a}=(0,i.useContext)(Na),{sortState:s}=(0,i.useContext)(ka),n=(0,ga.Og)(e.uri,a,s),[o,r]=(0,i.useState)(Oa),c=(0,i.useRef)(!1),{showILRVariantAEnabled:d,showILRVariantBEnabled:u}=Fa(),[m,p]=(0,i.useState)(!1),[h,x]=(0,i.useState)(!0),y=(0,i.useRef)(0),b=(0,i.useMemo)((()=>d&&m?50:d?12:u?6:50),[m,d,u]),j=d&&h,k=u&&null!==y.current,f=j||k,v=!d&&!u||d&&!h,P=(0,i.useCallback)(((e=!1)=>{if(!n)return;const t=y.current;null!==t&&!c.current&&b>0&&(c.current=!0,n(t,b).then((a=>{r((i=>{const s=e?[]:[...i.items];return s.splice(t,a.items.length,...a.items),y.current=a.nextOffset,{...a,items:s}})),c.current=!1})))}),[n,b]);return(0,i.useEffect)((()=>{r(Oa)}),[e.uri]),(0,i.useEffect)((()=>{y.current=0,P(!0),d&&!m&&p(!0)}),[P,m,d]),(0,V.jsxs)(ba.oL,{value:"track-list",children:[(0,V.jsx)($e.A,{onReachBottom:v?P:void 0,triggerOnInitialLoad:!0,children:o.items.map(((a,i)=>a&&(0,V.jsxs)("div",{className:Da,children:[(0,V.jsx)("hr",{className:La,"aria-hidden":!0}),(0,V.jsx)(ha.e,{index:i,episode:a,showMetadata:e,usePlayContextItem:t},`${a.uri}/${i}`)]},`${i}${a.uri}`)))}),f&&(0,V.jsx)("div",{className:Ta,children:(0,V.jsxs)(xa.a,{onClick:()=>{P(),d&&h&&x(!1)},className:Ma,children:[(0,V.jsx)(g.a,{variant:"bodySmallBold",children:l._s.get("internal-link-recommender.load-more-episodes")}),(0,V.jsx)(ya.U,{size:"xsmall"})]})})]})}));a(97768);var Wa=a(556);const Ga={field:va.I7.ISPLAYED,operator:va.We.EQUALS,value:!1},Va={field:va.I7.STARTEDPLAYING,operator:va.We.GREATER_THAN,value:0};const Ya="all-episodes",Ka=({onFilter:e})=>{const{sortState:t,setSortState:a}=(0,i.useContext)(ka),s=new Map([[Ga,{key:"is-played",value:l._s.get("shows.filter.unplayed")}],[Va,{key:"started-playing",value:l._s.get("shows.filter.in-progress")}]]),n=Array.from(s.values());n.unshift({key:Ya,value:l._s.get("mwp.podcast.all.episodes")});const o=Array.from(s.keys()),r=(0,i.useCallback)((t=>{if(t===Ya)a([]);else{const e=o.find((e=>s.get(e)?.key===t));e&&a([e])}e()}),[e,a,o,s]);if(!s.size||!o)return null;let c=n[0];const d=Array.from(s.entries()).filter((e=>t?.some((t=>t.field===e[0].field&&t.operator===e[0].operator))));return d.length>0&&(c=d[0][1]),(0,V.jsx)(Wa.W,{options:n,onSelect:e=>r(e),selected:c,variant:"bodyMediumBold",semanticColor:"textBase",heading:l._s.get("drop_down.filter_by")})},qa=({onSort:e})=>{const{sortState:t,setSortState:a}=(0,i.useContext)(Na),s=Ia(),n=Array.from(s.values()),o=Array.from(s.keys()),r=(0,i.useCallback)((t=>{const i=o.find((e=>s.get(e)?.key===t));i&&a(i),e()}),[o,e,s,a]);if(!s.size||!t)return null;const c=Array.from(s.keys()).find((e=>e.field===t.field&&e.order===t.order));if(!c)return null;const d=s.get(c);return d?(0,V.jsx)(Wa.W,{options:n,onSelect:e=>r(e),selected:d,heading:l._s.get("drop_down.sort_by")}):null},Ha="show-showPage-sectionWrapper",Qa="TYB4Y2xQujO7cifhHush",Xa="sSXKiPRvp2AHmwfHoCCS",Ja="YJlizbhw6DBPHT9OYbdj",Za="TfjbWiK8hca4HHEBnonP",$a="show-show-episodesHeader",ei="show-show-episodesFilter",ti="show-show-episodesFilter",ai="fejGrhq7pxGC99cUdyVw",ii="T0OjvsNXAJJGd23eBG2m",si="Ppm5YkDdE5ktTPwZC1Dw",ni="cZJ2Mu2ZlpdHzRCJfVez",oi="urKYEVZPj2k0hwDT1qzt",ri="_9UGPPaHqf8eOYVwp6wJQ",li=({spec:e})=>{const t=(0,re.Mk)(),{canSort:a,canFilter:s}=(0,ga.ik)().capabilities,n=(0,i.useCallback)((()=>{t.logInteraction(e.episodeListFactory().filterButtonFactory().hitFilter())}),[t,e]),o=(0,i.useCallback)((()=>{t.logInteraction(e.episodeListFactory().sortButtonFactory().hitSort())}),[t,e]);return(0,V.jsxs)("div",{className:$a,children:[s&&(0,V.jsx)("div",{className:ti,children:(0,V.jsx)(Ka,{onFilter:n})}),!s&&(0,V.jsx)(g.a,{as:"h3",variant:"titleSmall",semanticColor:"textBase",className:ai,children:l._s.get("mwp.podcast.all.episodes")}),a&&(0,V.jsx)("div",{className:ei,children:(0,V.jsx)(qa,{onSort:o})})]})},ci=e=>{switch(e){case tt.uW.TRAILER:return l._s.get("podcasts.next-episode.trailer");case tt.uW.UP_NEXT:return l._s.get("podcasts.next-episode.up-next");case tt.uW.CONTINUE_LISTENING:return l._s.get("podcasts.next-episode.continue-listening");case tt.uW.FIRST_PUBLISHED:return l._s.get("podcasts.next-episode.first-published");case tt.uW.LATEST_PUBLISHED:return l._s.get("podcasts.next-episode.latest-published");default:return}},di=({breakpoint:e,metadata:t,showId:a,spec:s})=>{const{uri:n,trailer:o,topics:r,description:c,htmlDescription:d,coverArt:u,rating:p}=t,h=(0,re.Mk)(),x=(0,i.useMemo)((()=>s.episodeListFactory()),[s]),[y,k]=(0,i.useState)(!1),v=(0,q.w)(),P=(0,_e.A)(),{sortState:C}=(0,i.useContext)(ka),S=(0,ga.ik)(),{usePlayContextItem:w}=(0,se.I)({uri:n,metadata:{[ne.WE.SORTING_CRITERIA]:S.getPlayerSort(Sa),[ne.WE.FILTERING_PREDICATE]:S.getPlayerFilter(C)}},{featureIdentifier:"show"}),{isActive:I,isPlaying:A,togglePlay:N}=w({uri:o?.uri||""}),R=(0,i.useCallback)((e=>{v({intent:"expand-description",type:"click"});const t=s.aboutSectionFactory().seeMoreButtonFactory(),a=e?t.hitUiReveal():t.hitUiHide();h.logInteraction(a)}),[h,v,s]),E=(0,i.useCallback)(((e,t)=>{const a=s.aboutSectionFactory().topicFactory(t).hitUiNavigate({destination:t.uri});h.logInteraction(a)}),[h,s]),_=o?{name:o.name,uri:o.uri,audio:{items:o.audio.items.map((e=>({url:e.url})))}}:null,U=(0,ha._)(t),B=(0,pa.e)(_,U),F=(0,i.useCallback)((()=>{o?.uri&&(P?B():(v({targetUri:o.uri,intent:A?"play":"pause",type:"click"}),N()))}),[B,P,A,v,N,o?.uri]),{ref:L,breakpoint:D}=(0,ae.CA)({[ae.u_.MEDIUM]:0,[ae.u_.LARGE]:600}),T=r.length>0,M=c||d,O=M||T,{showILRVariantAEnabled:z,showILRVariantBEnabled:W}=Fa();return(0,V.jsxs)("div",{className:m()(Qa,"contentSpacing",{[Xa]:e===ae.u_.LARGE}),ref:L,children:[(0,V.jsxs)("div",{className:Ja,children:[O&&(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(g.a,{as:"h3",variant:"titleSmall",semanticColor:"textBase",className:ai,children:l._s.get("artist.about")}),M&&(0,V.jsx)(le.Y,{maxLines:4,content:(c||"").trim(),onExpanded:R,htmlContent:d||void 0}),o&&(0,V.jsx)(ua.U,{menu:(0,V.jsx)(ma.y,{uri:o.uri,showUri:n,sharingInfo:o.sharingInfo}),children:(0,V.jsx)(K,{label:l._s.get("track-trailer"),className:ii,images:o.coverArt,title:o.name,duration:o.duration.milliseconds,moreButton:(0,V.jsx)(j.p,{menu:(0,V.jsx)(ma.y,{uri:o.uri,sharingInfo:o.sharingInfo,showUri:n}),children:(0,V.jsx)(b.g,{})}),onClick:F,isPlaying:A,isActive:I,size:Y.LARGE,contentRating:o.contentRating?.label})}),(0,V.jsxs)("div",{className:ni,children:[p&&(0,V.jsx)("div",{className:oi,children:(0,V.jsx)(te,{rating:p,onClick:()=>k(!0)})}),T&&(0,V.jsx)(f.A,{topics:r,className:ri,onClick:E})]})]}),(0,V.jsx)(da,{showId:a,uri:n})]}),(0,V.jsx)(ae.yM.Provider,{value:D,children:(0,V.jsxs)("div",{className:Za,"data-testid":"show-all-episode-list",children:[t.nextBestEpisode&&(0,V.jsx)(ha.e,{showMetadata:t,episode:t.nextBestEpisode.data,usePlayContextItem:w,status:ci(t.nextBestEpisode.type),variant:"next-best-episode"}),(0,V.jsx)(li,{spec:s}),(0,V.jsx)(re.Ud,{spec:x,children:(0,V.jsx)(za,{showMetadata:t,usePlayContextItem:w})})]})}),(0,V.jsx)(Q.k,{copyrights:[]}),(z||W)&&(0,V.jsx)("div",{"data-testid":"show-ilr-component-to-be-added"}),y&&(0,V.jsx)($t,{toggleModal:()=>k(!1),coverArt:u,uri:n,isBook:!1,rating:p??null})]})},ui=i.memo(di);var mi=a(19408);const pi=({reason:e})=>{const t=(0,h.IP)(st.Y50),a=function(e){switch(e){case"OTP":return l._s.get("podcasts.subscriber-indicator.otp");case"SUBSCRIPTION":return l._s.get("podcasts.subscriber-indicator.subscription");default:return""}}(e);return t&&a?(0,V.jsx)(g.a,{className:si,children:a}):null};const gi=({metadata:e,backgroundColor:t})=>{const{uri:a,coverArt:i,name:s,podcastType:n,publisherName:o,gatedContentAccessReason:r}=e;return(0,V.jsxs)(Ye.I1,{backgroundColor:t,children:[(0,V.jsx)(Ke.E,{children:(0,V.jsx)(qe.e,{text:s,dragUri:a,dragLabel:s})}),(0,V.jsx)(mi.I,{children:(0,V.jsx)(ua.U,{menu:(0,V.jsx)(na.Q,{uri:a}),children:(0,V.jsx)(Ye.iI,{loading:"eager",name:s,images:i,placeholderType:"show",shape:Ye.OU.SQUARE})})}),(0,V.jsxs)(Ye.a8,{children:[(0,V.jsxs)(He.a,{children:["SHOW"===n?l._s.get("type.show"):l._s.get("type.podcast"),r&&(0,V.jsx)(pi,{reason:r})]}),(0,V.jsx)(ua.U,{menu:(0,V.jsx)(na.Q,{uri:a}),children:(0,V.jsx)(Ye.on,{dragUri:a,dragLabel:s,scaleAtMinWidth:Ye.Gc,children:(0,V.jsx)("span",{"data-testid":"show-title",children:s})})}),(0,V.jsx)(Qe._,{children:o})]})]})};var hi=a(89624);const xi=({metadata:e,showId:t})=>{const{coverArt:a,name:s,uri:o}=e,{spec:r}=(0,re.gp)(n.createDesktopPodcastEventFactory,{data:{uri:o}}),l=(0,i.useMemo)((()=>r.actionBarFactory()),[r]),d=(0,H.O)(a[0]?.url||null),u=(0,ae.oV)();return(0,V.jsxs)("section",{className:Ha,children:[(0,V.jsx)(c.Q,{children:(0,oe.S8)({showOrAudiobookName:s,type:"Podcast"})}),(0,V.jsx)(gi,{metadata:e,backgroundColor:d}),(0,V.jsx)(ra,{uri:o,name:s,backgroundColor:d,spec:l}),(0,V.jsx)(ui,{breakpoint:u,metadata:e,showId:t,spec:r})]})},yi=(0,i.memo)((function(){const{showId:e=""}=(0,s.W4)(),t=`spotify:show:${e}`,{data:a,error:n,redirectUri:c}=(0,sa.i)(t);if(c){const e=(0,r.k3)(c);return(0,V.jsx)(aa.InstrumentedRedirect,{to:e.toURLPath(!0)})}return!a||n?n instanceof ia.W?(0,V.jsx)(d.K,{hasError:!0,errorMessage:l._s.get("error-page.not-available-in-region.title")}):(0,V.jsx)(d.K,{hasError:!!n,errorMessage:l._s.get("error.not_found.title.page")}):(0,tt.q8)(a)?(0,V.jsx)(i.Suspense,{fallback:null,children:(0,V.jsx)(hi.I,{pageId:o.eA.PODCAST_SHOW_AUDIOBOOK,uri:t,children:(0,V.jsx)(ta,{metadata:a},`${!!a.consumptionCapExplanation}`)})}):(0,V.jsx)(i.Suspense,{fallback:null,children:(0,V.jsx)(hi.I,{pageId:o.eA.PODCAST,uri:t,children:(0,V.jsx)(fa,{uri:a.uri,children:(0,V.jsx)(Ea,{uri:a.uri,defaultSortParam:Aa(a.consumptionOrder),children:(0,V.jsx)(xi,{showId:e,metadata:a})})})})})}))},38156:(e,t,a)=>{a.d(t,{qs:()=>i});a(41260);const i=(e,t)=>{const a=t?new URLSearchParams(t.search):void 0;return"1"===a?.get(e)}},41956:(e,t,a)=>{a.d(t,{S:()=>i});let i=function(e){return e.I18nSEO="i18nSEO",e.RTPTrackCredits="rtpv2p2",e.I18nAdditionalPages="i18nap",e.RichPlaylistPages="rpp",e.ILRAlbum="ilra",e.ILRAlbumAbove="ilraa",e.ILRAlbumBelow="ilrab",e.ILRShowVariantA="ilrs-a",e.ILRShowVariantB="ilrs-b",e.PlaylistInternalTrackLinks="pitl",e.PlaylistInternalTrackAndArtistLinks="pital",e.AlbumInternalTrackLinks="aitl",e.AlbumInternalTrackAndArtistLinks="aital",e}({})}}]);
//# sourceMappingURL=xpui-routes-show.js.map