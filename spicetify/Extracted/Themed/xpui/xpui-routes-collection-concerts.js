"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[8808],{47180:(e,t,a)=>{a.d(t,{c:()=>j});var n=a(96651),s=a(8004),o=a(1600),i=a(11732),r=a(57632),c=a(86524);const l="MUiWCNTfb6FcSwVPvQ1V",d="UAk3bMhekwJTV_wIyfsT",m="X9w6LPfKsZHMCs38sVIQ",u="NXn5KjeUOjLGlAfS1Gao",v="N0wgFMDDvCiby4QB5kLJ",g="nloNe2BLRHjz9dxlwfLU",h="FyD0hF1e2PKzRxQ6sYDQ",p="JzXND83mXvcEuntCNR34",x="GR08E4L_rOGljyQQX30R";var _=a(2488);const j=(0,n.memo)((e=>{const{uri:t,title:a,imageUrl:n,date:j,location:y,firstParty:f,onClick:N}=e,b=(0,c.mY)(j);return(0,_.jsxs)(i.Link,{to:t,className:l,"data-testid":"concert-card",onClick:N,children:[n&&(0,_.jsx)(r.U,{children:(0,_.jsx)("div",{role:"img",className:x,style:{backgroundImage:`linear-gradient(180deg, rgba(18, 18, 18, 0) 0%, rgba(6, 6, 6, 0.6) 60%, rgba(0, 0, 0, 0.7) 100%), url(${n})`}})}),(0,_.jsx)("time",{className:d,dateTime:j,children:(0,_.jsx)(s.a,{as:"div",variant:"bodySmallBold",children:(0,c.QD)(b)})}),(0,_.jsxs)("div",{className:m,dir:"auto",children:[(0,_.jsx)(s.a,{as:"p",className:p,variant:"bodySmall",children:[(0,c.eM)(b),(0,c.HI)(b)].join(" • ")}),(0,_.jsx)(s.a,{as:"h2",variant:"bodyMediumBold",className:u,children:a}),(0,_.jsxs)("div",{className:v,children:[f&&(0,_.jsx)("span",{className:h,children:(0,_.jsx)(o.S,{size:"small"})}),(0,_.jsx)(s.a,{as:"span",className:g,variant:"bodySmall","data-testid":"location-name",children:y})]})]})]})}))},4088:(e,t,a)=>{a.d(t,{c:()=>d});var n=a(96651),s=a(14788),o=a(12100),i=a(36351),r=a(37496),c=a(47180),l=a(2488);const d=(0,n.memo)((e=>{const{concert:t,isVirtual:a,onClick:n}=e,{venue:d,location:m}=t,u=t.artists[0];return(0,l.jsx)(c.c,{uri:(0,s.c9)(t.id).toURI(),title:(0,r._0)(t),imageUrl:u.imageUri,date:t.startDate.localDate,location:a?d:[d,m].join(o._s.getSeparator()),firstParty:(0,i.oF)(t),onClick:n})}))},36351:(e,t,a)=>{a.d(t,{Ip:()=>u,K6:()=>m,Sm:()=>v,Uj:()=>r,a8:()=>l,ii:()=>d,oF:()=>c,uU:()=>o});a(73952),a(91372);var n=a(27048),s=a(76312);const o=(e,t)=>{if(!e)return"/concerts";const a=t?.normalize().replaceAll(/\W+/g,"-");return a?`/concerts/location/${e}-${a}`:`/concerts/location/${e}`},i=10;function r(e){if(0===e.length)return[];if(0===e[0].events.length)return[];const t=[];let a={date:e[0].events[0].openingDate.slice(0,i),events:[]};for(const n of e)for(const e of n.events){const n=e.openingDate.slice(0,i);a.date!==n&&(t.push(a),a={date:n,events:[]}),a.events.push(e)}return t.push(a),t}const c=e=>e.ticketers.some((e=>"spotify"===e.partnerDisplayName.toLowerCase())),l=e=>e.concerts.some((({concert:e})=>c(e))),d=e=>{const t=new Date(e);t.setDate(e.getDate()+(6-e.getDay()));const a=new Date(t);return a.setDate(t.getDate()+1),{from:t,to:a}},m=e=>{const t=new Date(e);t.setDate(e.getDate()+(6-e.getDay()));const a=new Date(t);a.setDate(t.getDate()+7);const n=new Date(a);return n.setDate(a.getDate()+1),{from:a,to:n}},u=(e,t)=>!!(e?.from&&e?.to&&t?.from&&t?.to)&&((0,n.W)(e.from,t.from)&&(0,n.W)(e.to,t.to)),v=e=>(0,s.G)(e,{representation:"date"})},8240:(e,t,a)=>{a.r(t),a.d(t,{default:()=>ca});var n=a(96651),s=a(4564),o=a(33220),i=a(72199),r=a(32976),c=a(88280),l=a(87500),d=a(52976),m=a(96560),u=a(20892),v=a(65884),g=a(49232),h=a(47168),p=a(12100),x=a(31860),_=a(1044),j=a(62688),y=a(73372),f=a(68964),N=a(40636),b=a(24544),k=(a(41260),a(27048)),S=a(8004),C=a(49612),I=a(94616),D=a(92628),w=a(12980),L=a(38064),U=a(92376),M=a(29384),F=a(1952),E=a(70300),O=a(1600),B=a(76008),A=a(23460),W=a(20356),G=a(11732),P=a(36351),z=a(86524),H=a(37496);const K="cELOd04or4B6BbTbNWA7",R="CHJYbX33oDik9u4n4ohH",T="woQ0wEe6FL4lsGW05bsb",q="KTDREr8pDWjrmnzXzZ2z",Q="UUTvdEOH2v_rejoXdl9Z",J="cBbTozR921ppaoNZP0Uh",V="SNyyQ0t_VvlWzzB9li7v",Y="lwO4iko6mhCUgZN1s9AW",$="akvZI06vqHOow1pOL29J",X="WWZp3WM0maWJzl2qWEHE",Z="YdkAHxbDekz9SiAxHG6M",ee="AK37djOBJ2BuJOGuG1kQ",te="JfYURQbEA_ntMsMZV6tK",ae="du0mOGaZfHg3hsHwRMIu",ne="Rvzy4ltiiHIp9mvlxf0c",se="uEXt8BtfJCONUNVYrAHn";var oe=a(2488);const ie=(0,n.memo)((e=>{const{concert:t,position:a,modalSpec:s}=e,{id:o,venue:i,location:r}=t,c=t.startDate.localDate,l=(0,z.mY)(c),d="ONLINE"===t.category,m=(0,n.useMemo)((()=>s?.eventRowFactory({position:a,uri:`spotify:concert:${t.id}`})),[s,a,t]),u=(0,N.Mk)();return(0,oe.jsxs)(G.Link,{to:`/concert/${t.id}`,className:Y,onClick:()=>{m&&u.logInteraction(m.hitUiNavigate({destination:`/concert/${o}`}))},children:[(0,oe.jsxs)("div",{className:$,"aria-hidden":!0,children:[(0,oe.jsx)(S.a,{as:"div",variant:"marginalBold",className:X,children:(0,z.WQ)(l)}),(0,oe.jsx)(S.a,{as:"div",variant:"bodyMediumBold",className:Z,children:(0,z.is)(l)})]}),(0,oe.jsxs)("div",{className:ee,children:[(0,oe.jsx)(S.a,{as:"div",variant:"bodySmallBold",className:te,"data-testid":"event-title",children:(0,H.cL)(t)}),(0,oe.jsx)(E.K,{children:(0,z.QD)(l)}),(0,oe.jsxs)(S.a,{as:"div",variant:"bodySmall",className:ae,children:[(0,z.eM)(l)," • ",(0,z.HI)(l)]}),(0,oe.jsx)("span",{className:se,children:(0,P.oF)(t)&&(0,oe.jsx)(O.S,{size:"small"})}),(0,oe.jsx)(S.a,{as:"div",variant:"bodySmall",className:ne,"data-testid":"event-venue",children:d?i:[i,r].join(p._s.getSeparator())})]})]},t.id)})),re=(0,n.memo)((e=>{const{event:t,locationName:a,onClose:s,feedSpec:o}=e,i=t?.concerts[0]?.concert,r=i?.artists[0],c=(0,n.useMemo)((()=>o?.groupedEventModalFactory({uri:r?.uri||""})),[o,r]),l=(0,N.Mk)(),d=(0,N.K2)(c);if(!t||!i||!r)return null;const m=()=>{c&&l.logInteraction(c.closeButtonFactory().hitUiHide()),s()};return(0,oe.jsx)(W.c,{contentLabel:p._s.get("live_events.label"),isOpen:!0,className:K,onRequestClose:m,children:(0,oe.jsxs)("section",{className:R,ref:d,children:[(0,oe.jsx)("div",{className:T,children:(0,oe.jsx)(ce,{"aria-label":p._s.get("close"),iconOnly:B.K,size:"small",onClick:m})}),(0,oe.jsxs)("div",{className:q,children:[(0,oe.jsx)(A.W,{height:"48",width:"48",className:Q,src:r.imageUri}),(0,oe.jsxs)("div",{className:J,children:[(0,oe.jsx)(S.a,{as:"h3",variant:"bodyMediumBold",className:V,"data-testid":"event-venue",children:r.name}),(0,oe.jsx)(S.a,{as:"h3",variant:"bodySmall","data-testid":"event-venue",children:`${p._s.get("concerts.count_near_location",t.concerts.length,a)}`})]})]}),t.concerts.map(((e,t)=>(0,oe.jsx)(ie,{concert:e.concert,position:t,modalSpec:c},e.concert.id)))]})})}));var ce=(0,F.cp)(m.u).withConfig({displayName:"ConcertFeedGroupedModal___StyledButtonTertiary",componentId:"sc-1o845wh-0"})({color:"#FFFFFF",backgroundColor:"#000000",cursor:"pointer"}),le=a(40468),de=a(86620),me=a(63192),ue=a(84264),ve=a(56872);const ge=async()=>(await(0,ve.yU)(ue.W.getInstance())).body,he=6e5,pe=e=>(0,le.U)({queryKey:["concerts",e],queryFn:()=>(async e=>(await(0,ve.eN)(ue.W.getInstance(),e)).body)(e.geonameId),staleTime:he,placeholderData:de.iq}),xe=e=>(0,me.S)({queryKey:["concerts","all",e],queryFn:({pageParam:t})=>(async(e=1,t)=>{const{geonameId:a,startDate:n,endDate:s}=t;return(await(0,ve.ik)(ue.W.getInstance(),{page:e,geonameId:a,startDate:n,endDate:s})).body})(t,e),staleTime:he,initialPageParam:1,placeholderData:de.iq,getNextPageParam:(e,t)=>{if(!(t.length>=50)&&0!==e.events.length)return t.length+1}}),_e=e=>(0,le.U)({queryKey:["concerts","popular",{geonameId:e}],queryFn:()=>(async e=>(await(0,ve.oJ)(ue.W.getInstance(),void 0,e)).body)(e),staleTime:he,placeholderData:de.iq}),je=/^(\d+)/,ye=e=>{const t=e?.match(/(202\d)-([01]\d)-([0-3]\d)/);if(!t)return;const[,a,n,s]=t;return new Date(parseInt(a,10),parseInt(n,10)-1,parseInt(s,10))},fe=e=>{const t=(()=>{const{location:e}=(0,o.W4)(),[,t]=e?.match(je)||[];if(t)try{return parseInt(t,10)}catch(e){return}})(),[a]=(0,i.k5)(),n=a.get("filter")?.trim();return e.isAnonymous&&!n||"all"===n?{type:"all",geonameId:t}:e.isInterestedEnabled&&"saved"===n?{type:"saved"}:{type:"foryou",geonameId:t}};var Ne=a(61984),be=a(7296),ke=a(26208);const Se="MVPegsivznZB6gdkcnkH",Ce="MlK79hskRbFrN2OBjMkl",Ie="VxaXFH9Uq1NU0LtsVhIu",De="UDVDNa40iTSPS9uHCG7Q",we="vktIWsUczavLRrl4SkRt",Le="Y1JeRPqrmHKXI1KcstYN",Ue="ofURwIKv0qEXJGTraIis",Me="fN_lJHkYih9H3j9YSEzS",Fe="LOJZO2MnGW5dCIawF767",Ee="tyc7QRlEJigVFIAeLGOB",Oe="PoljWhTLU3MKqIx2gSPY",Be="ajxCNAuBJSgYfKUUBWBT",Ae="WR2h2Li5XTrBn_Rdme_k",We="WNhsvOyu4doInF525pLE",Ge="qSR4imCvzdznIQ4F2kBO",Pe="BCDMgFFqzEyzC1UqkW3t",ze="jFxUCv1gagc6erXmpgYw",He="XOS1JS9iDK8dgeF3GeL5",Ke="LNAJMvRlTPqWsmZvV7Kg",Re="jP10ZUl0Jn2Ijue3fZux",Te="ncN9bwTgIRk6xruAt5T8",qe="hKG8XDR5S00bjBAibgbI",Qe="XMhrCtHCVSPsNW67vM1m",Je="vT0t_YE1HgmbnHLLhJD9",Ve=(0,n.memo)((e=>{const{geonameId:t,locationName:a,spec:s}=e,[o,i]=(0,n.useState)(!1),r=(0,N.K2)(s),c=`https://concerts.spotifycdn.com/feed_city_images_1/${t}.jpg`;return(0,n.useEffect)((()=>{const e=()=>{i(!0)},t=()=>{i(!1)},a=new Image;return a.addEventListener("load",e),a.addEventListener("error",t),a.src=c,()=>{a.removeEventListener("load",e),a.removeEventListener("error",t)}}),[c]),(0,oe.jsx)(oe.Fragment,{children:(0,oe.jsxs)("div",{className:qe,ref:r,children:[o&&(0,oe.jsx)(A.W,{src:c,className:Qe,circle:!0,imageHeight:"56px",imageWidth:"56px"}),(0,oe.jsxs)("div",{children:[(0,oe.jsx)(S.a,{variant:"bodyMedium",semanticColor:"textSubdued",as:"p",children:p._s.get("live_events.city_info_find_tickets",a)}),(0,oe.jsx)(S.a,{variant:"bodyMedium",semanticColor:"textSubdued",as:"p",children:p._s.get("live_events.city_info_view_details")})]})]})})}));var Ye=a(52544),$e=(a(60568),a(8340)),Xe=a(44772);const Ze="eFIu3aQJuKmf6H4Lb18K",et="LPNL3DZ89Iisp8TMArD3",tt="moVCbo9Ao5YJ5PsH4Qdz",at="URXDMjhb8pQWIDaBrCPC",nt="a3oYct1knu9af60A0v6g",st="qbIrubbolsixlgVkhO5r",ot="xHihsEV_0W6kpm0wHsXA",it="T8po_YH39Q9dhAsLAhec",rt={formatCaption:e=>p._s.formatDate(e,{month:"long",year:"numeric"}),formatDay:e=>p._s.formatDate(e,{day:"numeric"}),formatWeekdayName:e=>p._s.formatDate(e,{weekday:"short"})},ct=(0,n.memo)((e=>{const{onDone:t,onClose:a,spec:s}=e,[o,i]=(0,n.useState)(e.dateRange),r=(0,Xe.k)(),c=(0,N.K2)(s),l=(0,N.Mk)(),d=new Date,u=(0,P.ii)(d),v=(0,P.K6)(d),g=(0,P.Ip)(o,u),h=(0,P.Ip)(o,v);return(0,oe.jsx)("div",{ref:c,children:(0,oe.jsx)(W.c,{isOpen:!0,children:(0,oe.jsxs)("section",{className:Ze,children:[(0,oe.jsx)(m.u,{className:et,iconOnly:B.K,size:"small",onClick:a,"aria-label":p._s.get("close_button_action")}),(0,oe.jsxs)("div",{className:tt,children:[(0,oe.jsx)(S.a,{as:"h3",variant:"bodyMediumBold",children:p._s.get("live_events.date_picker_dialog_title")}),(0,oe.jsxs)("div",{className:at,children:[(0,oe.jsx)(D.a,{className:nt,size:"md",selectedColorSet:"brightAccent",selected:g,onClick:()=>{i(g?void 0:u),s&&l.logInteraction(s.datePresetButtonFactory({identifier:"thisWeekend",position:0}).hitUiSelect())},children:p._s.get("live_events.this_weekend_preset")}),(0,oe.jsx)(D.a,{className:nt,size:"md",selectedColorSet:"brightAccent",selected:h,onClick:()=>{i(h?void 0:v),s&&l.logInteraction(s.datePresetButtonFactory({identifier:"nextWeekend",position:1}).hitUiSelect())},children:p._s.get("live_events.next_weekend_preset")})]})]}),(0,oe.jsx)(Ye.Yi,{mode:"range",selected:o,onSelect:i,numberOfMonths:2,defaultMonth:e.dateRange?.from,fromDate:new Date,formatters:rt,dir:r?"rtl":"ltr",modifiersClassNames:{today:st}}),(0,oe.jsxs)("div",{className:ot,children:[(0,oe.jsx)(m.u,{className:it,size:"small",onClick:()=>{i(void 0)},disabled:!o?.from,children:p._s.get("live_events.date_picker_dialog_clear")}),(0,oe.jsx)($e.g,{size:"small",onClick:()=>{if(o?.from){const{from:e,to:a}=o;t({from:e,to:a||e})}else t()},children:p._s.get("live_events.date_picker_dialog_done")})]})]})})})}));var lt=a(14788),dt=a(4088),mt=a(57632);const ut="pU4WoqT8T6PmtjPbFtK0",vt="FC5Y_KFJ9rJyTpydqtOW",gt="AAYLcavkBdCuebn9AQxT",ht="lYHCmxpdReachiOORWGo",pt="JtKEdtTtcK7s6EpGecaC",xt="XuH9DoZCf0aVJ2BxQkTB",_t="myHDa69cI5CHC8fhIhkG",jt=(0,n.memo)((e=>{const{event:t,onClick:a}=e,s=(0,n.useCallback)((()=>a(t)),[t,a]),o=(0,z.mY)(t.openingDate),i=(0,z.mY)(t.closingDate),r=t.concerts[0].concert,c=r.artists[0];return(0,oe.jsxs)(m.u,{onClick:s,className:ut,component:"div","data-testid":"concert-card",role:"button",children:[c.imageUri&&(0,oe.jsx)(mt.U,{children:(0,oe.jsx)("div",{role:"img",className:_t,style:{backgroundImage:`linear-gradient(180deg, rgba(18, 18, 18, 0) 0%, rgba(6, 6, 6, 0.6) 60%, rgba(0, 0, 0, 0.7) 100%), url(${c.imageUri})`}})}),(0,oe.jsx)("time",{className:vt,dateTime:o.toISOString(),children:(0,oe.jsx)(S.a,{as:"p",variant:"bodySmallBold",children:(0,z.Ow)(o,i)})}),(0,oe.jsxs)("div",{className:gt,dir:"auto",children:[(0,oe.jsx)(S.a,{as:"h2",variant:"bodyMediumBold",className:ht,children:(0,H._0)(r)}),(0,oe.jsxs)("div",{className:pt,children:[(0,P.a8)(t)&&(0,oe.jsx)("span",{className:xt,children:(0,oe.jsx)(O.S,{size:"small"})}),(0,oe.jsx)(S.a,{as:"span",variant:"bodySmall","data-testid":"concerts-count",children:p._s.get("concerts.count",t.concerts.length)})]})]})]})})),yt=(0,n.memo)((e=>{const{event:t,position:a,sectionSpec:s,onOpenGroupedEvent:o}=e,i=t.concerts[0]?.concert,r=i?.id,c=i&&(0,lt.c9)(i.id).toURI(),l=(0,N.Mk)(),d=(0,n.useMemo)((()=>s?.eventCardFactory({identifier:r??"",position:a,uri:c??""})),[s,r,c,a]),m=(0,N.K2)(d),u=e=>{o(e),d&&l.logInteraction(d.hitUiReveal())};if(t.concerts.length>1)return(0,oe.jsx)("div",{ref:m,children:(0,oe.jsx)(jt,{event:t,onClick:u})});return(0,oe.jsx)("div",{ref:m,children:(0,oe.jsx)(dt.c,{concert:i,isVirtual:"online"===t.source,onClick:()=>{d&&l.logInteraction(d.hitUiNavigate({destination:c}))}})})})),ft="yLIDHkmBrjsAVNMCcFM_",Nt="qr_9NXyk7D0t6wclM5R0",bt="mDxkFuOd3TBAQI2gXatq",kt="AQ8ZFs5U45GPiyJnqEvt",St="E8DcbdVmmoGfC8R8S1Vw",Ct="wzS5PwxEhferQEdjumt0",It="E0zwnbwA3HzqNi2BV4eq",Dt=(0,n.memo)((e=>{const{event:t,onClick:a}=e,s=(0,n.useCallback)((()=>a(t)),[t,a]),o=(0,z.mY)(t.openingDate),i=(0,z.mY)(t.closingDate),r=t.concerts[0].concert,c=r.artists[0];return(0,oe.jsxs)("div",{className:Ct,onClick:s,onKeyPress:s,role:"link",tabIndex:0,children:[(0,oe.jsx)(A.W,{src:c?.imageUri,alt:"",role:"presentation",className:ft}),(0,oe.jsxs)("div",{className:Nt,children:[(0,oe.jsx)(S.a,{as:"span",variant:"bodyMediumBold",className:bt,"data-testid":"event-title",children:(0,H._0)(r)}),(0,oe.jsx)(S.a,{as:"span",variant:"bodyMedium",className:kt,children:(0,z.Ow)(o,i)}),(0,oe.jsxs)(S.a,{as:"span",variant:"bodyMedium",className:St,"data-testid":"event-venue",children:[(0,P.a8)(t)&&(0,oe.jsx)(O.S,{size:"small",className:It}),p._s.get("concerts.count",t.concerts.length)]})]})]})})),wt=(0,n.memo)((e=>{const{concert:t,isVirtual:a,onClick:n}=e,{venue:s,location:o}=t,i=t.artists[0],r=(0,z.mY)(t.startDate.localDate);return(0,oe.jsxs)(G.Link,{to:`/concert/${t?.id}`,className:Ct,"data-testid":"concert-row",onClick:n,children:[(0,oe.jsx)(A.W,{src:i?.imageUri,alt:"",role:"presentation",className:ft}),(0,oe.jsxs)("div",{className:Nt,children:[(0,oe.jsx)(S.a,{as:"span",variant:"bodyMediumBold",className:bt,"data-testid":"event-title",children:(0,H._0)(t)}),(0,oe.jsxs)(S.a,{as:"span",variant:"bodyMedium",className:kt,children:[(0,z.Mb)(r)," • ",(0,z.HI)(r)]}),(0,oe.jsxs)(S.a,{as:"span",variant:"bodyMedium",className:St,"data-testid":"event-venue",children:[(0,P.oF)(t)&&(0,oe.jsx)(O.S,{size:"small",className:It}),a?s:[s,o].join(p._s.getSeparator())]})]})]})})),Lt=(0,n.memo)((e=>{const{event:t,position:a,sectionSpec:s,onOpenGroupedEvent:o}=e,i=t.concerts[0]?.concert,r=i?.id,c=i&&(0,lt.c9)(i.id).toURI(),l=(0,N.Mk)(),d=(0,n.useMemo)((()=>s?.eventRowFactory({identifier:r??"",position:a,uri:c??""})),[s,r,c,a]),m=(0,N.K2)(d),u=e=>{o(e)};if(t.concerts.length>1)return(0,oe.jsx)("div",{ref:m,children:(0,oe.jsx)(Dt,{event:t,onClick:u})});return(0,oe.jsx)("div",{ref:m,children:(0,oe.jsx)(wt,{concert:i,isVirtual:"online"===t.source,onClick:()=>{d&&l.logInteraction(d.hitUiNavigate({destination:c??""}))}})})})),Ut=(0,n.memo)((e=>{const{eventGroups:t,locationName:a,isLoading:s,feedSpec:o,onOpenGroupedEvent:i,layout:r}=e,c=(0,n.useMemo)((()=>o?.eventSectionFactory({identifier:"all",position:1})),[o]),l=(0,N.K2)(c);return s?(0,oe.jsx)(U.K,{hasError:!1,errorMessage:""}):t?0===t.length||0===t[0].events.length?(0,oe.jsx)(L.o,{title:p._s.get("concerts.error.no_concerts_found_title"),message:p._s.get("concerts.error.no_concerts_found_message",a),renderInline:!0}):(0,oe.jsx)("div",{ref:l,children:t.map((e=>(0,oe.jsxs)("div",{className:We,children:["grid"===r&&(0,oe.jsx)(M.y,{total:e.events.length,title:p._s.formatDate(new Date(`${e.date}T00:00:00`),{weekday:"long",day:"numeric",month:"long",year:"numeric"}),gridConfigOverride:ke.AZ.DEFAULT,showAll:!0,removeOffsetMargin:!0,children:e.events.map(((e,t)=>{const a=e.concerts[0]?.concert;return(0,oe.jsx)(yt,{event:e,position:t,sectionSpec:c,onOpenGroupedEvent:i},a?.id)}))}),"list"===r&&(0,oe.jsxs)("div",{children:[(0,oe.jsx)(S.a,{as:"h2",variant:"titleSmall",semanticColor:"textBase",className:we,children:p._s.formatDate(new Date(`${e.date}T00:00:00`),{weekday:"long",day:"numeric",month:"long",year:"numeric"})}),e.events.map(((e,t)=>{const a=e.concerts[0]?.concert;return(0,oe.jsx)(Lt,{event:e,position:t,sectionSpec:c,onOpenGroupedEvent:i},a?.id)}))]})]},e.date)))}):null})),Mt={month:"short",day:"numeric"},Ft=e=>{if((0,k.W)(e.from,e.to))return p._s.formatDate(e.from,Mt);return`${p._s.formatDate(e.from,Mt)} - ${p._s.formatDate(e.to,Mt)}`},Et=(0,n.memo)((e=>{const{geonameId:t,spec:a,layout:s,onLocationNameChange:r}=e,c=(()=>{const[e]=(0,i.k5)(),t=e.get("startDate")?.trim(),a=e.get("endDate")?.trim(),n=ye(t),s=ye(a);return n&&s&&{from:n,to:s}})(),l=(0,o.i6)(),[,d]=(0,i.k5)(),[m]=(0,i.k5)(),[u,v]=(0,n.useState)(),[g,h]=(0,n.useState)(!1),x=(0,be.w)(),_=(0,n.useMemo)((()=>a?.headerFactory()),[a]),j=(0,n.useMemo)((()=>a?.datePickerModalFactory()),[a]),y=(0,n.useMemo)((()=>a?.cityInfoFactory()),[a]),f=(0,N.Mk)(),{data:b,isLoading:k,hasNextPage:L,isFetchingNextPage:U,fetchNextPage:M}=xe({geonameId:t,startDate:c&&(0,P.Sm)(c.from),endDate:c&&(0,P.Sm)(c.to)}),F=(0,n.useMemo)((()=>(0,P.Uj)(b?.pages??[])),[b?.pages]),E=b?.pages[0]?.userLocation;(0,n.useEffect)((()=>{E&&r?.(E)}),[E,r]);const O=E||p._s.get("concerts.default_location"),B=(0,P.ii)(new Date),A=(0,P.K6)(new Date),W=(0,n.useCallback)((e=>{const t={filter:"all"};if(e&&(t.startDate=(0,P.Sm)(e.from),t.endDate=(0,P.Sm)(e.to),j)){const e=new URLSearchParams(t).toString();f.logInteraction(j.doneButtonFactory({uri:e}).hitUiNavigate({destination:e}))}h(!1),d(t),j&&f.logInteraction(j.doneButtonFactory({uri:new URLSearchParams(t).toString()}).hitUiHide())}),[d,j,f]),G=(0,n.useCallback)((e=>{const t={filter:"all"};(0,P.Ip)(c,e)||(t.startDate=(0,P.Sm)(e.from),t.endDate=(0,P.Sm)(e.to)),d(t)}),[c,d]);return(0,oe.jsxs)("div",{children:[(0,oe.jsx)(w.Q,{children:`${p._s.get("concerts_shows_in")} ${O}`}),(0,oe.jsxs)("div",{className:ze,children:[(0,oe.jsx)(Ne.c,{handleLocationChange:e=>{x({type:"click",intent:"change-live-events-location"}),e?.geonameId&&l({pathname:(0,P.uU)(e.geonameId,e.location),search:`?${m.toString()}`})},locationStr:O,headerSpec:_}),(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(C.w,{className:Pe,iconLeading:I.k,onClick:()=>{h(!0),_&&f.logInteraction(_.datePickerButtonFactory().hitUiReveal())},size:"small",children:c?Ft(c):p._s.get("live_events.date_picker_button_text")}),g&&(0,oe.jsx)(ct,{onClose:()=>{h(!1),j&&f.logInteraction(j.closeButtonFactory().hitUiHide())},onDone:W,dateRange:c,spec:j}),(0,oe.jsx)(D.a,{className:He,size:"sm",selectedColorSet:"brightAccent",selected:(0,P.Ip)(c,B),onClick:()=>{if(G(B),_){const e={startDate:(0,P.Sm)(B.from),endDate:(0,P.Sm)(B.to)},t=new URLSearchParams(e).toString();f.logInteraction(_.datePresetButtonFactory({uri:t,identifier:"thisWeekend",position:0}).hitUiNavigate({destination:t}))}},children:p._s.get("live_events.this_weekend_preset")}),(0,oe.jsx)(D.a,{className:He,size:"sm",selectedColorSet:"brightAccent",selected:(0,P.Ip)(c,A),onClick:()=>{if(G(A),_){const e={startDate:(0,P.Sm)(A.from),endDate:(0,P.Sm)(A.to)},t=new URLSearchParams(e).toString();f.logInteraction(_.datePresetButtonFactory({uri:t,identifier:"nextWeekend",position:1}).hitUiNavigate({destination:t}))}},children:p._s.get("live_events.next_weekend_preset")})]})]}),(0,oe.jsx)(Ut,{isLoading:k,locationName:O,eventGroups:F,onOpenGroupedEvent:e=>{v(e);const t=e.concerts[0]?.concert.artistUris[0];x({type:"click",intent:"open-grouped-live-event",targetUri:t})},feedSpec:a,layout:s}),L&&(0,oe.jsx)("div",{className:Ge,children:(0,oe.jsx)(C.w,{disabled:U,onClick:()=>{M()},children:p._s.get("concerts.load_more")})}),(0,oe.jsx)(re,{event:u,locationName:O,feedSpec:a,onClose:()=>v(void 0)}),(0,oe.jsx)(S.a,{variant:"marginal",semanticColor:"textSubdued",children:p._s.get("live_events.disclaimer")}),b&&b.pages[0]&&b.pages[0].userLocationGeonameId&&(0,oe.jsx)(Ve,{geonameId:b.pages[0].userLocationGeonameId,locationName:O,spec:y})]})}));var Ot=a(52720),Bt=a(34016),At=a(10124),Wt=a.n(At),Gt=a(4484),Pt=a(15040),zt=a(81604);const Ht=(0,n.memo)((e=>{const{title:t="",identifier:a,position:s,events:o,feedSpec:i,onOpenGroupedEvent:r,layout:c}=e,l=(0,n.useMemo)((()=>i?.eventSectionFactory({identifier:a,position:s})),[i,a,s]),d=(0,N.K2)(l),m=(0,g.IP)(Pt.M1F);return 0===o.length?null:(0,oe.jsxs)("div",{className:Se,ref:d,children:["grid"===c&&(0,oe.jsx)(zt.oL,{value:"headered-grid",index:s,children:(0,oe.jsx)(M.y,{total:o.length,title:t,gridConfigOverride:ke.AZ.DEFAULT,showAll:!0,removeOffsetMargin:!0,className:Wt()({[Gt.c.titleSpacing]:m}),children:o.map(((e,t)=>{const a=e.concerts[0]?.concert;return(0,oe.jsx)(yt,{event:e,position:t,sectionSpec:l,onOpenGroupedEvent:r},a?.id)}))})}),"list"===c&&(0,oe.jsxs)("div",{children:[(0,oe.jsx)(S.a,{as:"h2",variant:"titleSmall",semanticColor:"textBase",className:we,children:t}),o.map(((e,t)=>{const a=e.concerts[0]?.concert;return(0,oe.jsx)(Lt,{event:e,position:t,sectionSpec:l,onOpenGroupedEvent:r},a?.id)}))]})]})})),Kt=(0,n.memo)((e=>{const{spec:t,layout:a,onLocationNameChange:s}=e,[r,c]=(0,n.useState)(),[l]=(0,i.k5)(),d=_e(e.geonameId),m=d.data?.userLocation||p._s.get("concerts.default_location"),u=(0,n.useMemo)((()=>t?.headerFactory()),[t]),v=(0,o.i6)();return(0,n.useEffect)((()=>{d.data?.userLocation&&s?.(d.data.userLocation)}),[d.data?.userLocation,s]),(0,oe.jsxs)("div",{children:[(0,oe.jsx)(w.Q,{children:`${p._s.get("concerts_shows_in")} ${m}`}),(0,oe.jsx)("div",{className:ze,"data-testid":"location-selector",children:(0,oe.jsx)(Ne.c,{handleLocationChange:e=>{(0,Ot.A)({type:"click",intent:"change-live-events-location"}),e?.geonameId&&v({pathname:(0,P.uU)(e.geonameId,e.location),search:`?${l.toString()}`})},locationStr:m,headerSpec:u})}),(0,oe.jsxs)("div",{className:Ke,children:[(0,oe.jsx)(S.a,{variant:"titleSmall",semanticColor:"textBase",children:p._s.get("live_events.for_you_anonymous_heading")}),(0,oe.jsx)(S.a,{variant:"bodyMedium",className:Re,semanticColor:"textSubdued",children:p._s.get("live_events.for_you_anonymous_subheading")}),(0,oe.jsx)($e.g,{colorSet:"invertedLight",className:Te,onClick:()=>(0,Bt.mq)(),children:p._s.get("live_events.sign_up_free")})]}),d.data&&(0,oe.jsx)(Ht,{title:p._s.get("concerts.popular_concerts_near",m),identifier:"popular",position:0,events:d.data.events,onOpenGroupedEvent:e=>{c(e);const t=e.concerts[0]?.concert.artistUris[0];(0,Ot.A)({type:"click",intent:"open-grouped-live-event",targetUri:t})},feedSpec:t,layout:a}),(0,oe.jsx)(re,{event:r,locationName:m,feedSpec:t,onClose:()=>c(void 0)}),(0,oe.jsx)(S.a,{variant:"marginal",semanticColor:"textSubdued",children:p._s.get("live_events.disclaimer")}),d.data&&d.data.userLocationGeonameId&&(0,oe.jsx)(Ve,{geonameId:d.data.userLocationGeonameId,locationName:m})]})}));a(73952),a(39568);const Rt=(0,n.memo)((e=>{const{isLoading:t,events:a,locationName:n,spec:s,layout:o,onOpenGroupedEvent:i}=e;if(t)return(0,oe.jsx)(U.K,{hasError:!1,errorMessage:""});if(0===a.length)return(0,oe.jsx)(L.o,{title:p._s.get("concerts.error.no_concerts_found_title"),message:p._s.get("concerts.error.no_concerts_found_message",n),renderInline:!0});const r=(e=>{const t={popular:[],recommended:[],online:[]};return e.forEach((e=>{switch(e.source){case"recommendation":t.recommended.push(e);break;case"popular":t.popular.push(e);break;case"online":t.online.push(e)}})),t})(a);return(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(Ht,{title:p._s.get("concerts_upcoming_virtual_events"),identifier:"online",position:0,events:r.online,onOpenGroupedEvent:i,feedSpec:s,layout:o}),(0,oe.jsx)(Ht,{title:p._s.get("concerts_recommended_for_you"),identifier:"recommended",position:1,events:r.recommended,onOpenGroupedEvent:i,feedSpec:s,layout:o}),(0,oe.jsx)(Ht,{title:p._s.get("concerts.popular_concerts_near",n),identifier:"popular",position:2,events:r.popular,onOpenGroupedEvent:i,feedSpec:s,layout:o})]})}));var Tt=a(92280),qt=a(78390),Qt=a(40104),Jt=a(40068),Vt=a(88272),Yt=a(99972);const $t=new Vt.a("promoCardPlaylist","query","ad0959194c2cec8bf10b87c74923628dd7c2ef2abbd217374279b0bc728c3cc2",null),Xt="Cot6ZntaldMo77XCx1dt",Zt="vfWT92cAm89qtD3Lwfrc",ea="XyJgy3JOLfeFBo2CiltA",ta="UI2hGxMrqbScQtyg3FzT",aa="mnwdEtmP084CWa7aUEzN",na=()=>{const e=(0,Tt.A)(),t=(0,n.useContext)(Qt.Iv),{data:a}=(0,le.U)({queryKey:["cny-resolve"],queryFn:()=>t.resolvePlaylistFormatURI("spotify:playlist-format:concerts-near-you"),enabled:!e,staleTime:1/0}),{data:s}=(o={uri:a},i={enabled:!!a},(0,Yt.U)($t,o,i));var o,i;if("Playlist"===s?.playlistV2.__typename)return s.playlistV2},sa=(0,n.memo)((e=>{const t=na();if(!t)return null;const a=(0,Jt.C)(t.images.items[0]?.sources,{desiredSize:88});return(0,oe.jsxs)(G.default,{to:t.uri,className:Xt,children:[(0,oe.jsx)(qt.W,{src:a?.url,loading:"lazy",alt:"",ariaHidden:!0,className:Zt}),(0,oe.jsxs)("div",{className:ea,children:[(0,oe.jsx)(S.a,{as:"h3",variant:"bodyMediumBold",className:ta,children:t.name}),(0,oe.jsx)(S.a,{as:"p",variant:"bodySmall",className:aa,children:t.description})]})]})})),oa=(0,n.memo)((e=>{const{geonameId:t,spec:a,layout:s,onLocationNameChange:i}=e,r=(0,o.i6)(),[c,l]=(0,n.useState)(),d=(0,be.w)(),m=(0,n.useMemo)((()=>a.headerFactory()),[a]),{data:u,isLoading:v}=pe({geonameId:t});(0,n.useEffect)((()=>{u?.userLocation&&i?.(u.userLocation)}),[u?.userLocation,i]);const h=(0,g.IP)(Pt.QdQ,{loadingValue:!1}),x=u?.userLocation||p._s.get("concerts.default_location");return(0,oe.jsxs)("div",{children:[(0,oe.jsx)(w.Q,{children:`${p._s.get("concerts_shows_in")} ${x}`}),(0,oe.jsx)("div",{className:ze,"data-testid":"location-selector",children:(0,oe.jsx)(Ne.c,{handleLocationChange:e=>{d({type:"click",intent:"change-live-events-location"}),e?.geonameId&&r((0,P.uU)(e.geonameId,e.location))},locationStr:x,headerSpec:m})}),h&&(0,oe.jsx)("div",{className:Je,children:(0,oe.jsx)(sa,{})}),(0,oe.jsx)(Rt,{isLoading:v,events:u?.events||[],locationName:x,spec:a,onOpenGroupedEvent:e=>{l(e);const t=e.concerts[0]?.concert.artistUris[0];d({type:"click",intent:"open-grouped-live-event",targetUri:t})},layout:s}),(0,oe.jsx)(re,{event:c,locationName:x,feedSpec:a,onClose:()=>l(void 0)}),(0,oe.jsx)(S.a,{variant:"marginal",semanticColor:"textSubdued",children:p._s.get("live_events.disclaimer")}),u&&u.userLocationGeonameId&&(0,oe.jsx)(Ve,{geonameId:u.userLocationGeonameId,locationName:x})]})})),ia=(0,n.memo)((e=>{const{spec:t,layout:a}=e,[s,o]=(0,n.useState)(),i=(0,le.U)({queryKey:["savedConcerts"],queryFn:ge}),r=(0,be.w)(),c=i.data?.userLocation,l=c||p._s.get("concerts.default_location");return(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(w.Q,{children:`${p._s.get("live_events.label")}`}),i.data?.events.length?(0,oe.jsx)(oe.Fragment,{children:(0,oe.jsx)(Ht,{title:p._s.get("concerts_upcoming"),identifier:"saved",position:0,events:i.data?.events,feedSpec:t,onOpenGroupedEvent:e=>{o(e);const t=e.concerts[0]?.concert.artistUris[0];r({type:"click",intent:"open-grouped-live-event",targetUri:t})},layout:a})}):(0,oe.jsxs)("div",{className:Fe,children:[(0,oe.jsx)(S.a,{as:"h2",variant:"titleSmall",semanticColor:"textBase",className:Be,children:p._s.get("concerts_interested_in_live_events")}),(0,oe.jsx)(S.a,{as:"p",className:Ae,children:p._s.get("concerts_no_events_description")}),(0,oe.jsx)(G.default,{to:"/concerts",className:Ee,children:(0,oe.jsx)(C.w,{as:"span",className:Oe,children:p._s.get("concerts_browse_more_events")})})]}),(0,oe.jsx)(S.a,{variant:"marginal",semanticColor:"textSubdued",children:p._s.get("live_events.disclaimer")}),(0,oe.jsx)(re,{event:s,locationName:l,feedSpec:t,onClose:()=>o(void 0)})]})})),ra=r.wv$,ca=()=>{const{isAnonymous:e}=(0,s.w1)(f.cx),t=(0,o.IT)(),a=t.pathname+t.search,r=(0,N.Mk)(),k=(0,g.IP)(b.MD),[S,C]=(0,n.useState)("grid"),{spec:I}=(0,N.gp)(h.M,{}),D=fe({isAnonymous:e,isInterestedEnabled:k}),w=(0,n.useMemo)((()=>I.headerFactory().liveEventsNavbarFactory({uri:a,reason:D.type})),[I,D,a]),L=(0,N.K2)(w),[U,M]=(0,n.useState)(),F=e=>{const a=`${t.pathname}?filter=${e}`,n=I.headerFactory().liveEventsNavbarFactory({uri:a,reason:e}).hitUiNavigate({destination:a});r.logInteraction(n)},E=()=>{const e=I.headerFactory().layoutToggleFactory().hitToggleState({stateBeforeToggle:S,stateAfterToggle:"grid"===S?"list":"grid"});r.logInteraction(e),C("grid"===S?"list":"grid")},O=e&&U?p._s.get("live_events.location_concert_tickets",U):p._s.get("live_events.label");return(0,oe.jsxs)("section",{className:Ce,children:[(0,oe.jsxs)(_.I1,{size:_.Yj.SMALL,backgroundColor:ra,children:[(0,oe.jsx)(_.a8,{children:(0,oe.jsx)(_.on,{children:O})}),(0,oe.jsx)(j.E,{children:(0,oe.jsx)(y.e,{text:O})})]}),(0,oe.jsxs)("div",{className:Ie,children:[(0,oe.jsx)(x.E,{backgroundColor:ra}),(0,oe.jsxs)("div",{className:Ue,ref:L,children:[(0,oe.jsx)(c.Y,{list:(0,oe.jsx)("nav",{"aria-label":"live events navbar",children:(0,oe.jsxs)(l.a,{children:[(0,oe.jsx)(d.b,{id:"for_you_link",label:p._s.get("live_events.for_you_tab"),active:"foryou"===D.type,className:Me,component:i.cH,onClick:()=>F("foryou"),sentenceCase:!0,to:{search:"filter=foryou"}},"foryou"),(0,oe.jsx)(d.b,{id:"concerts_all_link",label:p._s.get("live_events.all_events_tab"),active:"all"===D.type,className:Me,component:i.cH,onClick:()=>F("all"),sentenceCase:!0,to:{search:"filter=all"}},"all"),!e&&k&&(0,oe.jsx)(d.b,{id:"concerts_interested_link",label:p._s.get("concerts_interested"),active:"saved"===D.type,className:Me,component:i.cH,onClick:()=>F("saved"),sentenceCase:!0,to:{search:"filter=saved"}},"saved")]})})}),"grid"===S&&(0,oe.jsx)(m.u,{"aria-label":p._s.get("concerts.feed_list_layout"),iconOnly:u.i,className:Le,onClick:E,size:"small"}),"list"===S&&(0,oe.jsx)(m.u,{"aria-label":p._s.get("concerts.feed_grid_layout"),iconOnly:v.M,className:Le,onClick:E,size:"small"})]}),(0,oe.jsxs)("div",{className:De,children:[e&&"foryou"===D.type&&(0,oe.jsx)(Kt,{geonameId:D.geonameId,spec:I,layout:S,onLocationNameChange:M}),!e&&"foryou"===D.type&&(0,oe.jsx)(oa,{geonameId:D.geonameId,spec:I,layout:S,onLocationNameChange:M}),"all"===D.type&&(0,oe.jsx)(Et,{geonameId:D.geonameId,spec:I,layout:S,onLocationNameChange:M}),"saved"===D.type&&(0,oe.jsx)(ia,{spec:I,layout:S})]})]})]})}}}]);
//# sourceMappingURL=xpui-routes-collection-concerts.js.map