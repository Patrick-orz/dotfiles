"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[2780],{26760:(e,t,i)=>{i.d(t,{U:()=>b});var n=i(8004),l=i(8340),a=i(53048),s=i(84960),o=i(56948),r=i(2488);const d={[a.u_.MEDIUM]:"titleMedium",[a.u_.LARGE]:"titleMedium",[a.u_.XLARGE]:"headlineMedium"},c={[a.u_.LARGE]:"bodyMedium",[a.u_.XLARGE]:"bodyMediumBold"},u={[a.u_.LARGE]:"bodySmall",[a.u_.XLARGE]:"bodySmall"},b=({title:e,subtitle:t,body:i,footnote:b,buttonText:h,callToActionClicked:m})=>{const x=(0,a.oV)(),_=x&&d[x]||"titleSmall",v=x&&c[x]||"bodySmall",g=x&&u[x]||"marginal";return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.a,{as:"h1",variant:_,semanticColor:"textBase",className:o.c.title,children:e}),(0,r.jsx)(n.a,{as:"h2",variant:v,semanticColor:"textSubdued",className:o.c.subtitle,children:t}),i,m&&(0,r.jsx)(l.g,{className:o.c.button,colorSet:"invertedLight",onClick:m,"data-testid":s.YX,children:h}),b&&(0,r.jsx)(n.a,{as:"p",variant:g,semanticColor:"textSubdued",className:o.c.note,children:b})]})}},32760:(e,t,i)=>{i.d(t,{A:()=>p});var n=i(10124),l=i.n(n),a=i(12100),s=i(74712),o=i(12980),r=i(53048),d=i(26760),c=i(84960);const u="NTT5CathoDEMjrmgfv9y",b="WmmNhmwHDNvDxInfukYO";var h=i(2488);const m=e=>(0,h.jsx)("div",{className:u,children:(0,h.jsx)("div",{className:b,children:(0,h.jsx)("svg",{width:e.iconSize,height:e.iconSize,fill:"currentColor",viewBox:"0 0 64 64",xmlns:"http://www.w3.org/2000/svg",children:(0,h.jsx)("path",{d:"M33 31.998v-23h-2v23H8v2h23v23h2v-23h23v-2z"})})})});var x=i(56948);const _={name:"",username:"",image_url:null,hash:""},v={[r.u_.MEDIUM]:164,[r.u_.LARGE]:164,[r.u_.XLARGE]:270},g=(e,t)=>(0,h.jsx)(s.C,{label:a._s.get("web-player.blend.invite.button-title"),images:[],width:e,userIconSize:"xxlarge",customPlaceholder:(0,h.jsx)(m,{iconSize:t}),piled:!0}),p=({invitation:e,callToActionClicked:t,breakpointEltRef:i})=>{const n=!!e.members?.length,u=n&&e.members?.[0]||e.recipient||_,b=n&&e.recipient||null,m=(0,r.oV)(),p=m&&v[m]||128,E=Math.round(.475*p);return(0,h.jsxs)("div",{className:l()(x.c.container,x.c.TwoUsers),"data-testid":c.QF,ref:i,children:[(0,h.jsx)(o.Q,{children:a._s.get("blend.invite.page-title")}),(0,h.jsxs)("div",{className:x.c.facepile,children:[(0,h.jsx)(s.C,{label:u.name,images:[{url:u.image_url??"",width:p,height:p}],width:p,userIconSize:"xxlarge"}),b?(0,h.jsx)(s.C,{label:b.name,images:[{url:b.image_url??"",width:p,height:p}],width:p,userIconSize:"xxlarge",piled:!0}):g(p,E)]}),(0,h.jsx)(d.U,{title:e.title,subtitle:e.subtitle,footnote:e.footnote,buttonText:e.button_text,callToActionClicked:t})]})}},46428:(e,t,i)=>{i.d(t,{c:()=>n});const n=()=>{const e=window.location.href;return window.location.href=`https://accounts.spotify.com/login?continue=${encodeURIComponent(e)}`,null}},84960:(e,t,i)=>{i.d(t,{Ip:()=>s,QF:()=>l,YX:()=>o,__:()=>a,w$:()=>n});const n="blend-deleted-container",l="blend-two-user-container",a="blend-multi-user-container",s="blend-full-container",o="blend-cta-button"},88756:(e,t,i)=>{i.d(t,{IG:()=>a,KO:()=>o,Ok:()=>l,WE:()=>s});var n=i(76404);let l=function(e){return e.PENDING_INVITATION="PENDING_INVITATION",e.READY_TO_JOIN_EMPTY_BLEND="READY_TO_JOIN_EMPTY_BLEND",e.READY_TO_JOIN_ALREADY_CREATED_BLEND="READY_TO_JOIN_ALREADY_CREATED_BLEND",e.MAX_MEMBERS="MAX_MEMBERS",e.ALREADY_JOINED="ALREADY_JOINED",e.DELETED="DELETED",e}({});const a=(e,t)=>e.build().withHost(n.u2).withPath(`/v3/view-invitation/${encodeURIComponent(t)}`).withEndpointIdentifier("v3/view-invitation/{invitationId}").withLocale(e.locale).send(),s=(e,t)=>e.build().withHost(n.u2).withMethod("PUT").withPath(`/v2/join/${encodeURIComponent(t)}`).withEndpointIdentifier("join/{invitationId}").send(),o=e=>e.build().withHost(n.u2).withMethod("POST").withPath("/v1/generate").withEndpointIdentifier("v1/generate").send()},58004:(e,t,i)=>{i.d(t,{y:()=>a});var n=i(48284),l=i(65736);const a=()=>(0,l.C)({[n.u.SMALL]:536,[n.u.MEDIUM]:792,[n.u.LARGE]:1048,[n.u.XLARGE]:1688})},77840:(e,t,i)=>{i.d(t,{k:()=>u});var n=i(96651),l=i(67716),a=i(4564),s=i(12100),o=i(4964),r=i(58303),d=i(68964),c=i(88756);function u(e,t){const{user:i}=(0,a.w1)(d.cx),{enqueueSnackbar:u}=(0,l.uU)(),b=(0,o.W4)(),h=(0,n.useCallback)((async()=>{const e=await(0,c.KO)(b),t=e.body?.invite;if(!t)throw new Error("unable to generate invite link");return i?.display_name?s._s.get("blend.invite.body-with-name",i.display_name,e.body?.invite):s._s.get("blend.invite.body-without-name",e.body?.invite)}),[i?.display_name,b]);return async()=>{try{await(0,r.y)(h()),u(s._s.get("feedback.link-copied"))}catch{u(s._s.get("error.generic"))}if(e&&t){const i=e.inviteButtonFactory().hitCopyToClipboard();t.logInteraction(i)}}}},62096:(e,t,i)=>{i.r(t),i.d(t,{default:()=>E});var n=i(96651),l=i(4564),a=i(49872),s=i(12100),o=i(12980),r=i(68964),d=i(53048),c=i(40636),u=i(42444),b=i(40068),h=i(88756),m=i(58004),x=i(77840),_=i(32760),v=i(46428),g=i(2488);const p={page_type:h.Ok.PENDING_INVITATION,get title(){return s._s.get("web-player.blend.group-invite.header")},get subtitle(){return s._s.get("web-player.blend.duo-invite.description")},get button_text(){return s._s.get("web-player.blend.invite.button-title")},footnote:null,members:[],recipient:null,members_title:null,playlist_uri:null},E=()=>{const{spec:e,logger:t}=(0,c.gp)(a.e,{}),i=(0,x.k)(e,t),{ref:h,breakpoint:E}=(0,m.y)(),{user:y}=(0,l.w1)(r.cx),w=y?.uri?(0,u.w)(y?.uri):"",j=(e=>({...p,members:[e],footnote:s._s.get("web-player.blend.group-invite.warning")}))({name:y?.display_name||"",username:w,image_url:(0,b.C)(y?.images)?.url||null,hash:""});return y?(0,g.jsxs)(n.Suspense,{fallback:null,children:[(0,g.jsx)(o.Q,{children:s._s.get("web-player.blend.invite.page-title")}),(0,g.jsx)(d.yM.Provider,{value:E,children:(0,g.jsx)(_.A,{invitation:j,callToActionClicked:i,breakpointEltRef:h})})]}):(0,g.jsx)(v.c,{})}},56432:(e,t,i)=>{i.r(t),i.d(t,{default:()=>q});var n=i(96651),l=i(4564),a=i(33220),s=i(68964),o=i(2944),r=i(49232),d=i(49872),c=i(14788),u=i(12100),b=i(15040),h=i(53048),m=i(800),x=i(40636),_=i(13080),v=i(26760),g=i(84960),p=i(56948),E=i(2488);const y=({invitation:e,callToActionClicked:t,breakpointEltRef:i})=>(0,E.jsxs)("div",{className:p.c.container,"data-testid":g.Ip,ref:i,children:[(0,E.jsx)(_.i,{size:"xxlarge"}),(0,E.jsx)(v.U,{title:e.title,subtitle:e.subtitle,buttonText:e.button_text,footnote:null,callToActionClicked:t})]});var w=i(12980),j=(i(41260),i(10124)),f=i.n(j),I=i(8004),A=i(74712),k=i(7300),N=i(46003),T=i(11732);const R="HKAYWYmxd5Ie8WSi0a4y",M="i52u_T3b50wraodIaORk",D="xakiNVMlUf6geF67FEgy",C="IRhTesoeIiwswlly0Dvg",L="LNJzE17iskXWmfKAzY4U",O="qzBr7X7cdLUhWdk0r8lL",S=({uri:e,imageUrl:t,name:i})=>(0,E.jsx)("li",{children:(0,E.jsx)(k.U,{menu:(0,E.jsx)(N.Y,{uri:e}),children:(0,E.jsx)(T.Link,{to:e,children:(0,E.jsxs)("div",{className:C,children:[(0,E.jsx)(A.C,{images:[{url:t,width:null,height:null}],label:i,width:32,userIconSize:"medium",className:L}),(0,E.jsx)(I.a,{variant:"bodySmallBold",className:"standalone-ellipsis-one-line",semanticColor:"textBase",children:i})]})})})}),U=({members:e,headingText:t,className:i})=>(0,E.jsxs)("div",{className:f()(R,i),children:[(0,E.jsx)("div",{children:(0,E.jsx)(I.a,{as:"h4",variant:"marginalBold",semanticColor:"textSubdued",className:M,children:t})}),(0,E.jsx)("ul",{className:D,children:e&&e.map((e=>(0,E.jsx)(S,{imageUrl:e.image_url||"",name:e.name,uri:(0,c.oh)(e.username).toURI()},e.username)))}),(0,E.jsx)("div",{className:O})]}),P=({invitation:e,callToActionClicked:t,breakpointEltRef:i})=>{const n=e.members||[],l=(0,E.jsx)("div",{className:p.c.userListContainer,"data-testid":g.__,children:(0,E.jsx)(U,{className:p.c.userList,headingText:e.members_title,members:n})});return(0,E.jsxs)("div",{className:p.c.container,ref:i,children:[(0,E.jsx)(w.Q,{children:u._s.get("blend.join.title")}),(0,E.jsx)(v.U,{title:e.title,subtitle:e.subtitle,footnote:e.footnote,body:l,buttonText:e.button_text,callToActionClicked:t})]})};var Y=i(32760),B=i(92376),G=i(88756),X=i(58004),W=i(77840),z=i(4964),K=i(92292);const V=({invitationId:e})=>{const t=(0,a.i6)(),i=(0,r.IP)(b.krx),{data:l,error:s,loading:_}=(0,m.Q)(G.IG,[e]),{spec:w,logger:j}=(0,x.gp)(d.e,{}),f=(0,W.k)(w,j),I=function(e,t,i){const{enqueueSnackbar:n}=(0,K.u)(),l=(0,z.W4)(),s=(0,a.i6)();return async()=>{try{const t=await(0,G.WE)(l,e),i=(0,c.nX)(t?.body.playlist_uri).toURLPath(!0);if(!i)throw new Error("unable to join");s(i,{replace:!0})}catch{n(u._s.get("error.request-playlist-failure"))}if(t&&i){const e=t.joinButtonFactory().hitCreatePlaylist();i.logInteraction(e)}}}(e,w,j),{ref:A,breakpoint:k}=(0,X.y)();(0,n.useEffect)((()=>{if(l?.body?.page_type===G.Ok.ALREADY_JOINED){const e=(0,c.nX)(l?.body.playlist_uri)?.toURLPath(!0);e&&t(e,{replace:!0})}}),[l?.body?.page_type,l?.body?.playlist_uri,t]);const N=null===l||!l.body;if(N||_||s)return(0,E.jsx)(B.K,{timeoutInMs:1e3,hasError:!!s||!_&&N,errorMessage:u._s.get("error.generic")});const T=l?.body.members?.length||0,R=i===b.Wel.TWO_USER;switch(l?.body.page_type){case G.Ok.DELETED:return(0,E.jsx)(h.yM.Provider,{value:k,children:(0,E.jsxs)("div",{className:p.c.container,ref:A,"data-testid":g.w$,children:[(0,E.jsx)(o.W,{size:"xxlarge"}),(0,E.jsx)(v.U,{title:l.body.title,subtitle:l.body.subtitle,buttonText:l.body.button_text,footnote:l.body.footnote,callToActionClicked:f})]})});case G.Ok.ALREADY_JOINED:return(0,E.jsx)(B.K,{hasError:!1,errorMessage:u._s.get("error.request-playlist-failure")});case G.Ok.READY_TO_JOIN_EMPTY_BLEND:return(0,E.jsx)(h.yM.Provider,{value:k,children:(0,E.jsx)(Y.A,{invitation:l.body,breakpointEltRef:A,callToActionClicked:I})});case G.Ok.READY_TO_JOIN_ALREADY_CREATED_BLEND:return R&&T>=2?(0,E.jsx)(h.yM.Provider,{value:k,children:(0,E.jsx)(y,{invitation:{...l.body,title:u._s.get("blend.link-invialid.header"),subtitle:u._s.get("blend.link-invalid.subtitle"),button_text:u._s.get("blend.invite.button-title")},callToActionClicked:f,breakpointEltRef:A})}):(0,E.jsx)(h.yM.Provider,{value:k,children:(0,E.jsx)(P,{invitation:l.body,callToActionClicked:I,breakpointEltRef:A})});case G.Ok.MAX_MEMBERS:return(0,E.jsx)(h.yM.Provider,{value:k,children:(0,E.jsx)(y,{invitation:l.body,callToActionClicked:f,breakpointEltRef:A})});case G.Ok.PENDING_INVITATION:return(0,E.jsx)(h.yM.Provider,{value:k,children:(0,E.jsx)(Y.A,{invitation:l.body,callToActionClicked:f,breakpointEltRef:A})});default:return(0,E.jsx)(B.K,{timeoutInMs:1e3,hasError:!0,errorMessage:u._s.get("error.generic")})}};var J=i(46428);const F=({invitationId:e})=>{const{user:t}=(0,l.w1)(s.cx);return t?(0,E.jsx)(n.Suspense,{fallback:null,children:(0,E.jsx)(V,{invitationId:e})}):(0,E.jsx)(J.c,{})},q=(0,n.memo)((()=>{const{invitationId:e=""}=(0,a.W4)();return(0,E.jsx)(F,{invitationId:e})}))},56948:(e,t,i)=>{i.d(t,{c:()=>n});const n={xs:"(min-width: 0px)",xsOnly:"(min-width: 0px) and (max-width: 767px)",sm:"(min-width: 768px)",smOnly:"(min-width: 768px) and (max-width: 1023px)",md:"(min-width: 1024px)",mdOnly:"(min-width: 1024px) and (max-width: 1279px)",lg:"(min-width: 1280px)",lgOnly:"(min-width: 1280px) and (max-width: 1919px)",xl:"(min-width: 1920px)",container:"yMoj4jXSudxZ6BkKxV2E",TwoUsers:"IDgUCqAbkRah6OFywv1q",subtitle:"qmKxO5qV4XmVYfpFpaDA",facepile:"nWMdWl40O8K7HQT8Tagc",title:"csRAeNipsu1camQTMiIU",button:"nxFBywAeAI8Zk2fav3Yj",userList:"lxPLQIPb1VSV3VL18Ke3",userListContainer:"BzMKhmywgyIt6IUjcTGW",note:"DSdKNusLgsMX_iicYCU2"}}}]);
//# sourceMappingURL=xpui-routes-blend.js.map