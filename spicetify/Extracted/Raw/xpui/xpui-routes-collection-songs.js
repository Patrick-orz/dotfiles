"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[1e3],{86726:(e,t,l)=>{l.r(t),l.d(t,{default:()=>Fe});l(73952),l(97296);var a=l(96651),n=l(4564),r=l(33220),s=l(30700),i=l(81468),o=l(14788),c=l(12100),u=l(12980),d=l(38064),g=l(92376),m=l(84304),f=l(78808),y=l(33912),p=l(49372),h=l(37200),T=l(1840),k=l(60112),x=l(10928),C=l(74012),F=l(72467),j=l(33948),b=l(96768);function w(e,t,l){const a={uri:e};return(0,C.yE)(a,t),(0,F.mM)(a,l?.map((e=>(0,j.O8)(e)??null)).filter(b.g)),a}var I=l(93948),S=l(52588),_=l(40636),D=l(49232),A=l(50176),E=l(23568),L=l(62768),P=l(556),M=l(8968),v=l(24544),R=l(60484),U=l(45748),N=l(37535),q=l(70192),B=l(2488);const O=a.memo((({tracklistDomRef:e})=>{const{spec:t,logger:l}=(0,_.gp)(R.createDesktopSearchBarEventFactory,{}),n=(0,a.useCallback)((()=>{l.logInteraction(t.filterFieldFactory().keyStrokeFilter())}),[l,t]),r=(0,a.useCallback)((()=>{l.logInteraction(t.filterFieldFactory().hitClearFilter())}),[l,t]),s=(0,U.w)().filter((e=>p.UF.includes(e)));return(0,B.jsxs)("div",{className:m.c.searchBoxContainer,children:[(0,B.jsx)(a.Suspense,{fallback:null,children:(0,B.jsx)(N.Q,{placeholder:c._s.get("playlist.search_in_playlist"),clearOnEscapeInElementRef:e,onFilter:n,onClear:r})}),(0,B.jsx)(q.Q,{columns:s})]})}));l(97768),l(41260);var K=l(10124),Q=l.n(K),W=l(95944),V=l(26681),z=l(12924),G=l(40468),J=l(86620),Y=l(51528),$=l(3844),X=l(30140),Z=l(37116);const H="liked-songs-tags";function ee(){return(0,Z.k)("liked-songs-current-tag-filter",null)}const te="bnAGyFvicDJD8TnVSKnq",le=e=>({id:e.filter,getName:()=>e.name,ubiId:e.name}),ae=(0,a.memo)((({spec:e,nrTracks:t})=>{const{tags:l,currentTag:n,setCurrentTag:r}=function({nrTracks:e}){const t=(0,$.u)(),l=(0,z.q$)(),[n,r]=ee(),[s,i]=(0,a.useState)([]),{data:o}=(0,G.U)({queryKey:[H],queryFn:()=>t?.getTracksFilterTags(),staleTime:0,gcTime:864e5,placeholderData:J.iq,refetchOnWindowFocus:!1});(0,a.useLayoutEffect)((()=>{const t=o?.find((e=>e.filter===n));if(!t&&n){if(e>0)return;r(null)}i(o??[])}),[n,r,e,o]);const c=(0,a.useCallback)((({data:{list:e}})=>{e===Y.K.TRACKS&&l.invalidateQueries({queryKey:[H]})}),[l]);(0,X.l)(Y.Wg.UPDATE,c);const u=(0,a.useMemo)((()=>s.find((e=>e.filter===n))),[n,s]),d=(0,a.useCallback)((e=>{r(e?.filter??null)}),[r]);return{tags:n||e?s:[],currentTag:u,setCurrentTag:d}}({nrTracks:t}),s=(0,_.Mk)(),i=(0,a.useCallback)(((t,a,n)=>{let i;if(!t)return i=e.clearButtonFactory().hitClearFilter(),void s.logInteraction(i);const o=l.find((({filter:e})=>e===t));if(!o)return;const c=e.filterChipFactory({identifier:o.name,position:n});a?(i=c.hitClearFilter(),r(null)):(i=c.hitFilter(),o&&r(o)),s.logInteraction(i)}),[s,r,e,l]),o=n?[]:l.map(le),u=n?[le(n)]:[];return l.length?(0,B.jsx)(V.i,{children:(0,B.jsx)(W.A,{availableFilters:o,selectedFilters:u,toggleFilterId:()=>{},resetFilterIds:()=>r(null),onFilterClick:i,ariaLabel:c._s.get("web-player.liked-songs.liked-songs-filter-tags"),clearBtnAriaLabel:c._s.get("web-player.liked-songs.clear-filter"),className:Q()(te),applyLightThemeControls:!0})}):null}));var ne=l(72144),re=l(75480),se=l(15040),ie=l(78e3),oe=l(96692);const ce="bKlB8pmFVoswJlZ_jhtL",ue=a.memo((function({metadata:e,onClickTogglePlay:t,isPlaying:l,spec:n,logger:r,backgroundColor:s,canSort:i,canFilter:o}){const{uri:u,name:d,totalLength:g}=e,m=(0,a.useRef)(null),f=(0,a.useMemo)((()=>n.actionBarFactory()),[n]),y=(0,a.useMemo)((()=>f.shuffleButtonContainerFactory()),[f]),p=(0,a.useMemo)((()=>f.filtersFactory()),[f]),h=g>0,T=g>0,k=i&&o,x=(0,oe.Y)(),C=(0,a.useCallback)(((e,t)=>{const l=f.downloadButtonFactory();t===M._w.ADD?r.logInteraction(l.hitDownload({itemToDownload:u})):t===M._w.REMOVE?r.logInteraction(l.hitRemoveDownload({itemToRemoveFromDownloads:u})):t===M._w.NO_PERMISSION&&r.logInteraction(l.hitUiReveal())}),[f,r,u]),F=(0,re.u)(),j=(0,D.IP)(se.A3I);return(0,B.jsxs)(ne.g,{backgroundColor:s,children:[(0,B.jsxs)(V.i,{children:[T?(0,B.jsx)(L.e,{onClick:t,isPlaying:l,size:F,uri:u,ariaPauseLabel:c._s.get("playlist.a11y.pause",d),ariaPlayLabel:c._s.get("playlist.a11y.play",d)}):null,x&&(0,B.jsx)(_.Ud,{spec:y,children:(0,B.jsx)(ie.I,{entityName:d,contextUri:u,activationPlacement:"bottomEnd",size:F})}),(0,B.jsx)(A.W,{uri:u,canDownload:h,isFollowing:!0,onFollow:()=>{},size:F,onClick:C}),k?(0,B.jsx)(_.Ud,{spec:f,children:(0,B.jsx)(O,{tracklistDomRef:m})}):(0,B.jsx)("div",{className:ce,children:(0,B.jsx)(E.Q,{property:v.RT,renderNewExperience:()=>(0,B.jsx)(P.W,{options:[],onSelect:()=>{},selected:null,enableViewModeMenu:!0})})})]}),j&&(0,B.jsx)(ae,{spec:p,nrTracks:g})]})}));var de=l(47212),ge=l(14432),me=l(24372),fe=l(83968),ye=l(68964),pe=l(71796),he=l(90332),Te=l(31396);const ke=[y.yw.INDEX,y.yw.TITLE_AND_ARTIST,y.yw.ALBUM,y.yw.ADDED_AT,y.yw.DURATION],xe=({data:e,canFilter:t,canSort:l})=>{const{uri:n,name:o,totalLength:C}=e.metadata,F=(0,a.useRef)(null),j=(0,x.aR)("#5038a0"),[I]=ee(),{filter:D}=(0,a.useContext)(f.on),{sortState:A,setSortState:E}=(0,a.useContext)(p.iC),{spec:L,logger:P}=(0,_.gp)(i.o,{data:{uri:n}}),M=a.useMemo((()=>L.headerFactory()),[L]),v=a.useMemo((()=>L.tracklistFactory()),[L]);(0,a.useEffect)((()=>{null===A.column&&E({column:y.yw.ADDED_AT,order:y.gF.DESC})}),[A,E]);const R=(0,r.KM)(),U=(0,r.IT)(),N="POP"!==R?new URLSearchParams(U.search).get("uri"):null,{isPlaying:q,togglePlay:O,usePlayContextItem:K,isActive:Q}=(0,S.I)(w(n,(0,de.s)(A),[D,I].filter(b.g)),{featureIdentifier:"your_library",referrerIdentifier:"your_library"}),W=()=>{const e=(0,fe.Il)({isPlaying:q,isActive:Q,spec:L.actionBarFactory().playButtonFactory(),logger:P,uri:n});O({loggingParams:e})},[V]=(0,me.yA)(),{isCompactMode:z}=(0,k.Q7)(),G=(({isCompactMode:e=!1})=>{const t=[...ke];return e&&t.splice(t.indexOf(y.yw.TITLE_AND_ARTIST),1,y.yw.TITLE,y.yw.ARTIST),t})({isCompactMode:z});return(0,B.jsx)(h.i,{columns:G,children:(0,B.jsxs)("section",{role:"presentation",className:m.c.playlist,"data-testid":"playlist-page",children:[(0,B.jsx)(u.Q,{children:c._s.get("playlist.page-title",o)}),(0,B.jsx)(T.A,{metadata:{...e.metadata,hasSpotifyTracks:!0},totalItems:V,isPlaying:q,togglePlay:W,backgroundColor:j,specLikedSongs:M}),(0,B.jsx)(ue,{metadata:e.metadata,onClickTogglePlay:W,isPlaying:q,spec:L,logger:P,backgroundColor:j,canSort:l,canFilter:t}),(0,B.jsx)("div",{className:"contentSpacing",children:C>0?(0,B.jsx)(a.Suspense,{fallback:(0,B.jsx)(g.K,{hasError:!1,errorMessage:c._s.get("error.request-collection-tracks-failure")}),children:(0,B.jsx)(_.Ud,{spec:v,children:(0,B.jsx)(ge.m,{nrTracks:C,collectionUri:n,scrollToUri:N,usePlayContextItem:K,outerDomRef:F,spec:v,initialItems:e.contents.items,isCompactMode:z,tagFilter:I})})}):(0,B.jsx)(d.o,{message:c._s.get("collection.empty-page.songs-subtitle"),title:c._s.get("collection.empty-page.songs-title"),linkTo:"/search",linkTitle:c._s.get("collection.empty-page.songs-cta"),renderInline:!0,children:(0,B.jsx)(s.S,{"aria-hidden":"true"})})})]})})},Ce=a.memo((function({user:e,uri:t}){const{filter:l}=(0,a.useContext)(f.on),{sortState:n}=(0,a.useContext)(p.iC),[r]=ee(),s=function(e,t,l){const n=(0,a.useContext)(I.g),r=(0,z.q$)(),s=(0,pe.Y1)((()=>["useLikedSongs",e,l]),[e,l]),{data:i}=(0,G.U)({queryKey:s(),queryFn:()=>n.getTracks(l),gcTime:18e5,placeholderData:J.iq,refetchOnWindowFocus:!1}),o=(0,a.useCallback)((()=>{r.invalidateQueries({queryKey:s()})}),[r,s]);(0,X.l)(Y.Wg.UPDATE,o);const c=(0,Te.a0)(t.id);return c&&i?{metadata:{uri:e,name:c.name,images:c.images,totalLength:i?.totalLength,unfilteredTotalLength:i.unfilteredTotalLength,owner:(0,he.G)(t)},contents:i}:null}(t,e,{offset:0,limit:25,sort:(0,de.s)(n),filters:[l,r].filter(b.g)}),i=(0,a.useContext)(I.g).getCapabilities();return s?(0,B.jsx)(xe,{data:s,canFilter:i.canFilterTracksAndEpisodes&&s.metadata.unfilteredTotalLength>0,canSort:i.canSortTracksAndEpisodes&&s.metadata.unfilteredTotalLength>0}):(0,B.jsx)(g.K,{hasError:!1,errorMessage:c._s.get("error.not_found.title.playlist"),loadOffline:i.canModifyOffline})})),Fe=()=>{const{user:e}=(0,n.w1)(ye.cx);if(null===e)return null;const t=(0,o.ML)(e.id).toURI();return(0,B.jsx)(p.sB,{uri:t,children:(0,B.jsx)(f.WC,{uri:t,children:(0,B.jsx)(me.hN,{children:(0,B.jsx)(Ce,{uri:t,user:e})})})})}}}]);
//# sourceMappingURL=xpui-routes-collection-songs.js.map