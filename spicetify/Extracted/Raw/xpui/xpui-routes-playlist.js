"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[4292],{30176:(e,t,s)=>{s.d(t,{m:()=>o});var a=s(96651),i=s(3844),r=s(50176),n=s(7296),l=s(2488);const o=a.memo((function({uri:e,size:t=r.o.md,className:s,onClick:o,canDownload:c,condensedAll:d}){const[u,m]=(0,i.X)(e),p=(0,n.w)(),h=(0,a.useCallback)((()=>{p({targetUri:e,intent:u?"unsave":"save",type:"click"}),m(!u)}),[p,e,u,m]);return(0,l.jsx)(r.W,{className:s,isFollowing:u,onFollow:h,onClick:o,uri:e,size:t,canDownload:c,condensedAll:d})}))},38116:(e,t,s)=>{s.d(t,{C:()=>m});var a=s(96651),i=s(10124),r=s.n(i),n=s(1712),l=s(12100),o=s(17160),c=s(96196);const d="pvGZ831aNzHTQMZ8CA_u";var u=s(2488);const m=(0,a.memo)((function({onClick:e=(()=>{}),size:t,className:s,uri:i,sharingInfo:m,interactionData:p,ariaLabel:h=l._s.get("mwp.list.item.share"),condensedAll:y}){const{onCopyLink:x}=(0,c.M)({sharingInfo:m,uri:i,interactionData:p}),g=(0,a.useCallback)((()=>{x(),e()}),[e,x]);return(0,u.jsx)(o.a,{ariaLabel:h,size:t,onClick:g,className:r()(d,s),icon:n.O,condensedAll:y,condensed:!0})}))},39968:(e,t,s)=>{s.r(t),s.d(t,{ThisIsTourCard:()=>d,default:()=>d,useThisisPlaylistExtensionQuery:()=>h});var a=s(8004),i=s(49612),r=s(12100),n=s(11732),l=s(40636),o=s(87096),c=s(2488);const d=e=>{const{artistImageUrl:t,artistName:s,artistConcertsUri:d,spec:u}=e,m=(0,l.Mk)(),p=(0,l.K2)(u.concertsCardFactory({identifier:s,uri:d,reason:"This is On Tour phase 1 MVP"}));return t&&s&&d?(0,c.jsxs)("section",{ref:p,className:"contentSpacing",children:[(0,c.jsx)(a.a,{as:"h1",variant:"bodyMediumBold",semanticColor:"textBase",children:r._s.get("concerts")}),(0,c.jsx)("div",{className:o.c.cards,children:(0,c.jsxs)("div",{className:o.c.tourCard,"data-testid":"on-tour-card",children:[(0,c.jsx)("img",{className:o.c.cardImage,src:t,alt:""}),(0,c.jsxs)("div",{className:o.c.cardContent,children:[(0,c.jsx)(a.a,{as:"p",variant:"bodySmall",semanticColor:"textSubdued",className:o.c.subtitle,children:r._s.get("concerts_on_tour")}),(0,c.jsx)(a.a,{as:"h1",variant:"bodyMediumBold",className:o.c.title,semanticColor:"textBase",children:s}),(0,c.jsx)(n.default,{to:d,className:o.c.cardLink,children:(0,c.jsx)(i.w,{as:"span",size:"small",onClick:()=>{const e=u.concertsCardFactory({identifier:s,uri:d,reason:"This is On Tour phase 1 MVP"}).hitUiNavigate({destination:d});m.logInteraction(e)},className:o.c.cardButton,children:r._s.get("concerts_see_all_events")})})]})]})})]}):null};var u=s(88272),m=s(99972);const p=new u.a("thisisPlaylistExtension","query","c3c3145aca9849ce8f4d742f9d4dc3be4d945717ce66347d1b3710b8a06749b6",null),h=(e,t)=>(0,m.U)(p,e,t)},64022:(e,t,s)=>{s.r(t),s.d(t,{default:()=>$i});s(73952),s(97296),s(35272),s(41260),s(58032),s(78924),s(99696),s(63120),s(72248),s(1384),s(41256);var a=s(96651),i=s(4564),r=s(33220),n=s(8004),l=s(49232),o=s(23876),c=s(14788),d=s(12100),u=s(61540),m=(s(91372),s(52756)),p=s(2488);const h=(e,t,s)=>({event:e,app_startup_id:null,ad_playback_id:null,ad_id:String(t),lineitem_id:String(s),creative_id:String(t),ad_format:"sponsored playlist",slot:null,in_focus:null,username:null,jsondata:JSON.stringify({platform:"WebPlayer",revision:"1.0.0"})}),y=({clickTracking:e,clickThrough:t,thirdPartyImpression:s,impression:r,logoUrl:l,advertiserName:o,creativeId:c,lineItemId:u})=>{const y=(0,i.OY)(),[x,g]=(0,a.useState)(!1);return(0,a.useEffect)((()=>(y((0,m.Gy)()),y((0,m.YB)(h("event_viewed",c,u))),()=>{y((0,m.qg)())})),[y,c,u]),(0,p.jsxs)("div",{className:"sponsor-container",children:[(0,p.jsx)(n.a,{variant:"marginal",className:"sponsor-text","data-ta-id":"sponsor-text",children:d._s.get("playlist.presented_by",o)}),(0,p.jsxs)("div",{className:"sponsor-logo",children:[(0,p.jsx)("a",{draggable:!1,className:"sponsor-logo__link",target:"_blank",href:t,onClick:()=>{y((0,m.YB)(h("event_clicked",c,u))),g(!0)},children:(0,p.jsx)("img",{draggable:!1,className:"sponsor-logo__image",src:l,alt:o,"data-ta-id":"sponsor-logo"})}),(0,p.jsx)("img",{className:"sponsor-logo__imp-pixel",src:r,alt:""}),s&&(0,p.jsx)("img",{className:"sponsor-logo__3p-imp-pixel",src:s,alt:""}),x&&(0,p.jsx)("img",{className:"sponsor-logo__click-img-pixel",src:e,alt:""})]})]})},x=({playlistUri:e})=>{const t=(0,i.OY)(),s=(0,i.w1)((t=>t.ads.sponsoredPlaylist.previewAd||t.ads.sponsoredPlaylist.sponsoredPlaylist.get(e)));return(0,a.useEffect)((()=>{s||t((0,m.k$)(e))}),[t,e,s]),s?(0,p.jsx)("div",{children:(0,p.jsx)(y,{...s})}):null},g=({playlistUri:e})=>{const t=(0,i.OY)(),s=(0,i.w1)((e=>e.ads.sponsoredPlaylist.sponsoredPlaylist.get("allSponsorships"))),r=(0,i.w1)((e=>e.ads.sponsoredPlaylist.previewAd));(0,a.useEffect)((()=>{s||t((0,m.yo)())}),[t,s]);const n=r||s&&((e,t)=>{const s=Date.now()/1e3,a=e.split(":"),i=a[a.length-1];return t.some((({playlistId:e,endTime:t,startTime:a})=>e===i&&s>=a&&s<(t||s+1)))})(e,s);return n?(0,p.jsx)(x,{playlistUri:e}):null};var b=s(10560),f=s(12980),C=s(99070),j=s(8340),v=s(3844);const k="hOOwEKqNuXrNvOCB1SgZ",I="csEdkIN9z2LjJIuZraqz",T=({uri:e})=>{const[t,s]=(0,v.X)(e),i=(0,r.i6)(),l=(0,a.useCallback)((()=>{s(!1),i("/",{replace:!0})}),[i,s]);return(0,p.jsxs)("div",{className:k,children:[(0,p.jsx)(C.x,{size:"xxlarge"}),(0,p.jsxs)("div",{className:I,children:[(0,p.jsx)(n.a,{as:"p",variant:"titleSmall",children:d._s.get("forbidden-page.title")}),(0,p.jsx)(n.a,{as:"p",variant:"bodySmall",children:d._s.get("forbidden-page.description")})]}),t&&(0,p.jsx)(j.g,{colorSet:"invertedLight",onClick:l,children:d._s.get("remove_from_your_library")})]})};var R=s(92376),S=s(84304),A=s(60328),_=s(78808),w=s(49372),N=s(24372),E=s(37200),L=s(39968),P=s(60112),U=s(6812),M=s(15700),O=s(6860),B=s(76288),D=s(43619);const F=e=>e.seoExperiment,V=(0,B.M3)(F,(e=>e?.uri)),K=((0,B.M3)(F,(e=>e?.[D.s.TRACK])),(0,B.M3)(F,(e=>e?.[D.s.ALBUM])),(0,B.M3)(F,(e=>({...e?.[D.s.PLAYLISTV2],...e?.[D.s.PLAYLIST]}))));var z=s(7296),H=s(13932),W=s(77624),Q=s(71940),q=s(10156),Y=s(92280),G=s(57800),J=s(51160),Z=s(15040),X=s(99640),$=s(68964);const ee=({context:e,shouldFire:t})=>{const s=(0,Y.A)(),r=(0,i.w1)($.Yf),n=(0,i.w1)(X.SS),o=(0,l.IP)(Z.yci),c=(0,G.mg)(),d=(0,a.useCallback)((()=>{const t={category:"rpp_exposures",action:"playlist_page_visit",variant:o,label:"dwp",os:(0,J.k)(),context:e,country:r?n:"",sp_t:(0,q.Ij)("sp_t")};s?c.send((0,Q.O)(t)):c.send((0,W.E)(t))}),[o,e,r,n,s,c]);(0,a.useEffect)((()=>{t&&d()}),[d,t])};var te=s(72232),se=s(15060),ae=s(83968),ie=s(81040),re=s(11920),ne=s(22480),le=s(99972),oe=s(52588),ce=s(40104),de=s(15464),ue=s(69596),me=s(48092);var pe=s(68488),he=s(38156),ye=s(62692),xe=s(40636),ge=s(24544),be=s(41956);s(97768);let fe=function(e){return e.RPP="rich-playlist-pages-2",e.TEST="test",e}({}),Ce=function(e){return e.CONTROL="0",e.VARIANT="1",e}({});var je=s(93320),ve=s(82504);const ke=[],Ie=(e,t)=>{const s=[];let a=e,i=t;for(;a>0;){const t=Math.ceil(a/i);s.push({first:e-a,nrItems:t}),a-=t,i--}return s},Te=e=>{const{itemsInNode:t,renderItem:s,renderPlaceholder:a,estimatedHeight:i,scrollNodeRef:r,nrRowsOverscan:n=10,nrInitialInView:l=0,firstIndex:o,heights:c,fanOut:d=2}=e,{ref:u,inView:m,entry:h}=(0,ve.cD)({root:r.current,rootMargin:n*i+"px 0px",initialInView:o<l}),y=`${o}-${t}`;c[y]??=i*t,h?.boundingClientRect?.height&&(c[y]=h.boundingClientRect.height);const x=c[y];return 0===t?null:m?1===t?(0,p.jsx)("div",{ref:u,role:"presentation",children:s(o,x)}):(0,p.jsx)("div",{ref:u,role:"presentation",children:Ie(t,d).map((({first:t,nrItems:s},a)=>(0,p.jsx)(Te,{...e,itemsInNode:s,firstIndex:o+t},a)))}):(0,p.jsx)("div",{ref:u,role:"presentation",children:a(`${x}px`)})},Re=e=>{const t=(e=>{const t=ke.find((t=>t.key===e))?.heights||{},s=(0,a.useCallback)((t=>{if(!e)return;const s=ke.findIndex((t=>t.key===e));-1===s?ke.push({key:e,heights:t}):(ke[s].heights=t,ke.push(ke.splice(s,1)[0])),ke.length>10&&ke.shift()}),[e]),i=(0,a.useRef)({...t});return(0,a.useEffect)((()=>()=>{s(i.current)}),[s]),i.current})(e.persistanceKey);return(0,p.jsx)(Te,{...e,itemsInNode:e.totalCount,firstIndex:0,heights:t,nrInitialInView:e.nrInitialInView})};var Se=s(11816);function Ae(e){return e.type===D.s.TRACK}function _e(e){return e.type===D.s.EPISODE}function we(e){return e.type===D.s.AUDIOBOOK}var Ne=s(97976),Ee=s(10124),Le=s.n(Ee),Pe=s(73552),Ue=s(49612),Me=s(67316),Oe=s(13080),Be=s(11176),De=s(87832),Fe=s(65076),Ve=s(11732),Ke=s(8968),ze=s(49156),He=s(50060),We=s(12924),Qe=s(40468),qe=s(40728),Ye=s(72001),Ge=s(5256);var Je=s(86852),Ze=s(97276),Xe=s(17556);const $e="JgxVj0lHUDTf9MS1jJpk",et="m5NcxNs6qkNbc9Wdxed7",tt=({isExplicit:e,children:t})=>(0,p.jsxs)("div",{className:$e,children:[e&&(0,p.jsx)(Xe.C,{}),(0,p.jsx)(n.a,{variant:"bodySmall",className:et,children:t})]});var st=s(82960),at=s(53048);const it="small",rt="ci11tAmTK1LnxThQkXPy",nt="_2sJPwAAp1wY1Ftke6iFe",lt="yuNzasMLs7hvemHI4d8Q",ot="abYR6tZoE7BdzThmWTb0",ct="GOcKQxqNMhGzbGiAXBig",dt="yFQjuDAhri_egM1pwn70",ut=(0,a.memo)((function(e){const{breakpoint:t,className:s,showSeparator:a,...i}=e;return(0,p.jsx)(st.U,{className:Le()(s,rt,{[dt]:a}),hoverBackgroundColor:"backgroundTintedHighlight",activeBackgroundColor:"backgroundTintedBase",layout:t===it?"regular":"wide",hoverAnimationDuration:"0ms",horizontalGap:t===it?"12px":"16px",paddingBlockStart:"12px",paddingBlockEnd:"12px",...i})}));var mt=s(58912),pt=s(51336);const ht=({description:e,children:t})=>(0,p.jsxs)("div",{className:ot,children:[e&&(0,p.jsx)(mt.y,{lineClamp:2,as:"div",dir:"auto",children:(0,p.jsx)(pt.y,{asTextContent:!0,html:e})}),t]});var yt=s(34328);const xt=({isPlaying:e,onClickPlay:t,name:s,authorName:a,isLocked:i,children:r})=>(0,p.jsxs)("div",{className:ct,children:[(0,p.jsx)("div",{className:nt,children:r}),(0,p.jsx)(yt.O,{size:"small",version:yt.e.secondary,onClick:t,isPlaying:e,ariaPlayLabel:d._s.get("tracklist.a11y.play",s,a),ariaPauseLabel:d._s.get("tracklist.a11y.pause",s,a),locked:i})]});var gt=s(24392),bt=s(44616),ft=s(45176);const Ct=({images:e,breakpoint:t,type:s,name:a})=>{const i=(0,ft.S0)(),r=t===it?bt.fm.SIZE_64:bt.fm.SIZE_112;return(0,p.jsx)(gt.i,{fadeIn:!0,images:i(e,bt.oL[r]),shape:gt.O.ROUNDED_CORNERS,size:r,iconSize:t===it?"medium":"xlarge",type:s,title:a,loadingMode:"eager"})};var jt=s(45008);const vt=({children:e})=>(0,p.jsx)(jt.Y,{lineClamp:2,as:"div",dir:"auto",children:e});var kt=s(10660),It=s(30176),Tt=s(48856),Rt=s(38116);const St="WdYB8aMUe06dOu4TmYik",At="b1X4Ya4bp35IsN6tPGZw",_t="aCdPMQVcvScaa22utIJM",wt=(0,a.memo)((function({book:e,contextUri:t,featureIdentifier:s,sharingInfo:i,uid:l,rating:o,isRecommendation:u=!1,canRemove:m=!1,showSeparator:h=!1,...y}){const{name:x,description:g,isLocked:b,isExplicit:f,images:C,type:j,uri:k,authorName:I,consumptionCapExplanation:T,durationMs:R,topics:S=[],signifierText:A}=e,_=(0,xe.Mk)(),{spec:w}=(0,xe.gp)(Be.U,{data:{position:0,uri:k}}),{isPlaying:N,isActive:E,togglePlay:L}=(0,oe.I)({uri:k},{featureIdentifier:s}),P=(0,r.i6)(),U=(0,c.nX)(k).toURLPath(!0),{addItems:M}=(0,ce.Q3)(t),O=(0,at.oV)()===at.u_.SMALL?"small":"large",B=(e=>{const t=(0,qe.i)(),s=(0,We.q$)(),i=(0,a.useRef)(null),r=(0,a.useRef)(0),n=(0,Ye.o)((t=>t?.context.uri===e?t?.item?.uri??null:null)),[l]=(0,Ge.e)(1e4,(e=>e?.item?.uri===n)),{data:o}=(0,Qe.U)({queryKey:["useShowPlayedState",e],queryFn:async()=>{const s=t.getShowPlayedState(e);return r.current=l,s},refetchOnWindowFocus:!1});return(0,a.useEffect)((()=>{i.current&&n!==i.current&&s.invalidateQueries({queryKey:["useShowPlayedState",e]}),i.current=n}),[n,s,e]),(0,a.useMemo)((()=>o&&t.capabilities.canGetShowPlayedState?{state:o.state,playPositionMilliseconds:o.playPositionMilliseconds+l-r.current}:null),[o,t,l])})(k),[D,F]=(0,v.X)(k),V=(0,He._)(k),K=O===it?"small":"medium",z=(0,a.useCallback)((()=>{_.logInteraction(w.addButtonFactory().hitAddToPlaylist({playlist:t,itemToBeAdded:k})),M([k],{after:"end"})}),[_,w,t,k,M]),H=(0,a.useCallback)((()=>{if(b&&!T)P(U);else{const e=(0,ae.Il)({isPlaying:N,isActive:E,spec:w.playButtonFactory(),logger:_,uri:k});L({loggingParams:e})}}),[T,E,b,N,_,P,w,L,k,U]),W=(0,a.useCallback)((()=>{_.logInteraction(w.genreLinkFactory({uri:S[0].uri??""}).hitUiNavigate({destination:S[0].uri??""}))}),[_,w,S]),Q=(0,p.jsx)(vt,{children:x}),q=(0,p.jsx)(ht,{description:g,children:(0,p.jsxs)(tt,{isExplicit:!!f,children:[!0===o?.showAverage&&void 0!==o.average&&(0,p.jsxs)("span",{children:[(0,p.jsx)(Pe.G,{size:"xsmall",className:St}),d._s.formatNumber(o.average,{maximumFractionDigits:1})]}),S.at(0)?.title&&(0,p.jsx)(Ve.Link,{className:At,to:S[0].uri??"",onClick:W,children:S[0].title}),R&&(0,p.jsx)(Ze.W,{isPlaying:!1,fullyPlayed:B?.state===Je.yQ.Completed,durationMs:R,position:B?.playPositionMilliseconds})]})}),Y=(0,p.jsx)(Fe.y,{uri:k,uid:l,contextUri:t,includeGoToAudiobook:!0,canBeRemovedFromPlaylist:m}),G=!b&&!!!T,J=u?null:(0,p.jsxs)(xt,{isPlaying:N,onClickPlay:H,isLocked:b&&!T,name:x,authorName:I,children:[(0,p.jsx)(kt.O,{className:Le()({[lt]:D}),isAdded:D,onClick:()=>{D?_.logInteraction(w.saveToLibraryButtonFactory().hitRemoveLike({itemNoLongerLiked:k})):_.logInteraction(w.saveToLibraryButtonFactory().hitLike({itemToBeLiked:k})),F(!D)},size:K,isAudiobook:!0,condensedAll:!0}),(0,p.jsx)(It.m,{className:Le()({[lt]:(0,ze.q)(V)}),uri:k,onClick:(e,t)=>{t===Ke._w.ADD&&_.logInteraction(w.downloadButtonFactory().hitDownload({itemToDownload:k}))},size:K,canDownload:G,condensedAll:!0}),(0,p.jsx)(Rt.C,{uri:k,sharingInfo:i??null,interactionData:{intent:"share",type:"click"},size:K,onClick:()=>{_.logInteraction(w.shareButtonFactory().hitShare({entityToBeShared:k,shareId:i?.shareId??""}))},condensedAll:!0}),(0,p.jsx)(De.pD,{menu:Y,children:(0,p.jsx)(Tt.g,{label:d._s.get("more.label.context",x),size:K,onClick:()=>{_.logInteraction(w.contextMenuButtonFactory().hitUiReveal())},condensedAll:!0})})]}),Z=(0,p.jsx)(Ct,{images:C,name:x,type:j,breakpoint:O}),X=A?(0,p.jsx)(n.a,{as:"div",variant:"bodySmall",semanticColor:"textBrightAccent",children:A}):null,$=u?(0,p.jsx)(Ue.w,{size:"small",onClick:z,children:d._s.get("playlist.extender.button.add")}):null,ee=(0,p.jsxs)(Me.A,{hasTextSeparator:!0,children:[(0,p.jsxs)(p.Fragment,{children:[u&&b&&(0,p.jsx)(Oe.i,{semanticColor:"textSubdued",title:d._s.get("mwp.header.content.unavailable"),size:"xsmall",className:_t}),d._s.get("card.tag.audiobook")]}),I]});return(0,p.jsx)(De.UF,{menu:Y,onShow:()=>{_.logInteraction(w.secondaryHitUiReveal())},children:(0,p.jsx)(ut,{breakpoint:O,id:`book-${k}`,media:Z,pretitle:X,title:Q,body:q,subtitle:ee,footer:J,trailing:$,onClick:()=>{_.logInteraction(w.hitUiNavigate({destination:k})),P(U)},showSeparator:h,...y})})}));var Nt=s(62528),Et=s(33912);const Lt=(0,a.createContext)({getReference:()=>null,setReference:()=>{}}),Pt=({children:e})=>{const t=(0,a.useRef)(null),s=(0,a.useCallback)((()=>t.current),[]),i=(0,a.useCallback)((e=>{t.current=e}),[]);return(0,p.jsx)(Lt.Provider,{value:{getReference:s,setReference:i},children:e})};const Ut=(e,t,s)=>{const{name:r,uri:n,uid:l}=e,{sortState:o}=(0,a.useContext)(w.iC),c=o.order!==Et.gF.NONE,d=(0,U.C)({itemIds:[l],itemUris:[n],itemMimeTypes:[Nt.__.AUDIOBOOKS],dragLabelText:r,contextUri:t}),{setReference:m,getReference:p}=(0,a.useContext)(Lt),h=(0,a.useCallback)((e=>{m({uri:n,uid:l}),d(e)}),[d,m,l,n]),y=(0,i.OY)(),x=(0,a.useContext)(ce.Iv),g=(0,a.useCallback)(((e,s)=>{const a=e[Nt.__.AUDIOBOOKS];if(!a)return;const i=p();i?s===Ne.Ab.BEFORE?x.move(t,[i],{before:{uri:n,uid:l}}):x.move(t,[i],{after:{uri:n,uid:l}}):s===Ne.Ab.BEFORE?y((0,u.gZ)(t,a,{before:{uri:n,uid:l}})):y((0,u.gZ)(t,a,{after:{uri:n,uid:l}})),m(null)}),[t,y,p,x,m,l,n]),b=s&&!c?[Nt.__.AUDIOBOOKS]:[];return{...(0,Ne.eE)({uri:n,id:l,allowedMimeTypesByDropPosition:{[Ne.Ab.BEFORE]:b,[Ne.Ab.AFTER]:b},onDrop:g}),onDragStart:h}},Mt="bg5inM_sdkHpYWiFf7Id",Ot="DyW2LAm9YDcCkcdM0eeP",Bt=()=>(0,p.jsx)("div",{className:Ot}),Dt=(0,a.memo)((function({item:e,contextUri:t,canEdit:s=!1,canRemove:a=!1,index:i}){const{className:r,dropPosition:n,...l}=Ut(e,t,s);return(0,p.jsxs)(je.I,{className:r,"aria-posinset":i,reRunOnDOMUpdate:!0,children:[n===Ne.Ab.BEFORE&&(0,p.jsx)(Bt,{}),(0,p.jsx)(wt,{book:e,contextUri:t,featureIdentifier:"playlist",sharingInfo:e.sharingInfo,uid:e.uid,rating:e.rating,canRemove:a,className:r,draggable:!0,showSeparator:0!==i,...l}),n===Ne.Ab.AFTER&&(0,p.jsx)(Bt,{})]})}));var Ft=s(53612);const Vt=({contextUri:e,initialItems:t,nrItems:s,canEdit:i,canRemove:n,ariaLabel:l})=>{const o=(0,a.useContext)(ce.Iv),c=(0,ie.Iz)(),{filter:d}=(0,a.useContext)(_.on),{sortState:u}=(0,a.useContext)(w.iC),{contentsOptions:m}=(0,Ft.G)(u,d),[,h]=(0,N.yA)(),y=(0,a.useCallback)((async(t,s)=>{const a=await o.getContents(e,{...m,offset:t,limit:s}),i=a.items.map((e=>null===e?null:we(e)?e:null));return{...a,items:i}}),[o,m,e]),{getItem:x,nrValidItems:g,invalidateCache:b}=(0,Se.W)({nrItems:s,fetch:y,limit:50,initialItems:t});(0,a.useLayoutEffect)((()=>{h(g)}),[g,h]),(0,ce.UD)(e,b);const f=(0,a.useCallback)((e=>(0,p.jsx)("div",{style:{height:e}})),[]),C=(0,a.useCallback)(((t,s)=>{const a=x(t);return a?(0,p.jsx)(Dt,{contextUri:e,item:a,canEdit:i,canRemove:n,index:t},a.uri):f(`${s}px`)}),[i,n,e,x,f]),j="POP"===(0,r.KM)()?0:10;return(0,p.jsx)("div",{className:Mt,children:(0,p.jsx)(je.w,{firstInteractiveIsWrapper:!0,"aria-label":l,"aria-rowcount":g,"aria-colcount":6,children:(0,p.jsx)(Pt,{children:(0,p.jsx)(Re,{totalCount:g,estimatedHeight:200,renderItem:C,renderPlaceholder:f,scrollNodeRef:c,nrRowsOverscan:10,persistanceKey:e,nrInitialInView:j})})})})};var Kt=s(45748),zt=s(94496),Ht=s(81604),Wt=s(59356),Qt=s(40068);const qt={column:null,order:Et.gF.NONE},Yt=a.memo((function({ariaLabel:e,nrTracks:t,playlistUri:s,scrollToUid:i,usePlayContextItem:r,tracklistDomRef:n,sortableColumns:l,isCompactMode:o=!1}){const c=(0,a.useContext)(ce.Iv),{filter:d,setFilter:u}=(0,a.useContext)(_.on),m=(0,a.useRef)(null),h=(0,a.useCallback)((()=>{m.current&&m.current.update()}),[]);(0,Wt.U)(s,h);const{sortState:y,setSortState:x}=(0,a.useContext)(w.iC),g=(0,a.useCallback)((e=>{x((0,A.Md)(e,y))}),[y,x]);(0,a.useEffect)((()=>{x(qt),u("")}),[s,u,x]),(0,a.useEffect)((()=>{m.current&&i&&m.current.scrollToItem({uid:i})}),[i]);const b=(0,a.useCallback)((async(e,t)=>{const a=await c.getContents(s,{offset:e,limit:t,sort:(0,A.Qn)(y),filter:d,decorateFormatListData:!0});return{items:a.items,totalLength:a.totalLength}}),[s,c,y,d]),f=(0,a.useCallback)(((e,t)=>{const a=(0,Qt.C)(e.album?.images,{desiredSize:40,desiredLabel:"small"});return(0,p.jsx)(Et.A5,{index:t,contextUri:s,uri:e.uri,uid:e.uid||void 0,isPlayable:e.isPlayable,duration_ms:e.duration.milliseconds,name:e.name,artists:e.artists,album:e.album,isExplicit:e.isExplicit,isMOGEFRestricted:e.is19PlusOnly,type:e.type,imgUrl:a?.url||"",statusChange:e.formatListAttributes?.status,playCount:parseInt(e.formatListAttributes?.rank||"0",10),usePlayContextItem:r,isCompactMode:o},t+e.uri)}),[s,r,o]),C=(0,Kt.w)(),j=(0,a.useCallback)((e=>({uri:e.uri,uid:e.uid})),[]);return(0,p.jsx)(Ht.oL,{value:"chart-tracklist",children:(0,p.jsx)(Et.aE,{ariaLabel:e,hasHeaderRow:!0,columns:C,sortableColumns:l,sortState:y,onSort:g,renderRow:f,resolveItem:j,nrTracks:t,fetchTracks:b,limit:100,canFetchAllTracks:c.getCapabilities().canFetchAllTracks,outerRef:m,outerDomRef:n,columnPersistenceKey:"chart-tracklist",isCompactMode:o,className:zt.c.chartTrackList},s)})}));var Gt=s(73108),Jt=s(90496),Zt=s(76404),Xt=s(800);function $t(e,t){return e.build().withHost(Zt.UD).withPath("/views/recommendations-in-free-tier-playlist-source").withQueryParameters({signal:`playlistURI:${t}`,limit:"10"}).withEndpointIdentifier("/views/{viewId}").send()}var es=s(62572),ts=s(37116);const ss="BagEpNps_J8R2QuHRZMa",as="bjB8WZd0Ev30ZFbiScDm",is=(0,a.memo)((({uri:e})=>{const{scrollNodeRef:t}=(0,a.useContext)(ie.Ib),{ref:s,inView:i}=(0,ve.cD)({initialInView:!1,rootMargin:"128px 100%",root:t.current}),r=function(e,t){const{data:s}=(0,Xt.Q)($t,[e],{enabled:t,staleTime:36e5,gcTime:72e5});return s?.body.content?.items}(e,i),n=(0,a.useRef)(null),l=function(e){const[t,s]=(0,ts.k)("mlt-height",300),i=(0,a.useCallback)((()=>{const t=e.current?.getBoundingClientRect()?.height;t&&s(t)}),[e,s]);return(0,es.m)({refOrElement:e,observeOnly:"height",onResize:i,observeOnMount:!0}),t}(n);return 0===r?.length?null:(0,p.jsx)("div",{className:ss,style:{"--last-height":`${l}px`},ref:s,children:r&&(0,p.jsx)(Jt.c,{id:"0JQ5DAob0LgAOAm50K90Od",index:0,title:d._s.get("web-player.playlist.more-like-this.section-header-title"),total:r.length,elementRef:n,className:as,children:r.map(((e,t)=>(0,p.jsx)(Gt.I,{index:t,uri:e.uri,name:e.name,authorName:e.owner?.display_name??null,description:null,images:e.images},e.uri)))})})}));var rs=s(72144),ns=s(26681),ls=s(50176),os=s(31720),cs=s(30540),ds=s(76736),us=s(23568),ms=s(62768),ps=s(556),hs=s(78e3),ys=s(75480),xs=s(96560),gs=s(16200),bs=s(85988),fs=s(32320),Cs=s(58060),js=s(20416);const vs={bottomEnd:js._6.topStart,top:js._6.bottom},ks=({visible:e,onHide:t,placement:s,children:a,label:i})=>{const r=(0,l.IP)(ge.Sw);return(0,p.jsx)(fs.O,{placement:s,withPortal:!0,overlay:e&&(0,p.jsx)("div",{className:Le()("encore-dark-theme","encore-layout-themes",{"vertical-metrics":r}),children:(0,p.jsx)(Cs._,{arrow:vs[s],colorSet:"announcement",onClose:t,children:i})}),children:a})};var Is=s(66472),Ts=s(73888);let Rs=function(e){return e.xs="small",e.sm="medium",e.md="large",e}({});const Ss=({uri:e,label:t,onClick:s,size:a=Rs.md})=>{const{onCopyLink:i}=(0,Ts.o)({uri:e,permissionLevel:"CONTRIBUTOR"}),{toggleActivationVisible:r,setToggleActivationVisible:n}=(0,Is.S)();return(0,p.jsx)(ks,{visible:r,onHide:()=>n(!1),label:d._s.get("web-player.playlist.invite-collaborators.message"),placement:"bottomEnd",children:(0,p.jsx)(bs.Yl,{label:t,children:(0,p.jsx)(xs.u,{onClick:e=>{s?.(e),i?.()},iconOnly:gs.Q,size:a,"aria-hidden":"true","aria-label":t,condensed:!0})})})};var As=s(60484),_s=s(37535),ws=s(70192);const Ns=a.memo((({metadata:e,tracklistDomRef:t,sortableColumns:s})=>{const{hasSpotifyAudiobooks:i}=e,r=i||!1,{spec:n,logger:l}=(0,xe.gp)(As.createDesktopSearchBarEventFactory,{}),o=(0,a.useCallback)((()=>{l.logInteraction(n.filterFieldFactory().keyStrokeFilter())}),[l,n]),c=(0,a.useCallback)((()=>{l.logInteraction(n.filterFieldFactory().hitClearFilter())}),[l,n]);return(0,p.jsxs)("div",{className:S.c.searchBoxContainer,children:[(0,p.jsx)(a.Suspense,{fallback:null,children:(0,p.jsx)(_s.Q,{placeholder:d._s.get("playlist.search_in_playlist"),onFilter:o,onClear:c,clearOnEscapeInElementRef:t})}),(0,p.jsx)(ws.Q,{columns:[...s],isBooklist:r})]})}));var Es=s(23460),Ls=s(52760),Ps=s(62298),Us=s(76008),Ms=s(53848),Os=s(6156),Bs=s(1600);const Ds="Uw4gqTFuHRLn4VKga_bJ",Fs="SdECNwBCnmkKl0Q0mJff",Vs="HLkGXLclDq_7guCiD1Xq",Ks="vWR6alsFpTlgXUckErqF",zs="EbHQLci0cfLjHmS0AKp2",Hs="HzYFPEbZdd6fQW4jfcz4",Ws="SQEgwtR2aj51qFj6cMNZ",Qs="aaNtMSjjJ4cClWoe6K0k",qs="BhtBJTnsM9AotmyN0MPr",Ys="FwoyMQocCMLEafLlvAk5",Gs="xcn0geYcJliTHbvcds12",Js="KptBBI16DBjQBjvPQtlH";function Zs(e){const t=(0,a.useRef)(null);return(0,p.jsx)(Ls.O,{center:!0,onClose:e.onClose,ref:t,withPortal:!0,children:(0,p.jsx)(Ps.w,{className:Ds,"aria-label":"Example showing onClose property",body:(0,p.jsxs)("div",{className:qs,children:[(0,p.jsx)(xs.u,{size:"medium","aria-label":"IconX",iconOnly:Us.K,onClick:e.onClose,className:Gs}),(0,p.jsx)(xs.u,{size:"medium","aria-label":"IconArrowLeft",iconOnly:Os.A,className:Ys}),(0,p.jsx)("div",{className:Fs,children:(0,p.jsxs)("div",{className:Vs,children:[(0,p.jsx)("div",{className:zs,children:(0,p.jsxs)("div",{className:Hs,children:[(0,p.jsx)(Es.W,{className:Ws,src:"https://i.scdn.co/image/ab6761610000517469fd2e170a6d290939620b61",alt:"A headshot profile picture of Afrobeats artist Lojay",imageHeight:"150px",imageWidth:"150px",crop:!0,circle:!0}),(0,p.jsx)(Es.W,{className:Qs,src:"spotify:image:ab67706c0000da8465307c7864e1e9d53770a94e",alt:"Ginjapiano playlist profile picture",imageHeight:"150px",imageWidth:"150px",crop:!0,circle:!0})]})}),(0,p.jsxs)("div",{className:Ks,children:[(0,p.jsxs)(n.a,{as:"p",variant:"marginalBold",children:[(0,p.jsx)("span",{style:{color:"#dc744d"},children:"4M"})," STREAMED THIS WEEK"]}),(0,p.jsxs)(n.a,{as:"p",variant:"titleMedium",children:["IM IN THE ",(0,p.jsx)("span",{style:{color:"#dc744d"},children:"TOP 21% "}),"OF GINJAPIANO LISTENERS THIS WEEK."]})]}),(0,p.jsx)("div",{className:zs,children:(0,p.jsx)(Bs.S,{size:"xlarge"})})]})}),(0,p.jsx)("div",{className:Js,children:(0,p.jsx)(j.g,{colorSet:"invertedLight",children:"Share"})})]})})})}const Xs="nTTPGZGk721M6gfldG43",$s="BFYSUcA4ifYvgDzOQX5Q",ea="el9_37CCpYKxCRKDDyww",ta="FB376b7R1M_0YQZ_SahS",sa="srPBn9_CV0NzQEEzW9f6",aa="te8Z8OuKxZx1gbjb7_ua",ia=a.memo((function({setuserView:e}){const[t,s]=(0,a.useState)(!1);return(0,p.jsxs)(p.Fragment,{children:[t&&(0,p.jsx)(Zs,{onClose:()=>{s(!1)}}),(0,p.jsx)(Ls.O,{center:!0,withPortal:!0,children:(0,p.jsx)(Ps.w,{colorSet:"overMedia","aria-label":"Title",body:(0,p.jsx)("div",{children:(0,p.jsx)(n.a,{as:"p"})}),dialogTitle:(0,p.jsxs)("div",{className:Xs,children:[(0,p.jsxs)("div",{className:ea,children:[(0,p.jsxs)("div",{children:[(0,p.jsx)(Es.W,{src:"https://i.scdn.co/image/54470e5e056b93d7022076960d3a6b2267ece226",alt:"A figure sits cross-legged but poised in front of their synthesizer",imageHeight:"20px",imageWidth:"20px",crop:!0,circle:!0}),(0,p.jsx)(Es.W,{src:"https://i.scdn.co/image/54470e5e056b93d7022076960d3a6b2267ece226",alt:"A figure sits cross-legged but poised in front of their synthesizer",imageHeight:"30px",imageWidth:"30px",crop:!0,circle:!0})]}),(0,p.jsx)(n.a,{as:"h1",variant:"titleMedium",children:"Rap Caviar"})]}),(0,p.jsxs)("div",{className:$s,children:[(0,p.jsx)(xs.u,{iconOnly:Us.K,onClick:()=>e(!1),className:sa}),(0,p.jsx)(xs.u,{iconOnly:Ms.Y,className:aa,onClick:()=>{s(!0)}})]}),(0,p.jsx)("div",{className:ta,children:(0,p.jsx)(n.a,{as:"p",variant:"bodyMedium",children:"Hello you made it to the top 10 percent"})})]}),id:"dialogAlert"})})]})})),ra="__97AKHEfxNtqFsLai1b",na="pzFwHV7jvPlWTI6cG5TV",la="iZu1aH8cr2cw98gqmTeo",oa="JRvbfJh7eAZ_1FrQukej";function ca(){const[e,t]=(0,a.useState)(!1);return(0,p.jsxs)(p.Fragment,{children:[e&&(0,p.jsx)(ia,{setuserView:t}),(0,p.jsxs)("button",{className:ra,onClick:()=>t(!0),children:[(0,p.jsxs)("div",{className:na,children:[(0,p.jsx)(Es.W,{className:la,src:"https://i.scdn.co/image/54470e5e056b93d7022076960d3a6b2267ece226",alt:"A figure sits cross-legged but poised in front of their synthesizer",imageHeight:"30px",imageWidth:"30px",crop:!0,circle:!0}),(0,p.jsx)(Es.W,{className:la,src:"https://i.scdn.co/image/54470e5e056b93d7022076960d3a6b2267ece226",alt:"A figure sits cross-legged but poised in front of their synthesizer",imageHeight:"30px",imageWidth:"30px",crop:!0,circle:!0}),(0,p.jsx)(Es.W,{className:la,src:"https://i.scdn.co/image/54470e5e056b93d7022076960d3a6b2267ece226",alt:"A figure sits cross-legged but poised in front of their synthesizer",imageHeight:"30px",imageWidth:"30px",crop:!0,circle:!0})]}),(0,p.jsxs)("div",{className:oa,children:[(0,p.jsx)(n.a,{as:"p",variant:"bodySmallBold",children:"View employee leaderboard"}),(0,p.jsx)(n.a,{as:"p",variant:"bodySmall",children:"You're in the top 21% of listeners."})]})]})]})}var da=s(30808),ua=s(96692);const ma=a.memo((function({playlist:e,capabilities:t,spec:s,isPlaying:i,isActive:r,togglePlay:n,isBooklist:o,isConcert:c=!1,backgroundColor:u,tracklistDomRef:m,sortableColumns:h}){const{metadata:{uri:y,name:x,unfilteredTotalLength:g,isOwnedBySelf:b,canPlay:f,isPublished:C,totalLength:j}}=e,k=(0,H.O)(),I=(0,xe.Mk)(),T=(0,a.useMemo)((()=>s.shuffleButtonContainerFactory()),[s]),R=t.canFilter&&g>0,A=t.canSort&&g>0,_=g>0,w=(0,l.IP)(Z.E$H),N=(0,l.IP)(Z.yqp,{loadingValue:!1}),E=(0,ua.Y)(),[L,P]=(0,v.X)(y),U=(0,z.w)(),M=(0,a.useCallback)((async()=>{U({targetUri:y,intent:L?"unsave":"save",type:"click"});try{await P(!L)}catch{}}),[L,U,P,y]),O=(0,a.useCallback)((()=>{const e=s.shareButtonFactory().hitShare({entityToBeShared:y,shareId:""});I.logInteraction(e)}),[s,I,y]),B=(0,a.useCallback)((()=>{let e;const t=s.heartButtonFactory();e=L?t.hitUnfollow({itemToBeUnfollowed:y}):t.hitFollow({itemToBeFollowed:y}),I.logInteraction(e),M()}),[s,M,L,I,y]),D=(0,ys.u)(),F=R&&A;return(0,p.jsxs)(rs.g,{backgroundColor:u,children:[(0,p.jsxs)(ns.i,{children:[f&&!o?(0,p.jsx)(ms.e,{onClick:n,isPlaying:i,size:D,uri:y,ariaPlayLabel:d._s.get("playlist.a11y.play",x),ariaPauseLabel:d._s.get("playlist.a11y.pause",x)}):null,E&&j>0&&!o&&(0,p.jsx)(xe.Ud,{spec:T,children:(0,p.jsx)(hs.I,{shuffleContext:da.y.playlistActionBar,entityName:x,contextUri:y,isActive:r,activationPlacement:"bottomEnd",size:D})}),b?null:(0,p.jsx)(ds.m,{children:(0,p.jsx)(kt.O,{isAdded:!!L,onClick:B,size:D})}),!o&&(0,p.jsx)(ls.W,{uri:y,isFollowing:!!L,canDownload:_,onClick:(e,t)=>(0,ae.cN)(t,s.downloadButtonFactory(),I,y),onFollow:M,size:D}),(0,p.jsx)(us.Q,{property:Z.UHG,renderNewExperience:()=>e.metadata.permissions?.canAdministratePermissions&&k&&(!o||N)?(0,p.jsx)(Ss,{onClick:O,label:d._s.get("permissions.invite-collaborators",x),uri:y,size:D}):null}),(c||o)&&(0,p.jsx)(Rt.C,{uri:y,sharingInfo:null,interactionData:{intent:"share",type:"click",itemIdSuffix:c?"concerts-near-you/share":"booklist/share"},onClick:O,size:D}),(0,p.jsx)(os.p,{onShow:()=>(0,ae.ni)(s,I),menu:(0,p.jsx)(cs.E,{uri:y,isPublished:C}),children:(0,p.jsx)(Tt.g,{label:d._s.get("more.label.context",x),size:D})}),F?(0,p.jsx)(xe.Ud,{spec:s,children:(0,p.jsx)(Ns,{metadata:e.metadata,tracklistDomRef:m,sortableColumns:h})}):(0,p.jsx)("div",{className:S.c.leadingSlot,children:(0,p.jsx)(us.Q,{property:Z.RTD,renderNewExperience:()=>(0,p.jsx)(ps.W,{options:[],onSelect:()=>{},selected:null,enableViewModeMenu:!0})})})]}),w&&(0,p.jsx)(ca,{})]})}));var pa=s(92628);const ha=e=>{const t=(0,xe.Mk)(),s=(0,a.useMemo)((()=>e.spec.promoCardFactory()),[e.spec]),i=(0,xe.K2)(s);return(0,p.jsxs)("div",{className:S.c.concertsFooter,children:[(0,p.jsx)(Ve.default,{to:"/concerts",className:S.c.ctaLink,onClick:()=>{const e=s.hitUiNavigate({destination:"spotify:app:concerts"});t.logInteraction(e)},children:(0,p.jsxs)("div",{className:S.c.promoRow,ref:i,children:[(0,p.jsx)(n.a,{as:"h2",variant:"bodyMediumBold",className:S.c.promoTitle,children:d._s.get("concerts.find_more")}),(0,p.jsx)(pa.a,{as:"span",selected:!0,children:d._s.get("concerts.find_nearby")}),(0,p.jsx)("img",{className:S.c.promoImage,alt:"",src:"https://i.scdn.co/image/ab676d63000076a0dbdb7dc2499cbb9ef096518d"})]})}),(0,p.jsx)("div",{className:S.c.disclaimerContainer,children:(0,p.jsx)(n.a,{as:"div",variant:"marginal",semanticColor:"textSubdued",children:d._s.get("concerts_near_you.playlist_disclaimer")})})]})};var ya=s(1840),xa=s(19804),ga=s(45060);const ba="multiUserAttributionDisplayNamesV2";function fa(e){return Ae(e)||_e(e)}function Ca(e){return Ae(e)||_e(e)||we(e)}const ja=a.memo((function({ariaLabel:e,nrTracks:t,playlistUri:s,playlistName:r,isMixedMedia:n,isLive:o,isBlend:m,isConcert:h,isBooklist:y,canEdit:x,scrollToUid:g,feedbackPath:b,deleteFeedbackPath:f,usePlayContextItem:C,tracklistRef:j,tracklistDomRef:v,canRemove:k,spec:I,initialItems:T,isCompactMode:R=!1,sortableColumns:S,hasSpotifyAudiobooks:E}){const L=(0,xe.Mk)(),P=(0,l.IP)(Z.Wwy),U=(0,a.useContext)(ce.Iv),{filter:M}=(0,a.useContext)(_.on),{sortState:O,setSortState:B}=(0,a.useContext)(w.iC),D=(0,a.useRef)((()=>{})),[F,V]=(0,a.useState)([]),K=(0,i.OY)(),z=(0,Kt.w)(),H=(0,a.useCallback)((()=>{j?.current&&j.current.update()}),[j]);(0,ce.UD)(s,H);const W=(0,a.useCallback)(((e,t)=>{B((0,A.Md)(e,O)),L.logInteraction(I.columnHeaderFactory({identifier:e,position:t||0}).hitSort())}),[B,O,L,I]),Q=(0,a.useCallback)((e=>{D.current(),U.remove(s,e)}),[U,s]),q=(0,a.useCallback)(((e,t,s=!1)=>{k&&(D.current=t,e.length>1&&!s?V(e):Q(e))}),[k,Q]);(0,a.useEffect)((()=>{j?.current&&g&&j.current.scrollToItem({uid:g})}),[g,j]);const Y=(0,a.useCallback)((async(e,t)=>{const a=await U.getContents(s,{offset:e,limit:t,sort:(0,A.Qn)(O),filter:M,decorateFormatListData:!!b||o||m});return{items:a.items,totalLength:a.totalLength}}),[s,U,O,M,b,o,m]),G=(0,a.useCallback)(((e,t,a)=>{if(!j?.current)return;const i=j.current.getRows()[t];i&&(L.logInteraction(I.dragSort()),a===ga.U.Before?U.move(s,e,{before:i}):U.move(s,e,{after:i}))}),[j,L,I,U,s]),J=(0,a.useCallback)(((e,t,a)=>{if(!j?.current)return;const i=j.current.getRows()[t];i&&(L.logInteraction(I.dragAddToPlaylist({playlist:s,itemToBeAdded:e[0]})),a===ga.U.Before?K((0,u.gZ)(s,e,{before:{uri:i.uri,uid:i.uid}})):K((0,u.gZ)(s,e,{after:{uri:i.uri,uid:i.uid}})))}),[j,L,I,s,K]),X=(0,a.useCallback)((()=>{U.resync(s)}),[U,s]),$=(0,a.useCallback)(((e,t)=>{let a,i=null;_e(e)?(i=e.show,a=e.images.concat(e.show?.images||[])):Ae(e)?(i=e.album,a=e.album?.images):we(e)&&(a=e.images);const l=(0,Qt.C)(a,{desiredSize:40,desiredLabel:"small"});let o=[];x&&O.order===Et.gF.NONE&&(o=y?[Nt.__.AUDIOBOOKS]:[Nt.__.TRACKS,Nt.__.LOCAL_TRACKS,Nt.__.EPISODES,...E?[Nt.__.AUDIOBOOKS]:[]]);const d="1"===e?.formatListAttributes?.["dislike-feedback-selected"],u=!!_e(e)&&e.podcastSubscription.isUserSubscribed;let g=!1;_e(e)&&e.podcastSubscription.isPaywalled&&!u?g=!0:fa(e)?g=e.isPlayable&&!d:we(e)&&(g=!0);let j=!1;_e(e)&&e.podcastSubscription.isPaywalled?j=!0:we(e)&&(j=e.isLocked&&!e.isOutOfMarket);const v=m&&((e,t)=>{const s=[];if(!t)return s;const a=t[ba]?ba:"multiUserAttributionDisplayNames",i=t?.[a]?.split(","),r=t?.multiUserAttributionImages?.split(",");if(!i||!r)return s;const n=t?.multiUserAttributionUsernamesV2?.split(",")||[],l=t?.multiUserAttributionType?.split(",")||[],o=i.length;for(let e=0;e<o;e++){const t=n[e],a=t&&(0,c.oh)(t).toURI();s.push({username:t,uri:a,displayName:i[e],images:(d=r[e],d.length>1?[{url:d}]:[]),recsplanation:l[e]})}var d;return s.sort(((t,s)=>t.username?t.username===e?.username?-1:s.username===e?.username?1:0:0))})(e.addedBy,e?.formatListAttributes)||e.addedBy&&[e.addedBy]||[];let I=0;fa(e)?I=e.duration.milliseconds:we(e)&&(I=e.durationMs||0);let T="";return Ca(e)&&(T=e.name),(0,p.jsx)(Et.Yn,{isCompactMode:R,index:t,playIndex:e.playIndex??void 0,contextUri:s,uri:e.uri,uid:e.uid,isPlayable:g,duration_ms:I,isPaywalled:j,isUserSubscribed:u,name:T,artists:Ae(e)?e.artists:void 0,albumOrShow:i,isExplicit:(Ca(e)&&e.isExplicit)??!1,hasAssociatedVideo:(Ae(e)&&e.hasAssociatedVideo&&P)??!1,isMixedMedia:n,isLocal:Ae(e)&&e.isLocal,addedBy:v,hasDecoratedAddedBy:U.getCapabilities().canDecorateAddedBy,dateAdded:e.addedAt,release_date:_e(e)&&e.release.date||"",isMOGEFRestricted:(Ae(e)||_e(e))&&e.is19PlusOnly,type:e.type,imgUrl:l?.url||"",onMove:G,onInsert:J,usePlayContextItem:C,allowedDropTypes:o,feedbackPath:b,feedbackUri:e?.formatListAttributes?.feedback_uri,deleteFeedbackPath:f,isDisliked:d,isBlend:m,ticketingSiteURL:e?.formatListAttributes?.ticketingSite,eventDate:e?.formatListAttributes?.eventDate,canRemove:k,onFeedbackClick:X,playlistName:r,isConcert:h,concertsCount:e.formatListAttributes?.concerts_count,concertURI:e.formatListAttributes?.target_uri,concertDate:e.formatListAttributes?.first_concert_date,concertVenue:e.formatListAttributes?.first_concert_venue,authorName:we(e)?e.authorName:"",isOutOfMarket:!!we(e)&&e.isOutOfMarket,consumptionCapExplanation:we(e)?e.consumptionCapExplanation:void 0,isOwnedBySelf:x},t+e.uri)}),[x,y,O.order,m,R,s,P,n,U,G,J,C,b,f,k,X,r,h,E]),ee=(0,a.useCallback)((e=>({uri:e.uri,uid:e.uid,type:e.type})),[]),[,te]=(0,N.yA)();return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(Ht.oL,{value:"playlist-tracklist",children:(0,p.jsx)(Et.aE,{isCompactMode:R,testID:"playlist-tracklist",ariaLabel:e,hasHeaderRow:!0,columns:z,sortableColumns:S,sortState:O,onSort:W,onRemove:q,renderRow:$,resolveItem:ee,nrTracks:t,fetchTracks:Y,limit:100,canFetchAllTracks:U.getCapabilities().canFetchAllTracks,outerRef:j,outerDomRef:v,tracks:T,isConcertPlaylist:h,onNrValidItemsChange:te,columnPersistenceKey:"playlist-tracklist"},s)}),(0,p.jsx)(xa.u,{title:d._s.get("playlist.remove_from_playlist",r),isOpen:F.length>0,tracks:F,onClose:e=>{e.stopPropagation(),V([])},onRemove:Q})]})}));var va=s(18300),ka=s(87056),Ia=s(5540),Ta=s(44772),Ra=s(66514),Sa=s(88272);const Aa=new Sa.a("queryInlineCurationSearchV2","query","ba8322962d1da0bfea18fd0831d1af7936344c8b7401510608a272a23adad800",null),_a=new Sa.a("queryInlineCurationSearchV2Booklists","query","ba8322962d1da0bfea18fd0831d1af7936344c8b7401510608a272a23adad800",null),wa=new Sa.a("queryInlineCurationSearchAlbum","query","74a97c6afa1c6c23e1d9b897756fc362ca7e5ed718ac59ba65ffa85f687f7113",null),Na=new Sa.a("queryInlineCurationSearchArtist","query","657c07a8943ea6e49c61833dde16d8d51cb64e921dd80827255d6e2519621c34",null);var Ea=s(10572);function La(e){return{type:D.s.AUDIOBOOK,uri:e.uri,name:e.name,description:e.htmlDescriptionPlain??"",authorName:e.authors?.map((e=>e?.name)).join(d._s.getSeparator())||"",images:e.coverArt?.sources??[],isLocked:(0,Ea.IR)(e.accessInfo),isExplicit:e.contentRating?.label===Je.A7.Explicit,durationMs:e.duration?.totalMilliseconds??0,topics:e.genres?.map((e=>({uri:e.destinationUri,title:e.contextualName})))||[],signifierText:e.accessInfo?.signifier?.text??"",rating:{average:e.rating?.averageRating?.average??0,showAverage:!!e.rating?.averageRating?.showAverage},sharingInfo:e.sharingInfo,publishDate:null,isOutOfMarket:!1,consumptionCapExplanation:null,uid:"",playIndex:null,addedAt:null,addedBy:null,formatListAttributes:null}}var Pa=s(84340),Ua=s(59476),Ma=s(96768),Oa=s(52276);function Ba(e){return{type:D.s.ALBUM,uri:e.uri,id:e.id,name:e.name,images:(0,Ua.SG)(e.coverArt)}}function Da(e){if("Album"!==e.data.__typename)return null;return Ba(e.data)}function Fa(e){const t=e?.items.filter((e=>"AlbumResponseWrapper"===e.__typename));return(t??[]).map((e=>Da(e))).filter(Ma.g)||[]}function Va(e){if("Artist"!==e.data.__typename)return null;const t=e.data;return{type:D.s.ARTIST,uri:t.uri,id:t.id,name:t.profile.name,images:(0,Ua.SG)(t.visuals.avatarImage)}}function Ka(e){if("Episode"!==e.data.__typename)return null;const t=e.data,s=t.podcastV2.data;return"Podcast"!==s.__typename?null:{type:D.s.EPISODE,uri:t.uri,id:t.id,name:t.name,images:(0,Ua.SG)(t.coverArt),isExplicit:t.contentRating?.label===Pa.A7.Explicit,is19PlusOnly:t.contentRating?.label===Pa.A7.NineteenPlus,podcast:{id:s.id,uri:s.uri,name:s.name},isPlayable:t.playability.playable}}function za(e){const t=(0,Ua.SG)(e.albumOfTrack?.coverArt||null);return{type:D.s.TRACK,uri:e.uri,id:e.id,name:e.name,album:{name:e.albumOfTrack?.name||"",uri:e.albumOfTrack?.uri||"",imgUrl:t.at(0)?.url||"",id:e.albumOfTrack?.id||""},artists:e.artists.items.map((e=>({id:e.id,name:e.profile.name,uri:e.uri}))),isPlayable:e.playability.playable,isExplicit:e.contentRating?.label===Pa.A7.Explicit,is19PlusOnly:e.contentRating?.label===Pa.A7.NineteenPlus}}function Ha(e){if("Track"!==e.data.__typename)return null;return za(e.data)}function Wa(e){return(e?.itemsV2??[]).map((e=>{const t=(0,Ua._M)(e,"item");switch(t.__typename){case"AlbumResponseWrapper":return Da(t);case"ArtistResponseWrapper":return Va(t);case"EpisodeResponseWrapper":return Ka(t);case"TrackResponseWrapper":return Ha(t);default:return(0,Oa.I)(t),null}})).filter(Ma.g)||[]}function Qa(e){return(e?.itemsV2??[]).map((e=>{const t=(0,Ua._M)(e,"item");return"AudiobookResponseWrapper"===t.__typename&&"Audiobook"===t.data.__typename?La(t.data):null})).filter(Ma.g)||[]}const qa=async(e,t,s,a=0,i=10,r=10)=>{const n={term:t,offset:a,limit:i,numberOfTopResults:r};if(s){const s=await e(_a,n),a=s?.data?.searchV2;return a?(l=t,{albums:[],artists:[],episodes:[],tracks:[],topResults:Qa(a.topResultsV2)??[],query:l}):null}var l;const o=await e(Aa,n),c=o?.data?.searchV2;return c?function(e,t){return{albums:Fa(e.albumsV2)??[],artists:(i=e.artists,((i?.items??[]).map((e=>Va(e))).filter(Ma.g)||[])??[]),episodes:(a=e.episodes,((a?.items??[]).map((e=>Ka(e))).filter(Ma.g)||[])??[]),tracks:(s=e.tracksV2,((s?.items??[]).map((e=>Ha(e.item))).filter(Ma.g)||[])??[]),topResults:Wa(e.topResultsV2)??[],query:t};var s,a,i}(c,t):null},Ya=async(e,t,s=50,a=0)=>{const i={uris:[t],limit:s,offset:a},r=await e(wa,i),n=r?.data?.albums;return n?function(e){const t=e.at(0);if(!t)return null;switch(t.__typename){case"Album":return{albums:[],artists:[],episodes:[],tracks:t.tracks.items.map((e=>za(e.track)))||[],topResults:[]};case"GenericError":case"NotFound":return null;default:return(0,Oa.I)(t),null}}(n):null},Ga=async(e,t,s=50,a=0)=>{const i={uris:[t],limit:s,offset:a},r=await e(Na,i),n=r?.data?.artists;return n?function(e){const t=e.at(0);if(!t)return null;switch(t.__typename){case"Artist":return{albums:t.discography.popularReleasesAlbums.items.map((e=>Ba(e)))||[],artists:[],episodes:[],tracks:t.discography.topTracks.items.map((e=>za(e.track)))||[],topResults:[]};case"GenericError":case"NotFound":return null;default:return(0,Oa.I)(t),null}}(n):null};var Ja=s(18648),Za=s(58024);const Xa="playlist-inlineSearchBox-filterInputContainer",$a="playlist-inlineSearchBox-filterInput",ei="playlist-inlineSearchBox-overlay",ti="playlist-inlineSearchBox-searchIconContainer",si="playlist-inlineSearchBox-searchIcon",ai="playlist-inlineSearchBox-clearButton",ii=a.memo((function({placeholder:e,onChange:t=(()=>{}),onFocus:s=(()=>{})}){const[i,r]=(0,a.useState)(""),l=(0,a.useRef)(null),o=(0,Ja.yK)((e=>{t(e)}),200),c=(0,a.useCallback)((e=>{const t=e.currentTarget.value;r(t),o(t)}),[r,o]),u=(0,a.useCallback)((()=>{l.current&&l.current.focus(),r(""),t("")}),[r,t]),m=(0,a.useCallback)((e=>{"Escape"===e.key&&i&&u()}),[i,u]);return(0,p.jsxs)("div",{className:Xa,role:"search",children:[(0,p.jsx)(n.a,{as:"input",variant:"bodySmall",ref:l,className:Le()($a),role:"searchbox",maxLength:80,autoCorrect:"off",autoCapitalize:"off",spellCheck:!1,placeholder:e,onChange:c,onKeyDown:m,onFocus:s,value:i}),(0,p.jsxs)("div",{className:ei,children:[(0,p.jsx)("span",{className:ti,children:(0,p.jsx)(Za.O,{size:"small",className:si,"aria-hidden":"true"})}),i&&(0,p.jsx)("button",{className:ai,onClick:u,"aria-label":d._s.get("search.a11y.clear-input"),children:(0,p.jsx)(Us.K,{size:"small"})})]})]})})),ri=({renderRow:e,searchResults:t,renderSeeAllRow:s,seeAllXList:a})=>(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(Et.aE,{ariaLabel:d._s.get("search.title.top-results"),renderRow:e,rowPlaceholder:Et.gl,nrTracks:t.length,tracks:t,resolveItem:e=>({uri:e.uri}),columns:[Et.yw.TITLE_AND_ARTIST,Et.yw.ALBUM,Et.yw.ADD],testID:"playlist-inline-curation-loaded-results"}),(0,p.jsx)(Et.aE,{ariaLabel:d._s.get("search.title.all"),renderRow:s,rowPlaceholder:Et.gl,nrTracks:a.length,tracks:a,resolveItem:e=>({uri:e.uri}),columns:[Et.yw.TITLE_AND_ARTIST,Et.yw.ALBUM,Et.yw.ADD],testID:"playlist-inline-curation-see-all-options"})]}),ni=({renderRow:e,searchResults:t})=>(0,p.jsx)(Et.aE,{ariaLabel:d._s.get("search.title.top-results"),renderRow:e,rowPlaceholder:Et.gl,nrTracks:t.length,tracks:t,resolveItem:e=>({uri:e.uri}),columns:[Et.yw.TITLE_AND_ARTIST,Et.yw.ALBUM,Et.yw.ADD]}),li=({renderRow:e,searchResults:t})=>{const s=t.filter((e=>e.type===D.s.TRACK)),a=t.filter((e=>e.type===D.s.ALBUM));return(0,p.jsxs)("div",{children:[(0,p.jsx)(n.a,{as:"p",variant:"bodyMediumBold",className:S.c.artistResultListTitle,children:d._s.get("playlist.curation.popular_songs")}),(0,p.jsx)(Et.aE,{ariaLabel:d._s.get("playlist.curation.popular_songs"),renderRow:e,rowPlaceholder:Et.gl,nrTracks:s.length,tracks:s,resolveItem:e=>({uri:e.uri}),columns:[Et.yw.TITLE_AND_ARTIST,Et.yw.ALBUM,Et.yw.ADD]}),(0,p.jsx)(n.a,{as:"p",variant:"bodyMediumBold",className:S.c.artistResultListTitle,children:d._s.get("playlist.curation.albums")}),(0,p.jsx)(Et.aE,{ariaLabel:d._s.get("playlist.curation.albums"),renderRow:e,rowPlaceholder:Et.gl,nrTracks:a.length,tracks:a,resolveItem:e=>({uri:e.uri}),columns:[Et.yw.TITLE_AND_ARTIST,Et.yw.ALBUM,Et.yw.ADD]})]})},oi=({renderRow:e,searchResults:t})=>(0,p.jsx)(Et.aE,{ariaLabel:d._s.get("search.title.top-results"),renderRow:e,rowPlaceholder:Et.gl,nrTracks:t.length,tracks:t,resolveItem:e=>({uri:e.uri}),columns:[Et.yw.TITLE_AND_ARTIST,Et.yw.ALBUM,Et.yw.ADD]}),ci=({renderRow:e,searchResults:t})=>(0,p.jsx)(Et.aE,{ariaLabel:d._s.get("search.title.top-results"),renderRow:e,rowPlaceholder:Et.gl,nrTracks:t.length,tracks:t,resolveItem:e=>({uri:e.uri}),columns:[Et.yw.TITLE_AND_ARTIST,Et.yw.ALBUM,Et.yw.ADD]}),di=({renderRow:e,searchResults:t})=>(0,p.jsx)(Et.aE,{ariaLabel:d._s.get("search.title.top-results"),renderRow:e,rowPlaceholder:Et.gl,nrTracks:t.length,tracks:t,resolveItem:e=>({uri:e.uri}),columns:[Et.yw.TITLE_AND_ARTIST,Et.yw.ALBUM,Et.yw.ADD]});var ui=s(16228);const mi="G2t3w2AAeb5OXp0_GeWs",pi="saVjTFMyWYUz975_tkQm",hi="thi8fNCkEhutRkDC90c0",yi="pHVlkChuJpEnBQyU3ADv",xi="ENWs3JxcqtD98_8fbPz2",gi="L8IUKEJL6JiTyE_qUVCc",bi="XcyjdXgsNX0DBt72tfiD",fi="VhJnuS7UcUPfIlzD8dlU",Ci="He29vQ5anFj_bJ5iEaI2",ji=({searchResult:e,index:t,isRTL:s,onClick:a})=>{const i=e.images.at(0)?.url;return(0,p.jsx)(ui.QJ,{className:xi,rowIndex:t,"aria-selected":!1,children:(0,p.jsxs)("div",{"aria-label":`${d._s.get("artist-page.tracks.seemore")} ${e.name}`,className:Ci,onClick:a,children:[(0,p.jsxs)(ui.m_,{columnIndex:0,className:gi,children:[void 0!==i?(0,p.jsx)("img",{className:hi,src:i,alt:e.name}):null,(0,p.jsxs)("div",{className:bi,children:[(0,p.jsx)(n.a,{as:"p",className:yi,variant:"bodyMedium",children:e.name}),(0,p.jsx)(n.a,{as:"p",variant:"bodySmall",semanticColor:"textSubdued",children:d._s.get("album")})]})]}),(0,p.jsx)(ui.m_,{columnIndex:1}),(0,p.jsx)(ui.m_,{columnIndex:2,children:(0,p.jsx)("button",{"data-testid":"top-bar-forward-button","aria-label":`See more from ${e.name}`,className:fi,onClick:a,children:s?(0,p.jsx)(Ia.C,{}):(0,p.jsx)(ka.U,{})})})]})})};var vi=s(26020);const ki=({size:e})=>(0,p.jsx)("div",{className:pi,children:(0,p.jsx)(vi.s,{size:e})}),Ii=({searchResult:e,index:t,isRTL:s,onClick:a})=>{const i=e.images.at(0)?.url;return(0,p.jsx)(ui.QJ,{className:xi,rowIndex:t,"aria-selected":!1,children:(0,p.jsxs)("div",{"aria-label":`${d._s.get("artist-page.tracks.seemore")} ${e.name}`,className:Ci,onClick:a,"data-testid":"playlist-inline-curation-artist",children:[(0,p.jsxs)(ui.m_,{columnIndex:0,className:gi,children:[void 0!==i?(0,p.jsx)("img",{className:mi,src:i,alt:e.name}):(0,p.jsx)(ki,{size:"small"}),(0,p.jsxs)("div",{className:bi,children:[(0,p.jsx)(n.a,{as:"p",className:yi,variant:"bodyMedium",children:e.name}),(0,p.jsx)(n.a,{as:"p",variant:"bodySmall",semanticColor:"textSubdued",children:d._s.get("artist")})]})]}),(0,p.jsx)(ui.m_,{columnIndex:1}),(0,p.jsx)(ui.m_,{columnIndex:2,children:(0,p.jsx)("button",{"data-testid":"top-bar-forward-button","aria-label":`See more from ${e.name}`,className:fi,onClick:a,children:s?(0,p.jsx)(Ia.C,{}):(0,p.jsx)(ka.U,{})})})]})})},Ti=({episode:e,contextUri:t,index:s,usePlayContextItem:a})=>(0,p.jsx)(Et.WG,{uid:e.id,uri:e.uri,isPlayable:e.isPlayable,isMOGEFRestricted:e.is19PlusOnly,isExplicit:e.isExplicit,contextUri:t,name:e.name,imgUrl:e.images.at(0)?.url??"",index:s,podcast:e.podcast,usePlayContextItem:a}),Ri=({label:e,index:t,isRTL:s,onClick:a})=>(0,p.jsx)(ui.QJ,{className:xi,rowIndex:t,"aria-selected":!1,children:(0,p.jsxs)("div",{"aria-label":e,className:Ci,onClick:a,children:[(0,p.jsx)(ui.m_,{columnIndex:0,className:gi,children:(0,p.jsx)(n.a,{as:"p",className:yi,variant:"bodyMedium",children:e})}),(0,p.jsx)(ui.m_,{columnIndex:1}),(0,p.jsx)(ui.m_,{columnIndex:2,children:(0,p.jsx)("button",{"data-testid":"top-bar-forward-button","aria-label":e,className:fi,onClick:a,children:s?(0,p.jsx)(Ia.C,{}):(0,p.jsx)(ka.U,{})})})]})}),Si=({track:e,contextUri:t,index:s,usePlayContextItem:a})=>(0,p.jsx)(Et.eS,{uid:e.id,uri:e.uri,isPlayable:e.isPlayable,isMOGEFRestricted:e.is19PlusOnly,isExplicit:e.isExplicit,contextUri:t,name:e.name,imgUrl:e.album.imgUrl,index:s,album:e.album,artists:e.artists,usePlayContextItem:a});let Ai=function(e){return e[e.SEARCH=0]="SEARCH",e[e.ALBUM=1]="ALBUM",e[e.ARTIST=2]="ARTIST",e[e.PODCAST=3]="PODCAST",e[e.PLAYLIST=4]="PLAYLIST",e[e.ALBUMRESULTS=5]="ALBUMRESULTS",e[e.ARTISTRESULTS=6]="ARTISTRESULTS",e[e.PODCASTRESULTS=7]="PODCASTRESULTS",e[e.EPISODERESULTS=8]="EPISODERESULTS",e[e.TRACKRESULTS=9]="TRACKRESULTS",e}({});const _i=(e,t)=>"GO_BACK"===t.type?1===e.breadcrumbs.length?e:e={...e,breadcrumbs:e.breadcrumbs.slice(0,e.breadcrumbs.length-1)}:"NAV_TO_ENTITY"===t.type?e={...e,breadcrumbs:[...e.breadcrumbs,t.level]}:("NAV_TO_RESULTS"===t.type?e={...e,breadcrumbs:[...e.breadcrumbs,t.level]}:"CHANGE_TERM"===t.type&&(e={term:t.term,breadcrumbs:[{navType:Ai.SEARCH,term:t.term,title:""}]}),e),wi=({resultList:e,level:t,isRTL:s,playlistUri:i,navToResults:r,navToEntity:l,term:o,isBooklist:u})=>{let m=e;const h=(e=>e.map((e=>{if(e.type===D.s.TRACK||e.type===D.s.EPISODE){const{uri:t,id:s}=e;return{type:(0,c._Z)(t)?D.s.TRACK:D.s.EPISODE,uri:t,uid:s,provider:null}}return null})).filter(Ma.g))(e),y=(0,U.C)(),{usePlayContextItem:x}=(0,oe.I)({uri:`${i.replace("spotify:","spotify:internal:recs:")}:${encodeURIComponent(o)}:${t?.navType??0}`,pages:[{items:h}]},{featureIdentifier:"search"}),g=(0,a.useCallback)(((e,t)=>(0,p.jsx)(Ri,{isRTL:s,index:t,label:e.label,onClick:()=>{r({navType:e.type,term:o,title:e.label})}},e.uri)),[s,r,o]),b=(0,a.useCallback)(((e,t)=>e.type===D.s.ARTIST?(0,p.jsx)(Ii,{isRTL:s,index:t,searchResult:e,onClick:()=>{l({navType:Ai.ARTIST,uri:e.uri,title:e.name})}},e.uri):e.type===D.s.EPISODE?(0,p.jsx)(Ti,{index:t,episode:e,contextUri:i.replace("spotify:","spotify:internal:recs:"),usePlayContextItem:x},e.uri):e.type===D.s.TRACK?(0,p.jsx)(Si,{index:t,track:e,contextUri:i.replace("spotify:","spotify:internal:recs:"),usePlayContextItem:x},e.uri):e.type===D.s.ALBUM?(0,p.jsx)(ji,{index:t,isRTL:s,searchResult:e,onClick:()=>{l({navType:Ai.ALBUM,uri:e.uri,title:e.name})}},e.uri):(0,p.jsx)(wt,{book:e,featureIdentifier:"playlist_recommendations",contextUri:i,isRecommendation:!0,showSeparator:0!==t},e.uri)),[s,l,i,x]);if(""===o)return(0,p.jsx)("div",{className:S.c.emptySearchTermContainer});if(!e||0===e?.length)return(0,p.jsxs)("div",{className:S.c.emptyStateContainer,children:[(0,p.jsx)(n.a,{as:"h1",variant:"titleSmall",children:d._s.get("search.empty-results-title",o)}),(0,p.jsx)(n.a,{as:"p",variant:"bodySmall",children:d._s.get("search.empty-results-text")})]});if(t?.navType===Ai.SEARCH){const t=[{type:Ai.ARTISTRESULTS,label:d._s.get("playlist.curation.see_all_artists"),uri:"spotify:internal:recs:see-all-artists"},{type:Ai.ALBUMRESULTS,label:d._s.get("playlist.curation.see_all_album"),uri:"spotify:internal:recs:see-all-albums"},{type:Ai.TRACKRESULTS,label:d._s.get("playlist.curation.see_all_songs"),uri:"spotify:internal:recs:see-all-songs"}];return m=e,u?(0,p.jsx)(p.Fragment,{children:m.map(((e,t)=>e&&e.type===D.s.AUDIOBOOK?(0,p.jsx)(wt,{contextUri:i,featureIdentifier:"playlist_recommendations",book:e,isRecommendation:!0,draggable:!0,onDragStart:t=>{y(t,{itemUris:[e.uri],itemMimeTypes:[Nt.__.AUDIOBOOKS],dragLabelText:e.name})},showSeparator:0!==t},t):null))}):(0,p.jsx)(ri,{renderRow:b,searchResults:m,renderSeeAllRow:g,seeAllXList:t})}return t?.navType===Ai.ALBUM?(0,p.jsx)(ni,{renderRow:b,searchResults:m}):t?.navType===Ai.ARTIST?(0,p.jsx)(li,{renderRow:b,searchResults:m}):t?.navType===Ai.ALBUMRESULTS?(0,p.jsx)(oi,{renderRow:b,searchResults:m}):t?.navType===Ai.TRACKRESULTS?(0,p.jsx)(ci,{renderRow:b,searchResults:m}):t?.navType===Ai.ARTISTRESULTS?(0,p.jsx)(di,{renderRow:b,searchResults:m}):null},Ni=({playlistUri:e,onCurationModeChange:t,isBooklist:s})=>{const[i,r]=(0,a.useState)([]),[l,o]=(0,a.useState)(),c=(0,Ta.k)(),{level:u,changeTerm:m,goBack:h,navToEntity:y,navToResults:x,term:g}=(()=>{const[e,t]=(0,a.useReducer)(_i,{term:"",breadcrumbs:[]}),{breadcrumbs:s,term:i}=e;return{changeTerm:e=>{t({type:"CHANGE_TERM",term:e})},level:s[s.length-1]||null,goBack:()=>{t({type:"GO_BACK"})},navToEntity:e=>{t({type:"NAV_TO_ENTITY",level:e})},navToResults:e=>{t({type:"NAV_TO_RESULTS",level:e})},term:i}})(),{request:b}=(0,a.useContext)(Ra.Q9);return(0,a.useEffect)((()=>{let e=!0;return(async()=>{if(u)switch(u.navType){case Ai.SEARCH:try{if(!l||l.query!==g&&""!==g){const t=await qa(b,g,s);e&&o(t)}else""===g&&r([])}catch{r([])}l&&r(l.topResults);break;case Ai.ARTISTRESULTS:l&&r(l?.artists);break;case Ai.ALBUMRESULTS:l&&r(l?.albums);break;case Ai.TRACKRESULTS:l&&r(l?.tracks);break;case Ai.EPISODERESULTS:l&&r(l?.episodes);break;case Ai.ALBUM:try{const t=await Ya(b,u.uri,100,0);e&&t&&r(t.tracks)}catch{r([])}break;case Ai.ARTIST:try{const t=await Ga(b,u.uri,100,0);e&&t&&r([...t.albums,...t.tracks])}catch{r([])}}})(),()=>{e=!1}}),[u,g,l,b,s]),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("section",{className:S.c.playlistInlineCurationSection,children:[(0,p.jsxs)("div",{className:S.c.playlistInlineCurationWrapper,children:[(0,p.jsx)(n.a,{as:"h1",className:S.c.playlistInlineCurationTitle,variant:"titleSmall",children:d._s.get("playlist.curation.title")}),(0,p.jsx)(a.Suspense,{fallback:null,children:(0,p.jsx)(ii,{placeholder:s?d._s.get("playlist.curation.search_placeholder-booklists"):d._s.get("playlist.curation.search_placeholder"),onFocus:()=>{t(!0)},onChange:e=>{m(e)}})})]}),(0,p.jsx)("button",{className:S.c.playlistInlineCurationCloseButton,onClick:()=>t(!1),children:(0,p.jsx)(Us.K,{"aria-label":d._s.get("close")})})]}),null!==u&&u.navType!==Ai.SEARCH?(0,p.jsxs)("button",{className:S.c.playlistInlineCurationBackButton,onClick:()=>h(),children:[c?(0,p.jsx)(ka.U,{"aria-label":d._s.get("navbar.go-back"),className:S.c.icon}):(0,p.jsx)(Ia.C,{"aria-label":d._s.get("navbar.go-back"),className:S.c.icon}),(0,p.jsx)(n.a,{as:"p",variant:"bodyMediumBold",children:u.title})]}):null,(0,p.jsx)("div",{className:S.c.searchResultListContainer,"data-testid":"playlist-inline-curation-results",children:(0,p.jsx)(wi,{playlistUri:e,term:g,level:u,resultList:i,navToEntity:y,navToResults:x,isRTL:c,isBooklist:s})})]})};var Ei=s(66852),Li=(s(78620),s(84944));const Pi={ARTIST:"artist",ALBUM:"album",PLAYLIST:"playlist",TRACK:"track",USER:"user"},Ui=e=>{const t=e.replace(/\+/g,"%20");return decodeURIComponent(t)},Mi=e=>{const t=/^spotify:(.*)$/.exec(e);if(!t)return{type:null,id:null};const s=t[1],a=/([^:]+):([^:]+)/g;let i;const r=[],n=[];for(;i=a.exec(s);){const e=i[1];let t=i[2];e===Pi.USER&&(t=Ui(t)),r.push(e),n.push(t)}if(0===r.length)return{type:null,id:null};const l=r.reduce(((e,t,s)=>(e[r[s]]=n[s],e)),{});return{type:r[r.length-1],id:n[n.length-1],...l}};var Oi=s(13748),Bi=s(37292);const Di=new Sa.a("getAudiobooksMetadata","query","e04c61a831b3e1861a5de961c520ddf7834127ef8e4b94724173a4c4a90e38fe",null),Fi=3e5;function Vi(e,t){return["list-extender",e,t]}const Ki=(e,t,s=10,i)=>{const r=2*s,n=3*s,l=(0,We.q$)(),c=(0,a.useRef)(0),[d,u]=(0,a.useState)(e),[m,p]=(0,a.useState)((()=>l.getQueriesData({queryKey:Vi(e,t),stale:!1}).at(0)?.[1]??[])),h=(0,a.useRef)(m.map((e=>e.uri??""))),{spec:y,logger:x}=(0,xe.gp)(o.L,{data:{uri:e}}),g=(0,a.useMemo)((()=>y.recommendedFactory()),[y]);(0,Bi.w)(Oi.Yh.OPERATION_COMPLETE,(({data:s})=>{s.uri===e&&(s.operation===Oi.m1.ADD?p((e=>e.filter((e=>s.uris.every((t=>t!==e.uri)))))):s.operation===Oi.m1.REMOVE&&p((e=>e.filter((e=>s.items.every((t=>t.uri!==e.uri)))))),s.operation!==Oi.m1.ADD&&s.operation!==Oi.m1.REMOVE||l.invalidateQueries({queryKey:Vi(e,t)}))}));const b=(0,a.useRef)(!0);(0,a.useEffect)((()=>(b.current||(p([]),u(e),h.current=[],c.current=c.current+1),b.current=!0,()=>{c.current=c.current+1})),[e]),(0,a.useEffect)((()=>{if(m.length<r){const e=Math.min(r,n-m.length),s=c.current,a=Vi(d,t),o=b.current&&0===h.current.length;(o?l.fetchQuery({queryKey:a,queryFn:()=>i(d,[],e),staleTime:Fi,gcTime:Fi}):i(d,h.current,e)).then((t=>{if(s!==c.current||!t)return;const i=t.map((e=>e?.uri&&e.uri)).filter((e=>null!==e));t.length<e&&h.current.length?h.current=[]:h.current=[...h.current,...i],p((e=>[...e,...t])),o&&l.setQueryData(a,t)}))}b.current=!1}),[r,n,d,m.length,l,i,t]);const f=(0,a.useCallback)((()=>{if(y){const e=g.refreshButtonFactory().hitRefreshContent();x.logInteraction(e)}p((e=>e.slice(s)))}),[x,g,y,s]);return{recommendations:m.slice(0,s),_bufferedRecommendations:m.slice(s),refresh:f}},zi=a.memo((function({uri:e}){const{recommendations:t,refresh:s}=((e,t=10)=>{const s=(0,a.useContext)(Li.I),{request:i}=(0,a.useContext)(Ra.Q9),r=(0,a.useCallback)((async(e,t,a)=>{const r=await s.getRecommendedBookUris(e,t,a),n=await i(Di,{uris:r});return n?.data?.podcasts.map((e=>"Audiobook"===e.__typename?La(e):null)).filter(Ma.g)??[]}),[s,i]);return Ki(e,"book",t,r)})(e),i=(0,U.C)(),r=(0,Ei.w)();return r?t?.length&&t.length>0?(0,p.jsxs)("div",{className:S.c.recommendedTrackList,children:[(0,p.jsx)("div",{className:S.c.top,children:(0,p.jsxs)("div",{className:S.c.header,children:[(0,p.jsx)(n.a,{variant:"titleSmall",children:d._s.get("playlist.extender.recommended.title")}),(0,p.jsx)(n.a,{variant:"bodySmall",className:S.c.subtitle,children:d._s.get("playlist.extender.songs.in.playlist")})]})}),r&&(0,p.jsxs)(p.Fragment,{children:[t.map(((t,s)=>t?(0,p.jsx)(wt,{contextUri:e,featureIdentifier:"playlist_recommendations",book:t,sharingInfo:t.sharingInfo,isRecommendation:!0,draggable:!0,onDragStart:e=>{i(e,{itemUris:[t.uri],itemMimeTypes:[Nt.__.AUDIOBOOKS],dragLabelText:t.name})},showSeparator:0!==s},s):null)),(0,p.jsx)(xs.u,{className:S.c.refreshButton,onClick:s,children:d._s.get("playlist.extender.refresh")})]})]}):null:(0,p.jsx)("div",{className:S.c.recommendedTrackList,children:(0,p.jsx)("div",{className:S.c.top,children:(0,p.jsxs)("div",{className:S.c.header,children:[(0,p.jsx)(n.a,{variant:"titleSmall",children:d._s.get("playlist.extender.recommended.title")}),(0,p.jsx)(n.a,{variant:"bodySmall",className:S.c.subtitle,children:d._s.get("web-player.playlist.recommender-dsa-message")})]})})})})),Hi=a.memo((function({playlistUri:e,canEdit:t,tracks:s}){const{usePlayContextItem:i}=(0,oe.I)({uri:e.replace("spotify:","spotify:internal:recs:"),pages:[{items:s.map((e=>({...e,provider:null,type:D.s.TRACK,uid:null})))}]},{featureIdentifier:"playlist_recommendations"}),r=(0,a.useCallback)(((s,a)=>{const r=s.duration;return(0,p.jsx)(Et.eS,{index:a,imgUrl:s.album.imageUrl,contextUri:e.replace("spotify","spotify:internal:recs"),uri:s.uri,isPlayable:!s.isMOGEFRestricted,name:s.name,artists:s.artists,album:{...s.album,imgUrl:s.album.imageUrl},isExplicit:s.explicit,isMOGEFRestricted:s.isMOGEFRestricted,usePlayContextItem:i,durationMs:r,shouldRenderDuration:!t,internalLink:!0},`${a}-${s.uri}`)}),[e,i,t]),n=(0,a.useMemo)((()=>[Et.yw.TITLE_AND_ARTIST,Et.yw.ALBUM,Et.yw.ADDED_AT,Et.yw.ADD]),[]),l=(0,a.useCallback)((e=>({uri:e.uri,uid:e.id})),[]),o=(0,a.useMemo)((()=>s.slice(0,Math.min(s.length,10))),[s]);return(0,p.jsx)(Et.aE,{ariaLabel:d._s.get("playlist.extender.recommended.header"),nrTracks:Math.min(s.length,10),rowPlaceholder:Et.gl,tracks:o,renderRow:r,resolveItem:l,columns:n},`${e}-recommended`)})),Wi=a.memo((function({playlistUri:e,playlistLength:t,canEdit:s}){const{recommendations:i,refresh:r}=((e,t=10)=>{const s=(0,a.useContext)(Li.I),i=(0,a.useCallback)((async(e,t,a)=>{const i=t.map((e=>Mi(e).id??""));return s.getRecommendedTracks(e,i,a)}),[s]);return Ki(e,"track",t,i)})(e),l=!t||0===t,o=(0,Ei.w)(),c=`${e}|${u=i,u?u.map((e=>e.uri)):[]}`;var u;ee({context:c,shouldFire:!!i.length});const m=l?d._s.get("playlist.extender.title.in.playlist"):d._s.get("playlist.extender.songs.in.playlist");return o?i.length>0?(0,p.jsxs)("div",{className:S.c.recommendedTrackList,children:[(0,p.jsx)("div",{className:S.c.top,children:(0,p.jsxs)("div",{className:S.c.header,children:[(0,p.jsx)(n.a,{variant:"titleSmall",children:d._s.get("playlist.extender.recommended.title")}),(0,p.jsx)(n.a,{variant:"bodySmall",className:S.c.subtitle,children:m})]})}),o&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(Hi,{playlistUri:e,canEdit:s,tracks:i}),(0,p.jsx)(xs.u,{className:S.c.refreshButton,onClick:r,children:d._s.get("playlist.extender.refresh")})]})]}):null:(0,p.jsx)("div",{className:S.c.recommendedTrackList,children:(0,p.jsx)("div",{className:S.c.top,children:(0,p.jsxs)("div",{className:S.c.header,children:[(0,p.jsx)(n.a,{variant:"titleSmall",children:d._s.get("playlist.extender.recommended.title")}),(0,p.jsx)(n.a,{variant:"bodySmall",className:S.c.subtitle,children:d._s.get("web-player.playlist.recommender-dsa-message")})]})})})})),Qi=a.lazy((()=>s.e(2256).then(s.bind(s,54536)))),qi=a.lazy((()=>Promise.resolve().then(s.bind(s,39968)))),Yi=a.lazy((()=>s.e(760).then(s.bind(s,3417)))),Gi=a.lazy((()=>s.e(3892).then(s.bind(s,25912)))),Ji=new Set([]),Zi=a.memo((function({playlist:e,capabilities:t}){const{metadata:{uri:s,name:m,images:h,totalLength:y,unfilteredTotalLength:x,isOwnedBySelf:C,hasEpisodes:j,canAdd:v,canRemove:k,formatListData:I,hasDateAdded:T,collaborators:R,isPublished:B,hasSpotifyAudiobooks:D,hasSpotifyTracks:F},contents:{items:W}}=e,{spec:Q,logger:q,UBIFragment:Y}=(0,xe.gp)(o.L,{data:{uri:s}}),G=(0,H.O)(),J=(0,l.IP)(ge.eK,{loadingValue:!1}),X=(0,l.IP)(ge.yq,{loadingValue:!1}),re=(0,l.IP)(Z.gVG,{loadingValue:!1}),{isCompactMode:ne}=(0,P.Q7)(),pe=a.useMemo((()=>Q.headerFactory()),[Q]),je=a.useMemo((()=>Q.tracklistFactory()),[Q]),ve=a.useMemo((()=>Q.actionBarFactory()),[Q]),ke="chart"===I?.type,Ie="concerts-near-you"===I?.type&&J,Te="live-streams"===I?.type,Re=["blend","celebrity-blend","friends-mix"].indexOf(I?.type||"")>-1,Se=[F,j,D].filter(Boolean).length>1,Ae=!Se&&!!D&&(0,va.G)(W),_e="artistsets"===I?.type||"this-is"===I?.attributes["editorial.series"],we=I?.attributes||{},Ne=we.header_image_url_desktop||we.image_url||null,Ee=v&&k,{inlineCurationModeIsOn:Le,handleInlineCurationModeChange:Pe}=((e,t)=>{const[s,i]=(0,a.useState)(e&&0===t),{scrollNodeChildRef:r}=(0,a.useContext)(ie.Ib),n=(0,a.useRef)(s);return(0,a.useEffect)((()=>{const e=!n.current;r&&e&&s&&r.current?.scrollIntoView({block:"end",behavior:"smooth"}),n.current=s}),[r,s]),{inlineCurationModeIsOn:s,handleInlineCurationModeChange:e=>{i(e)}}})(Ee&&(!Ae||X&&re),x),{productState:Ue}=(0,i.w1)($.cx),Me=!!Ue&&parseInt(Ue.ads,10)>0,Oe="spotify"===e.metadata.owner.username,Be=(0,i.OY)(),De=(0,r.KM)(),Fe=(0,r.IT)(),Ve=(0,l.IP)(Z.ML9,{loadingValue:!1}),Ke=(0,l.IP)(Z.QRC,{loadingValue:!1}),ze=(0,l.IP)(Z.Af5,{loadingValue:!1}),He=(0,L.useThisisPlaylistExtensionQuery)({uri:s},{gcTime:5*le.y,enabled:_e}).data?.playlistV2,We="Playlist"===He?.__typename?He.artistsOnTour?.[0]:null,Qe=ze&&"Playlist"===He?.__typename?He.concerts?.items.map((e=>e.data)):null,qe=Qe?.flatMap((e=>"ConcertV2"===e.__typename?[e]:[])).map((e=>{const t=[e.location.name,e.location.city].join(d._s.getSeparator()),s=e.artists.items.flatMap((e=>"Artist"===e.data.__typename?[e.data]:[]));return{venue:t,title:e.title,uri:e.uri,startDate:e.startDateIsoString,imageUrl:s[0]?.visuals.avatarImage?.sources[0]?.url}})),Ye="POP"!==De?new URLSearchParams(Fe.search).get("uid"):null,Ge=(0,z.w)(),{filter:Je}=(0,a.useContext)(_.on),{sortState:Ze}=(0,a.useContext)(w.iC),Xe=(0,a.useContext)(ce.Iv),$e=(0,a.useRef)(null),et=(0,a.useRef)(null),[tt]=h,st=(0,te.O)(null!==Ne?Ne:tt?.url||null),{isPlaying:at,isActive:it,togglePlay:rt,usePlayContextItem:nt}=(0,oe.I)(function(e,t,s){const a={uri:e};return(0,de.y)(a,t),(0,ue.o)(a,(0,me.O8)(s)),a}(s,(0,A.Qn)(Ze),Je),{featureIdentifier:"playlist"}),lt=(0,a.useCallback)((()=>{const e=(0,ae.Il)({isPlaying:at,isActive:it,spec:ve.playButtonFactory(),logger:q,uri:s});rt({loggingParams:e})}),[at,it,rt,ve,q,s]),ot=(0,a.useCallback)((e=>{const t=e.split(/[\r\n]+/g).map((e=>(0,c.nX)(e))).filter((e=>null!==e&&((0,c._Z)(e)||(0,c.QB)(e)||(0,c.UF)(e))));if(t.length>0&&v){const e=t.map((e=>e.toURI())),a=$e.current?.getSelected()?.slice(-1)?.[0],i={after:a??"end"};Be((0,u.gZ)(s,e,i))}}),[v,Be,s]);(0,se.qI)(ot);const ct=(0,a.useCallback)(((e,t)=>{const a=[...t[U.y[c.cH.TRACK]]||[],...t[U.y[c.cH.LOCAL_TRACK]]||[],...t[U.y[c.cH.EPISODE]]||[],...t[U.y[c.cH.ALBUM]]||[]];a.length>0&&v&&(q.logInteraction(Q.dragAddToPlaylist({playlist:s,itemToBeAdded:a[0]})),Be((0,u.gZ)(s,a)),Ge({targetUri:s,intent:"add",type:"drop"}))}),[v,q,Q,s,Be,Ge]),dt=(0,he.qs)(be.S.RichPlaylistPages,Fe),ut=(0,c.nX)(s)?.id;(e=>{const t=(0,i.OY)(),s=(0,M.m)(),r=(0,i.w1)(V);(0,a.useEffect)((()=>{s&&e!==r&&t((0,O.k7)(e))}),[e,r,t,s])})(s);const mt=(0,i.w1)(K),pt=(({treatment:e,entityId:t,experimentId:s,treatmentVariation:a})=>{if(e&&e[t]){const i=e[t].find((e=>e.experimentId===s));return i?.treatment===a}return!1})({treatment:mt||{},entityId:ut||"",experimentId:fe.RPP,treatmentVariation:Ce.VARIANT});const ht=!Oe&&(dt||pt)&&0!==x,yt=!Ae&&G&&(Ee&&!Le||ht),xt=Ae&&X&&re&&G&&(Ee&&!Le||ht),gt=(!Ae||X&&re)&&C&&G,bt=!Ee&&!Ae&&!ht&&G;ee({context:s,shouldFire:!yt});const ft=R?.count??1,[Ct]=(0,N.yA)(),jt="plays"===we.rank_type,vt=(0,a.useMemo)((()=>(0,A.cL)({isMixedMedia:Se,hasEpisodes:j,hasSpotifyAudiobooks:D,hasDateAdded:T,isLive:Te,isConcert:Ie,isBlend:Re,nrCollaborators:ft,isBooklist:Ae,isCompactMode:ne,isChart:ke,showPlayCount:jt})),[Se,j,D,T,Te,Ie,Re,ft,Ae,ne,ke,jt]),kt=(0,a.useMemo)((()=>{let e;return e=Xe.getCapabilities().canSort?Ae?new Set(w._q):new Set((0,A.Y3)(vt)):Ji,e}),[vt,Ae,Xe]),It=re&&Ae&&!ne;return(0,p.jsxs)(a.Suspense,{fallback:null,children:[(0,p.jsx)(f.Q,{children:(0,ye.Ef)({playlistName:m,userName:e.metadata.owner.displayName||"",isSpotifyOwned:Oe})}),(0,p.jsx)(b.c,{types:v&&!Ae?[U.y[c.cH.TRACK],U.y[c.cH.LOCAL_TRACK],U.y[c.cH.EPISODE],U.y[c.cH.ALBUM]]:[],onDrop:ct,children:(0,p.jsxs)("section",{role:"presentation",className:S.c.playlist,"data-testid":"playlist-page","data-test-uri":s,children:[(0,p.jsx)(ya.A,{metadata:e.metadata,isPlaying:at,isPublished:B,totalItems:Ct,togglePlay:lt,backgroundColor:st,spec:pe}),(0,p.jsxs)("div",{className:S.c.playlistContent,children:[(0,p.jsx)(ma,{playlist:e,capabilities:t,spec:ve,isPlaying:at,isActive:it,togglePlay:lt,isBooklist:Ae,backgroundColor:st,tracklistDomRef:et,isConcert:Ie,sortableColumns:kt}),(0,p.jsx)(a.Suspense,{fallback:null,children:(0,p.jsx)(Qi,{formatListData:e.metadata.formatListData})}),!ze&&We?.upcomingEventsCount?(0,p.jsx)(qi,{artistConcertsUri:We.uri||"",artistImageUrl:We.imageUrl||"",artistName:We.title||"",spec:Q}):null,ze&&!!We&&qe&&qe.length>0&&(0,p.jsx)(a.Suspense,{fallback:null,children:(0,p.jsx)(Yi,{liveEvents:qe,artistConcertsUri:We.uri||"",artistName:We.title||"",spec:Q})}),(0,p.jsxs)("div",{className:"contentSpacing",children:[Me?(0,p.jsx)(g,{playlistUri:s}):null,Ve&&Me&&Oe?(0,p.jsx)(Gi,{uri:s,playlistName:m}):null,e.metadata.hasSpotifyAudiobooks&&Ke&&(0,p.jsxs)("div",{className:S.c.noBooklistSupportContainer,children:[(0,p.jsx)(n.a,{variant:"bodyMediumBold",semanticColor:"textBase",children:d._s.get("web-player.playlist.booklist-not-supported-title")}),(0,p.jsx)(n.a,{variant:"bodyMedium",semanticColor:"textSubdued",children:d._s.get("web-player.playlist.booklist-not-supported.message")})]}),y>0&&(0,p.jsx)(a.Suspense,{fallback:null,children:It?(0,p.jsx)(Vt,{initialItems:W,contextUri:s,nrItems:y,canEdit:Ee,canRemove:k,ariaLabel:m}):(0,p.jsx)(Y,{spec:je,children:(0,p.jsx)(E.i,{columns:vt,children:ke?(0,p.jsx)(Yt,{ariaLabel:m,nrTracks:y,playlistUri:s,scrollToUid:Ye,usePlayContextItem:nt,tracklistDomRef:et,sortableColumns:kt,isCompactMode:ne},s):(0,p.jsx)(ja,{ariaLabel:m,nrTracks:y,playlistUri:s,playlistName:m,isMixedMedia:Se,isLive:Te,isConcert:Ie,isBlend:Re,isBooklist:Ae,canEdit:Ee,scrollToUid:Ye,feedbackPath:we["dislike-endpoint"],deleteFeedbackPath:we["delete-endpoint"],usePlayContextItem:nt,tracklistRef:$e,tracklistDomRef:et,canRemove:k,spec:je,initialItems:W,isCompactMode:ne,sortableColumns:kt,hasSpotifyAudiobooks:D??!1},s)})})}),gt&&(0,p.jsx)(a.Suspense,{fallback:null,children:Le?(0,p.jsx)(Ni,{playlistUri:s,onCurationModeChange:Pe,isBooklist:Ae}):(0,p.jsx)("button",{className:S.c.seeMore,onClick:()=>{Pe(!0)},children:(0,p.jsx)(n.a,{as:"div",variant:"bodySmallBold",children:d._s.get("playlist.curation.find_more")})})}),yt?(0,p.jsx)("div",{"data-testid":"recommended-track",children:(0,p.jsx)(Wi,{playlistUri:s,playlistLength:e.metadata.unfilteredTotalLength,canEdit:Ee})}):null,xt?(0,p.jsx)(zi,{uri:s}):null,bt&&(0,p.jsx)(is,{uri:s})]})]}),Ie&&(0,p.jsx)(ha,{spec:Q.footerSectionFactory()})]})})]})})),Xi=a.memo((function({uri:e}){const t=(0,a.useContext)(ce.Iv).getCapabilities(),{filter:s}=(0,a.useContext)(_.on),{sortState:i}=(0,a.useContext)(w.iC),{metadataOptions:r,contentsOptions:n}=(0,Ft.G)(i,s),{data:l,isLoading:o,isError:c}=(0,pe.O)(e,r,n);return!l||o?(0,p.jsx)(R.K,{hasError:c,errorMessage:d._s.get("error.not_found.title.playlist"),loadOffline:t.canModifyOffline}):l.metadata.permissions&&!l.metadata.permissions.canView?(0,p.jsx)(T,{uri:e}):(0,p.jsx)(Zi,{playlist:l,capabilities:t})})),$i=()=>{const{playlistId:e}=(0,r.W4)(),t=(0,c.Eb)((e||"").split("&")[0]).toURI();return(0,p.jsx)(ne.y,{surface:re.g.PLAYLIST,uris:[t],children:(0,p.jsx)(w.sB,{uri:t,children:(0,p.jsx)(_.WC,{uri:t,children:(0,p.jsx)(N.hN,{children:(0,p.jsx)(Xi,{uri:t})})})})})}},38156:(e,t,s)=>{s.d(t,{qs:()=>a});s(41260);const a=(e,t)=>{const s=t?new URLSearchParams(t.search):void 0;return"1"===s?.get(e)}},41956:(e,t,s)=>{s.d(t,{S:()=>a});let a=function(e){return e.I18nSEO="i18nSEO",e.RTPTrackCredits="rtpv2p2",e.I18nAdditionalPages="i18nap",e.RichPlaylistPages="rpp",e.ILRAlbum="ilra",e.ILRAlbumAbove="ilraa",e.ILRAlbumBelow="ilrab",e.ILRShowVariantA="ilrs-a",e.ILRShowVariantB="ilrs-b",e.PlaylistInternalTrackLinks="pitl",e.PlaylistInternalTrackAndArtistLinks="pital",e.AlbumInternalTrackLinks="aitl",e.AlbumInternalTrackAndArtistLinks="aital",e}({})},87096:(e,t,s)=>{s.d(t,{c:()=>a});const a={cards:"TGW6mpr34dHAhhFh0pfw",tourCard:"pQmF4tvRpUeLWgPKUcW7",cardImage:"mGY3ER0iIvb1NbJ1d7X4",cardContent:"JHz_5gqDYpq9Lw3pIac_",subtitle:"oTFzEDWGQSLME1nHjJrt",title:"HPCUzqQRn7oae4vJa3y9",venue:"YxZlxyNx0MHxSVO51TVQ",cardLink:"_B5m05rOGq0BKdTa7al5",cardButton:"StPcf0AvSM0c18nwF4hJ",eventCard:"KhaSITGJnz5MH4qDsYkK",interestedIcon:"ERx0RCdRdFFmYdmZR1P5",concertsCarousel:"nX5e9EyU1GmU42OFVHwH",carouselContent:"MIgjuGue6dRaJWwfUX0K",allEventsCard:"C5dyMaEg91RyIp9YajnW",concertsCarouselControls:"himyaJTaj2PpeC7nuAH5",carouselControlPrev:"KfXbOs2l5lLjtz9R4DiW",carouselControlNext:"yy5akXrxTifXTssHWubJ"}}}]);
//# sourceMappingURL=xpui-routes-playlist.js.map